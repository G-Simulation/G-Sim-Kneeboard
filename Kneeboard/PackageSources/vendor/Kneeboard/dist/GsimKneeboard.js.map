{
  "version": 3,
  "sources": ["global-externals:@microsoft/msfs-sdk", "../../../efb_api/dist/index.js", "../src/GsimKneeboard.tsx"],
  "sourcesContent": ["module.exports = msfssdk;", "var __defProp = Object.defineProperty;\r\nvar __defProps = Object.defineProperties;\r\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\r\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\r\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\r\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\r\nvar __defNormalProp = (obj, key, value2) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value: value2 }) : obj[key] = value2;\r\nvar __spreadValues = (a, b) => {\r\n  for (var prop in b || (b = {}))\r\n    if (__hasOwnProp.call(b, prop))\r\n      __defNormalProp(a, prop, b[prop]);\r\n  if (__getOwnPropSymbols)\r\n    for (var prop of __getOwnPropSymbols(b)) {\r\n      if (__propIsEnum.call(b, prop))\r\n        __defNormalProp(a, prop, b[prop]);\r\n    }\r\n  return a;\r\n};\r\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\r\nvar __objRest = (source, exclude) => {\r\n  var target = {};\r\n  for (var prop in source)\r\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\r\n      target[prop] = source[prop];\r\n  if (source != null && __getOwnPropSymbols)\r\n    for (var prop of __getOwnPropSymbols(source)) {\r\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\r\n        target[prop] = source[prop];\r\n    }\r\n  return target;\r\n};\r\nimport { ArraySubject, Subject, FacilityUtils, FacilityType, AirportUtils, UnitType, ICAO, DmsFormatter, HandlerSubscription, AbstractSubscribableArray, SubscribableArrayEventType, UUID, NumberFormatter, UnitFamily, DisplayComponent, FSComponent, SubscribableUtils, ArrayUtils, SubscribableMapFunctions, MappedSubject, Wait, ObjectSubject, SetSubject, AbstractNumberUnitDisplay, RunwayUtils, DebounceTimer, GeoPoint, FacilityLoader, FacilityRepository, FacilitySearchType, DataStore, DefaultUserSettingManager, BasicNavAngleUnit, UserSettingSaveManager } from \"@microsoft/msfs-sdk\";\r\nvar AppBootMode = /* @__PURE__ */ ((AppBootMode2) => {\r\n  AppBootMode2[AppBootMode2[\"COLD\"] = 0] = \"COLD\";\r\n  AppBootMode2[AppBootMode2[\"WARM\"] = 1] = \"WARM\";\r\n  AppBootMode2[AppBootMode2[\"HOT\"] = 2] = \"HOT\";\r\n  return AppBootMode2;\r\n})(AppBootMode || {});\r\nvar AppSuspendMode = /* @__PURE__ */ ((AppSuspendMode2) => {\r\n  AppSuspendMode2[AppSuspendMode2[\"SLEEP\"] = 0] = \"SLEEP\";\r\n  AppSuspendMode2[AppSuspendMode2[\"TERMINATE\"] = 1] = \"TERMINATE\";\r\n  return AppSuspendMode2;\r\n})(AppSuspendMode || {});\r\nlet uid = 0;\r\nclass Container {\r\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n  constructor() {\r\n    this._uid = uid++;\r\n    this._registeredAppsPromises = [];\r\n    this._installedApps = ArraySubject.create();\r\n  }\r\n  /**\r\n   * Static singleton instance of Efb container\r\n   * @internal\r\n   */\r\n  static get instance() {\r\n    return window.EFB_API = Container._instance = window.EFB_API || Container._instance || new Container();\r\n  }\r\n  /** @internal */\r\n  apps() {\r\n    return this._installedApps;\r\n  }\r\n  /** @internal */\r\n  allAppsLoaded() {\r\n    return this._registeredAppsPromises.length === this._installedApps.length;\r\n  }\r\n  /**\r\n   * Method used by the OS to share the bus to apps\r\n   * @internal\r\n   */\r\n  setBus(bus) {\r\n    this.bus = bus;\r\n    return this;\r\n  }\r\n  /**\r\n   * Method used by the OS to share the units settings manager to the apps\r\n   * @internal\r\n   */\r\n  setUnitsSettingManager(unitsSettingManager) {\r\n    this.unitsSettingManager = unitsSettingManager;\r\n    return this;\r\n  }\r\n  /**\r\n   * Method used by the OS to share the settings manager to the apps\r\n   * @internal\r\n   */\r\n  setEfbSettingManager(efbSettingsManager) {\r\n    this.efbSettingsManager = efbSettingsManager;\r\n    return this;\r\n  }\r\n  setOnboardingManager(onboardingManager) {\r\n    this.onboardingManager = onboardingManager;\r\n    return this;\r\n  }\r\n  /**\r\n   * Method used by the OS to share the notification manager to the apps\r\n   * @internal\r\n   */\r\n  setNotificationManager(notificationManager) {\r\n    this.notificationManager = notificationManager;\r\n    return this;\r\n  }\r\n  /**\r\n   * Load stylesheet\r\n   * @param uri\r\n   * @returns Promise which is resolved when stylesheet is loaded or rejected if an error occur.\r\n   */\r\n  async loadCss(uri) {\r\n    if (document.querySelector(`link[href*=\"${uri}\"]`)) {\r\n      return Promise.reject(`${uri} already loaded.`);\r\n    }\r\n    const linkTag = document.createElement(\"link\");\r\n    linkTag.rel = \"stylesheet\";\r\n    linkTag.href = uri;\r\n    document.head.append(linkTag);\r\n    return new Promise((resolve, reject) => {\r\n      linkTag.onload = () => resolve();\r\n      linkTag.onerror = reject;\r\n    });\r\n  }\r\n  /**\r\n   * Load script file\r\n   * @param uri\r\n   * @returns Promise which is resolved when script is loaded or rejected if an error occur.\r\n   */\r\n  async loadJs(uri) {\r\n    if (document.querySelector(`script[src*=\"${uri}\"]`)) {\r\n      return Promise.reject(`${uri} already loaded.`);\r\n    }\r\n    const scriptTag = document.createElement(\"script\");\r\n    scriptTag.type = \"text/javascript\";\r\n    scriptTag.src = uri;\r\n    document.head.append(scriptTag);\r\n    return new Promise((resolve, reject) => {\r\n      scriptTag.onload = () => resolve();\r\n      scriptTag.onerror = reject;\r\n    });\r\n  }\r\n  /**\r\n   * Register an app in EFB\r\n   * @template T - App registration options\r\n   * @param app The app you wan't to register\r\n   * @param options Options you'r app might need when installing\r\n   * @returns EFB instance\r\n   * @throws Throw an error if App install went wrong.\r\n   */\r\n  use(app, ...options) {\r\n    var _a;\r\n    try {\r\n      if (!this.bus) {\r\n        throw new Error(`Bus has not been initialized yet.`);\r\n      }\r\n      const appInstance = app instanceof App ? app : new app();\r\n      const installProps = {\r\n        bus: this.bus,\r\n        unitsSettingManager: this.unitsSettingManager,\r\n        efbSettingsManager: this.efbSettingsManager,\r\n        notificationManager: this.notificationManager,\r\n        onboardingManager: this.onboardingManager,\r\n        options: Object.keys(options).filter((key) => key !== \"isCoreApp\").reduce((acc, key) => {\r\n          return Object.assign(acc, options[key]);\r\n        }, {})\r\n      };\r\n      const appInstaller = appInstance._install.apply(appInstance, [installProps]);\r\n      const name = appInstance.internalName;\r\n      if (/\\s/.test(name)) {\r\n        throw new Error(`The App name can't have any whitespace character. \"${name}\"`);\r\n      }\r\n      this._registeredAppsPromises.push(\r\n        appInstaller.then(() => {\r\n          this._installedApps.insert(appInstance);\r\n        })\r\n      );\r\n    } catch (e) {\r\n      (_a = document.currentScript) == null ? void 0 : _a.remove();\r\n      console.error(`App can't be installed`, e);\r\n      throw e;\r\n    }\r\n    return this;\r\n  }\r\n}\r\nconst Efb = Container.instance;\r\nconst EfbApiVersion = \"1.0.3\";\r\nclass App {\r\n  constructor() {\r\n    this._isInstalled = false;\r\n    this._isReady = false;\r\n    this._favoriteIndex = -1;\r\n    this.available = Subject.create(true);\r\n    this.BootMode = AppBootMode.COLD;\r\n    this.SuspendMode = AppSuspendMode.SLEEP;\r\n  }\r\n  /**\r\n   * @param props\r\n   * @internal\r\n   */\r\n  async _install(props) {\r\n    var _a;\r\n    if (this._isInstalled) {\r\n      return Promise.reject(\"App already installed.\");\r\n    }\r\n    this._isInstalled = true;\r\n    this.bus = props.bus;\r\n    this._unitsSettingsManager = props.unitsSettingManager;\r\n    this._efbSettingsManager = props.efbSettingsManager;\r\n    this._notificationManager = props.notificationManager;\r\n    this._onboardingManager = props.onboardingManager;\r\n    this._favoriteIndex = (_a = props.favoriteIndex) != null ? _a : -1;\r\n    this.options = props.options;\r\n    await this.install(props);\r\n    this._isReady = true;\r\n    Coherent.trigger(\"EFB_APP_INSTALLED\", this.name, this.internalName, EfbApiVersion, this.getVersion());\r\n    return Promise.resolve();\r\n  }\r\n  /**\r\n   * Install hook\r\n   * @param props\r\n   */\r\n  async install(props) {\r\n    return Promise.resolve();\r\n  }\r\n  /** Boolean to check if app is loaded and installed. */\r\n  get isReady() {\r\n    return this._isReady;\r\n  }\r\n  /**\r\n   * Internal app name\r\n   * @defaultValue > Class's name (`this.constructor.name`)\r\n   */\r\n  get internalName() {\r\n    return this.constructor.name;\r\n  }\r\n  /**\r\n   * EFB units settings manager\r\n   * @returns a unique unitsSettingsManager instance\r\n   */\r\n  get unitsSettingsManager() {\r\n    const unitsSettingsManager = this._unitsSettingsManager;\r\n    if (!unitsSettingsManager) {\r\n      throw new Error(\"Units settings manager is not defined\");\r\n    }\r\n    return unitsSettingsManager;\r\n  }\r\n  /**\r\n   * EFB settings manager\r\n   * @returns a unique efbSettingsManager instance\r\n   */\r\n  get efbSettingsManager() {\r\n    const efbSettingsManager = this._efbSettingsManager;\r\n    if (!efbSettingsManager) {\r\n      throw new Error(\"EFB settings manager is not defined\");\r\n    }\r\n    return efbSettingsManager;\r\n  }\r\n  /**\r\n   * EFB notification manager\r\n   * @returns a unique efbNotificationManager instance\r\n   */\r\n  get notificationManager() {\r\n    const notificationManager = this._notificationManager;\r\n    if (!notificationManager) {\r\n      throw new Error(\"Notification manager is not defined\");\r\n    }\r\n    return notificationManager;\r\n  }\r\n  /** Onboarding manager */\r\n  get onboardingManager() {\r\n    const onboardingManager = this._onboardingManager;\r\n    if (!onboardingManager) {\r\n      throw new Error(\"Onboarding manager is not defined\");\r\n    }\r\n    return onboardingManager;\r\n  }\r\n  /**\r\n   * Aircraft models list compatible with the App. If not defined, the App is compatible with all aircraft models.\r\n   * example: ['Cabri G2', 'H125']\r\n   * @returns a list of aircraft models compatible with the App or undefined\r\n   */\r\n  get compatibleAircraftModels() {\r\n    return void 0;\r\n  }\r\n  /** @internal */\r\n  get favoriteIndex() {\r\n    return this._favoriteIndex;\r\n  }\r\n  /** @internal */\r\n  set favoriteIndex(index2) {\r\n    this._favoriteIndex = index2;\r\n  }\r\n  /**\r\n   * @since 1.0.3\r\n   * @returns True if the app is searchable (ie: app list)\r\n   */\r\n  getIsSearchable() {\r\n    var _a;\r\n    return (_a = this.options.isSearchable) != null ? _a : true;\r\n  }\r\n  /**\r\n   * @since 1.0.3\r\n   * @returns True if the app can be added to favorites\r\n   */\r\n  getIsFavoritable() {\r\n    var _a;\r\n    return (_a = this.options.isFavoritable) != null ? _a : true;\r\n  }\r\n  /**\r\n   * @since 1.0.3\r\n   * @returns Return app version\r\n   */\r\n  getVersion() {\r\n    return \"\";\r\n  }\r\n}\r\nfunction unique(collection) {\r\n  return collection.reduce((acc, item) => {\r\n    if (!acc.includes(item)) {\r\n      acc.push(item);\r\n    }\r\n    return acc;\r\n  }, []);\r\n}\r\nfunction groupBy(collection, iteratee) {\r\n  return collection.reduce((accumulator, value2) => {\r\n    let key = String(typeof iteratee === \"function\" ? iteratee(value2) : iteratee);\r\n    if (value2 && typeof value2 === \"object\" && key in value2) {\r\n      key = String(value2[key]);\r\n    }\r\n    if (Object.prototype.hasOwnProperty.call(accumulator, key)) {\r\n      accumulator[key].push(value2);\r\n    } else {\r\n      accumulator[key] = [value2];\r\n    }\r\n    return accumulator;\r\n  }, {});\r\n}\r\nfunction random(collection) {\r\n  const length = collection.length;\r\n  return length ? collection[Math.floor(Math.random() * length)] : void 0;\r\n}\r\nfunction chunk(collection, size) {\r\n  size = Math.floor(size);\r\n  if (size <= 0 || isNaN(size)) {\r\n    return [];\r\n  }\r\n  const collectionLength = collection.length;\r\n  const newCollection = new Array(Math.ceil(collectionLength / size));\r\n  let index2 = 0;\r\n  let resIndex = 0;\r\n  while (index2 < collectionLength) {\r\n    newCollection[resIndex++] = collection.slice(index2, index2 += size);\r\n  }\r\n  return newCollection;\r\n}\r\nfunction wrap(collection) {\r\n  return Array.isArray(collection) ? collection : [collection];\r\n}\r\nfunction isVNode(object) {\r\n  return \"instance\" in object && \"props\" in object && \"children\" in object;\r\n}\r\nfunction isIApp(object) {\r\n  return \"internalName\" in object && \"BootMode\" in object;\r\n}\r\nfunction isConstructor(func) {\r\n  return typeof func === \"function\" && !!func.prototype && func.prototype.constructor === func;\r\n}\r\nfunction isFunction(fn) {\r\n  return typeof fn === \"function\";\r\n}\r\nfunction toArray(list, start = 0) {\r\n  let i = list.length - start;\r\n  const ret = new Array(i);\r\n  while (i--) {\r\n    ret[i] = list[i + start];\r\n  }\r\n  return ret;\r\n}\r\nfunction toClassProp(classProp) {\r\n  if (classProp === void 0) {\r\n    return classProp;\r\n  }\r\n  if (Array.isArray(classProp)) {\r\n    return toClassProp(classProp.join(\" \"));\r\n  }\r\n  if (typeof classProp !== \"string\") {\r\n    return classProp;\r\n  }\r\n  return classProp.split(\" \").reduce(function(stack, el) {\r\n    return __spreadProps(__spreadValues({}, stack), { [el]: true });\r\n  }, {});\r\n}\r\nfunction mergeClassProp(baseProp, ...args) {\r\n  const mergedClassProp = Object.assign({}, toClassProp(baseProp));\r\n  for (const arg of args) {\r\n    Object.assign(mergedClassProp, toClassProp(arg));\r\n  }\r\n  return mergedClassProp;\r\n}\r\nconst dayKeys = [\r\n  \"@fs-base,TT:TIME.SUNDAY\",\r\n  \"@fs-base,TT:TIME.MONDAY\",\r\n  \"@fs-base,TT:TIME.TUESDAY\",\r\n  \"@fs-base,TT:TIME.WEDNESDAY\",\r\n  \"@fs-base,TT:TIME.THURSDAY\",\r\n  \"@fs-base,TT:TIME.FRIDAY\",\r\n  \"@fs-base,TT:TIME.SATURDAY\"\r\n];\r\nconst monthKeys = [\r\n  \"@fs-base,TT:TIME.JANUARY\",\r\n  \"@fs-base,TT:TIME.FEBRUARY\",\r\n  \"@fs-base,TT:TIME.MARCH\",\r\n  \"@fs-base,TT:TIME.APRIL\",\r\n  \"@fs-base,TT:TIME.MAY\",\r\n  \"@fs-base,TT:TIME.JUNE\",\r\n  \"@fs-base,TT:TIME.JULY\",\r\n  \"@fs-base,TT:TIME.AUGUST\",\r\n  \"@fs-base,TT:TIME.SEPTEMBER\",\r\n  \"@fs-base,TT:TIME.OCTOBER\",\r\n  \"@fs-base,TT:TIME.NOVEMBER\",\r\n  \"@fs-base,TT:TIME.DECEMBER\"\r\n];\r\nconst monthShortKeys = [\r\n  \"@fs-base,TT:TIME.monthShort1\",\r\n  \"@fs-base,TT:TIME.monthShort2\",\r\n  \"@fs-base,TT:TIME.monthShort3\",\r\n  \"@fs-base,TT:TIME.monthShort4\",\r\n  \"@fs-base,TT:TIME.monthShort5\",\r\n  \"@fs-base,TT:TIME.monthShort6\",\r\n  \"@fs-base,TT:TIME.monthShort7\",\r\n  \"@fs-base,TT:TIME.monthShort8\",\r\n  \"@fs-base,TT:TIME.monthShort9\",\r\n  \"@fs-base,TT:TIME.monthShort10\",\r\n  \"@fs-base,TT:TIME.monthShort11\",\r\n  \"@fs-base,TT:TIME.monthShort12\"\r\n];\r\nfunction getWeeksInMonth(year, month) {\r\n  const weeks = [];\r\n  const firstDate = new Date(year, month, 1);\r\n  const lastDate = new Date(year, month + 1, 0);\r\n  const numDays = lastDate.getDate();\r\n  let dayOfWeekCounter = firstDate.getDay();\r\n  for (let date = 1; date <= numDays; date++) {\r\n    if (dayOfWeekCounter === 0 || weeks.length === 0) {\r\n      weeks.push([]);\r\n    }\r\n    weeks[weeks.length - 1].push(date);\r\n    dayOfWeekCounter = (dayOfWeekCounter + 1) % 7;\r\n  }\r\n  return weeks.filter((w) => w.length > 0).map((w) => ({\r\n    startDay: w[0],\r\n    endDay: w[w.length - 1]\r\n  }));\r\n}\r\nfunction getStartOfWeek(year, month, day) {\r\n  const date = new Date(year, month, day);\r\n  date.setDate(date.getDate() - date.getDay());\r\n  return date;\r\n}\r\nfunction formatDay(day) {\r\n  if (day === 31) return \"st\";\r\n  switch (day % 20) {\r\n    case 1:\r\n      return \"st\";\r\n    case 2:\r\n      return \"nd\";\r\n    case 3:\r\n      return \"rd\";\r\n    default:\r\n      return \"th\";\r\n  }\r\n}\r\nfunction isSelectedAirportFacility(facility) {\r\n  return \"currentRunway\" in facility;\r\n}\r\nfunction isAirportFacility(facility) {\r\n  return FacilityUtils.isFacilityType(facility, FacilityType.Airport) && \"altitude\" in facility;\r\n}\r\nvar AirportSize = /* @__PURE__ */ ((AirportSize2) => {\r\n  AirportSize2[\"Large\"] = \"Large\";\r\n  AirportSize2[\"Medium\"] = \"Medium\";\r\n  AirportSize2[\"Small\"] = \"Small\";\r\n  return AirportSize2;\r\n})(AirportSize || {});\r\nconst LargeAirportThresholdFt = 8100;\r\nconst MediumAirportThresholdFt = 5e3;\r\nfunction getAirportSize(airport) {\r\n  const longestRunway = AirportUtils.getLongestRunway(airport);\r\n  if (!longestRunway) {\r\n    return \"Small\";\r\n  }\r\n  const longestRwyLengthFeet = UnitType.METER.convertTo(longestRunway.length, UnitType.FOOT);\r\n  return longestRwyLengthFeet >= LargeAirportThresholdFt ? \"Large\" : longestRwyLengthFeet >= MediumAirportThresholdFt || airport.towered ? \"Medium\" : \"Small\";\r\n}\r\nfunction getFacilityStrField(facility, propertyName, getter) {\r\n  return facility ? getter(facility[propertyName]) : \"\";\r\n}\r\nfunction getICAOIdent(facility) {\r\n  return getFacilityStrField(facility, \"icao\", ICAO.getIdent);\r\n}\r\nfunction getFacilityName(facility) {\r\n  return getFacilityStrField(facility, \"name\", Utils.Translate);\r\n}\r\nfunction getRunwayName(runway, shortened = false) {\r\n  return `${shortened ? \"rwy\" : \"runway\"} ${runway.designation}`;\r\n}\r\nfunction getCurrentRunwayName(facility) {\r\n  return facility && isSelectedAirportFacility(facility) ? getRunwayName(facility.currentRunway) : \"\";\r\n}\r\nfunction getFacilityIconPath(facilityType) {\r\n  let svgName;\r\n  switch (facilityType) {\r\n    case FacilityType.Airport:\r\n    case FacilityType.RWY:\r\n      svgName = \"Airport\";\r\n      break;\r\n    case FacilityType.VOR:\r\n      svgName = \"VOR\";\r\n      break;\r\n    case FacilityType.NDB:\r\n      svgName = \"NDB\";\r\n      break;\r\n    case FacilityType.USR:\r\n      svgName = \"Intersection\";\r\n      break;\r\n    case FacilityType.Intersection:\r\n    default:\r\n      svgName = \"Waypoint\";\r\n  }\r\n  return `coui://html_ui/efb_ui/efb_os/Assets/icons/facilities/${svgName}.svg`;\r\n}\r\nfunction createCustomFacility(repository, lat, lon) {\r\n  const customIdent = getLatLonStr(lat, lon);\r\n  const icao = `U      ${customIdent}`;\r\n  const customFac = {\r\n    icao,\r\n    icaoStruct: ICAO.stringV1ToValue(icao),\r\n    city: \"none\",\r\n    lat,\r\n    lon,\r\n    name: \"Custom point\",\r\n    region: \"none\"\r\n  };\r\n  repository.add(customFac);\r\n  return customFac;\r\n}\r\nfunction getLatLonStr(lat, lon) {\r\n  const dmsFormatter = new DmsFormatter();\r\n  const partsLat = dmsFormatter.parseLat(lat);\r\n  let customName = partsLat.degrees.toFixed(0) + partsLat.minutes.toFixed(0) + partsLat.direction;\r\n  const partsLon = dmsFormatter.parseLon(lon);\r\n  customName += partsLon.degrees.toFixed(0) + partsLon.minutes.toFixed(0) + partsLon.direction;\r\n  return customName;\r\n}\r\nvar SubscribableMapEventType = /* @__PURE__ */ ((SubscribableMapEventType2) => {\r\n  SubscribableMapEventType2[SubscribableMapEventType2[\"Added\"] = 0] = \"Added\";\r\n  SubscribableMapEventType2[SubscribableMapEventType2[\"Updated\"] = 1] = \"Updated\";\r\n  SubscribableMapEventType2[SubscribableMapEventType2[\"Removed\"] = 2] = \"Removed\";\r\n  return SubscribableMapEventType2;\r\n})(SubscribableMapEventType || {});\r\nclass MapSubject {\r\n  constructor(entries) {\r\n    this.isSubscribable = true;\r\n    this.isMapSubscribable = true;\r\n    this.obj = /* @__PURE__ */ new Map();\r\n    this.subs = [];\r\n    this.notifyDepth = 0;\r\n    this.initialNotifyFunc = this.initialNotify.bind(this);\r\n    this.onSubDestroyedFunc = this.onSubDestroyed.bind(this);\r\n    if (entries) {\r\n      for (const [k, v] of entries) {\r\n        this.obj.set(k, v);\r\n      }\r\n    }\r\n  }\r\n  get length() {\r\n    return this.obj.size;\r\n  }\r\n  static create(entries) {\r\n    return new MapSubject(entries);\r\n  }\r\n  get(key) {\r\n    return this.obj.get(key);\r\n  }\r\n  set(key, value2) {\r\n    const oldValue = this.obj.get(key);\r\n    const exists = this.has(key);\r\n    this.obj.set(key, value2);\r\n    this.notify(key, exists ? 1 : 0, value2, oldValue);\r\n  }\r\n  has(key) {\r\n    return this.obj.has(key);\r\n  }\r\n  delete(key) {\r\n    const deleted = this.obj.delete(key);\r\n    if (deleted) {\r\n      this.notify(\r\n        key,\r\n        2\r\n        /* Removed */\r\n      );\r\n    }\r\n    return deleted;\r\n  }\r\n  sub(handler, initialNotify = false, paused = false) {\r\n    const sub = new HandlerSubscription(handler, this.initialNotifyFunc, this.onSubDestroyedFunc);\r\n    this.subs.push(sub);\r\n    if (paused) {\r\n      sub.pause();\r\n    } else if (initialNotify) {\r\n      sub.initialNotify();\r\n    }\r\n    return sub;\r\n  }\r\n  unsub(handler) {\r\n    const toDestroy = this.subs.find((sub) => sub.handler === handler);\r\n    toDestroy == null ? void 0 : toDestroy.destroy();\r\n  }\r\n  map(_fn, _equalityFunc, _mutateFunc, _initialVal) {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n  pipe(_to, _map, _paused) {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n  notify(key, type, modifiedItem, previousValue) {\r\n    let needCleanUpSubs = false;\r\n    this.notifyDepth++;\r\n    for (const sub of this.subs) {\r\n      try {\r\n        if (sub.isAlive && !sub.isPaused) {\r\n          sub.handler(key, type, modifiedItem, previousValue);\r\n        }\r\n        needCleanUpSubs || (needCleanUpSubs = !sub.isAlive);\r\n      } catch (error) {\r\n        console.error(`MapSubject: error in handler: ${error}`);\r\n      }\r\n    }\r\n    this.notifyDepth--;\r\n    if (needCleanUpSubs && this.notifyDepth === 0) {\r\n      this.subs = this.subs.filter((sub) => sub.isAlive);\r\n    }\r\n  }\r\n  initialNotify(sub) {\r\n    for (const key of this.obj.keys()) {\r\n      const v = this.obj.get(key);\r\n      try {\r\n        sub.handler(key, 0, v, void 0);\r\n      } catch (error) {\r\n        console.error(`MapSubject: error in handker: ${error}`);\r\n      }\r\n    }\r\n  }\r\n  onSubDestroyed(sub) {\r\n    if (this.notifyDepth === 0) {\r\n      this.subs.splice(this.subs.indexOf(sub), 1);\r\n    }\r\n  }\r\n}\r\nfunction where(value2) {\r\n  return (input) => value2 === input;\r\n}\r\nfunction toString() {\r\n  return (input) => input.toString();\r\n}\r\nclass ArrayFilterSubject extends AbstractSubscribableArray {\r\n  constructor(arr, predicate) {\r\n    super();\r\n    this.array = [];\r\n    this.sourceSub = arr.sub((_index, _type, _item, _array) => {\r\n      const arrayBefore = [...this.array];\r\n      this.array = _array.filter(predicate);\r\n      if (arrayBefore !== this.array) {\r\n        const index2 = arrayBefore.length;\r\n        this.notify(0, SubscribableArrayEventType.Cleared);\r\n        this.notify(\r\n          index2,\r\n          this.array.length >= index2 ? SubscribableArrayEventType.Added : SubscribableArrayEventType.Removed,\r\n          this.array\r\n        );\r\n      }\r\n    }, true);\r\n  }\r\n  get length() {\r\n    return this.array.length;\r\n  }\r\n  static create(arr, predicate) {\r\n    return new ArrayFilterSubject(arr, predicate);\r\n  }\r\n  getArray() {\r\n    return this.array;\r\n  }\r\n  destroy() {\r\n    this.sourceSub.destroy();\r\n  }\r\n}\r\nvar FlightPhaseState = /* @__PURE__ */ ((FlightPhaseState2) => {\r\n  FlightPhaseState2[FlightPhaseState2[\"PREFLIGHT\"] = 0] = \"PREFLIGHT\";\r\n  FlightPhaseState2[FlightPhaseState2[\"STARTUP\"] = 1] = \"STARTUP\";\r\n  FlightPhaseState2[FlightPhaseState2[\"BEFORE_TAXI\"] = 2] = \"BEFORE_TAXI\";\r\n  FlightPhaseState2[FlightPhaseState2[\"TAXI\"] = 3] = \"TAXI\";\r\n  FlightPhaseState2[FlightPhaseState2[\"TAKEOFF\"] = 4] = \"TAKEOFF\";\r\n  FlightPhaseState2[FlightPhaseState2[\"CLIMB\"] = 5] = \"CLIMB\";\r\n  FlightPhaseState2[FlightPhaseState2[\"CRUISE\"] = 6] = \"CRUISE\";\r\n  FlightPhaseState2[FlightPhaseState2[\"DESCENT\"] = 7] = \"DESCENT\";\r\n  FlightPhaseState2[FlightPhaseState2[\"LANDING\"] = 8] = \"LANDING\";\r\n  FlightPhaseState2[FlightPhaseState2[\"TAXITOGATE\"] = 9] = \"TAXITOGATE\";\r\n  FlightPhaseState2[FlightPhaseState2[\"SHUTDOWN\"] = 10] = \"SHUTDOWN\";\r\n  FlightPhaseState2[FlightPhaseState2[\"FLIGHT_OVER\"] = 11] = \"FLIGHT_OVER\";\r\n  FlightPhaseState2[FlightPhaseState2[\"UNKNOWN\"] = 100] = \"UNKNOWN\";\r\n  return FlightPhaseState2;\r\n})(FlightPhaseState || {});\r\nclass _FlightPhaseManager {\r\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n  constructor() {\r\n    this._flightPhase = Subject.create(\r\n      100\r\n      /* UNKNOWN */\r\n    );\r\n    this.flightPhase = this._flightPhase;\r\n    this.isFlightOver = this._flightPhase.map(where(\r\n      11\r\n      /* FLIGHT_OVER */\r\n    ));\r\n    this.onFlightPhaseStateChangedSubscription = null;\r\n  }\r\n  /**\r\n   * Static singleton instance of the Flight Phase Manager\r\n   * @internal\r\n   */\r\n  static get instance() {\r\n    return window.FLIGHT_PHASE_MANAGER = _FlightPhaseManager._instance = window.FLIGHT_PHASE_MANAGER || _FlightPhaseManager._instance || new _FlightPhaseManager();\r\n  }\r\n  /**\r\n   * The bus is set once at EFB initialization from efb_ui.tsx\r\n   * @internal\r\n   */\r\n  setBus(bus) {\r\n    var _a;\r\n    (_a = this.onFlightPhaseStateChangedSubscription) == null ? void 0 : _a.destroy();\r\n    this.onFlightPhaseStateChangedSubscription = bus.on(\"FlightPhaseChanged\", (flightPhase) => {\r\n      switch (flightPhase) {\r\n        case \"PREFLIGHT_RTC\":\r\n        case \"PREFLIGHT\":\r\n        case \"SKIP_TRANSITION_PREFLIGHT\":\r\n          this._flightPhase.set(\r\n            0\r\n            /* PREFLIGHT */\r\n          );\r\n          break;\r\n        case \"STARTUP\":\r\n          this._flightPhase.set(\r\n            1\r\n            /* STARTUP */\r\n          );\r\n          break;\r\n        case \"BEFORE_TAXI\":\r\n        case \"TAXI\":\r\n        case \"SKIP_TRANSITION_TAXI\":\r\n          this._flightPhase.set(\r\n            3\r\n            /* TAXI */\r\n          );\r\n          break;\r\n        case \"TAKEOFF\":\r\n          this._flightPhase.set(\r\n            4\r\n            /* TAKEOFF */\r\n          );\r\n          break;\r\n        case \"CLIMB\":\r\n          this._flightPhase.set(\r\n            5\r\n            /* CLIMB */\r\n          );\r\n          break;\r\n        case \"CRUISE\":\r\n        case \"SKIP_TRANSITION_CRUISE\":\r\n          this._flightPhase.set(\r\n            6\r\n            /* CRUISE */\r\n          );\r\n          break;\r\n        case \"DESCENT\":\r\n          this._flightPhase.set(\r\n            7\r\n            /* DESCENT */\r\n          );\r\n          break;\r\n        case \"LANDING\":\r\n          this._flightPhase.set(\r\n            8\r\n            /* LANDING */\r\n          );\r\n          break;\r\n        case \"TAXITOGATE\":\r\n        case \"SKIP_TRANSITION_TAXITOGATE\":\r\n          this._flightPhase.set(\r\n            9\r\n            /* TAXITOGATE */\r\n          );\r\n          break;\r\n        case \"SHUTDOWN\":\r\n          this._flightPhase.set(\r\n            10\r\n            /* SHUTDOWN */\r\n          );\r\n          break;\r\n        case \"RTC\":\r\n          break;\r\n        case \"MISSIONSUCCESS\":\r\n        case \"MISSIONABORTED\":\r\n          this._flightPhase.set(\r\n            11\r\n            /* FLIGHT_OVER */\r\n          );\r\n          break;\r\n        case \"REACH BANNER APPROACH\":\r\n        case \"HOOKBANNER\":\r\n        case \"REACH PASS\":\r\n        case \"PASS\":\r\n        case \"CRUISEBACK\":\r\n        case \"REACH DROP\":\r\n        case \"DROP BANNER\":\r\n          break;\r\n        case \"WATERDROP\":\r\n          break;\r\n        default:\r\n          console.warn(`Received unknown flight phase '${flightPhase}'`);\r\n          this._flightPhase.set(\r\n            100\r\n            /* UNKNOWN */\r\n          );\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * @description This function is used in order to verify if a given flight phase has been reached.\r\n   * Always return true when the flight phase is unknown.\r\n   * @param flightPhase The flight phase that has been reached or not\r\n   * @returns A subscribable that returns whether the given flight phase has been reached\r\n   */\r\n  hasReachedFlightPhaseState(flightPhase) {\r\n    return this.flightPhase.map(\r\n      (currentFlightPhaseState) => currentFlightPhaseState >= flightPhase\r\n    );\r\n  }\r\n}\r\nconst FlightPhaseManager = _FlightPhaseManager.instance;\r\nvar GameMode = /* @__PURE__ */ ((GameMode2) => {\r\n  GameMode2[GameMode2[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\r\n  GameMode2[GameMode2[\"CAREER\"] = 1] = \"CAREER\";\r\n  GameMode2[GameMode2[\"CHALLENGE\"] = 2] = \"CHALLENGE\";\r\n  GameMode2[GameMode2[\"DISCOVERY\"] = 3] = \"DISCOVERY\";\r\n  GameMode2[GameMode2[\"FREEFLIGHT\"] = 4] = \"FREEFLIGHT\";\r\n  return GameMode2;\r\n})(GameMode || {});\r\nclass _GameModeManager {\r\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n  constructor() {\r\n    this._gameMode = Subject.create(\r\n      0\r\n      /* UNKNOWN */\r\n    );\r\n    this.gameMode = this._gameMode;\r\n    this.isCareer = this._gameMode.map(where(\r\n      1\r\n      /* CAREER */\r\n    ));\r\n    this.isChallenge = this._gameMode.map(where(\r\n      2\r\n      /* CHALLENGE */\r\n    ));\r\n    this.isDiscovery = this._gameMode.map(where(\r\n      3\r\n      /* DISCOVERY */\r\n    ));\r\n    this.isFreeflight = this._gameMode.map(where(\r\n      4\r\n      /* FREEFLIGHT */\r\n    ));\r\n    this.isInMenu = Subject.create(true);\r\n    this.onGameModeChangedSubscription = null;\r\n    this.onIsInMenuSubscription = null;\r\n  }\r\n  /**\r\n   * Static singleton instance of the Game mode manager\r\n   * @internal\r\n   */\r\n  static get instance() {\r\n    return window.GAME_MODE_MANAGER = _GameModeManager._instance = window.GAME_MODE_MANAGER || _GameModeManager._instance || new _GameModeManager();\r\n  }\r\n  /**\r\n   * The bus is set once at EFB initialization from efb_ui.tsx\r\n   * @internal\r\n   */\r\n  setBus(bus) {\r\n    var _a, _b;\r\n    (_a = this.onGameModeChangedSubscription) == null ? void 0 : _a.destroy();\r\n    (_b = this.onIsInMenuSubscription) == null ? void 0 : _b.destroy();\r\n    this.onGameModeChangedSubscription = bus.on(\"GameModeChanged\", (gameMode) => {\r\n      switch (gameMode) {\r\n        case \"\":\r\n          this._gameMode.set(\r\n            0\r\n            /* UNKNOWN */\r\n          );\r\n          break;\r\n        case \"CAREER GAMEMODE\":\r\n          this._gameMode.set(\r\n            1\r\n            /* CAREER */\r\n          );\r\n          break;\r\n        case \"CHALLENGE GAMEMODE\":\r\n          this._gameMode.set(\r\n            2\r\n            /* CHALLENGE */\r\n          );\r\n          break;\r\n        case \"DISCOVERY GAMEMODE\":\r\n          this._gameMode.set(\r\n            3\r\n            /* DISCOVERY */\r\n          );\r\n          break;\r\n        case \"FREEFLIGHT GAMEMODE\":\r\n          this._gameMode.set(\r\n            4\r\n            /* FREEFLIGHT */\r\n          );\r\n          break;\r\n        default:\r\n          console.error(`Unknown game mode '${gameMode}'`);\r\n          this._gameMode.set(\r\n            0\r\n            /* UNKNOWN */\r\n          );\r\n      }\r\n    });\r\n    this.onIsInMenuSubscription = bus.on(\"IsInMenuUpdate\", (isInMenu) => this.isInMenu.set(isInMenu));\r\n  }\r\n}\r\nconst GameModeManager = _GameModeManager.instance;\r\nfunction loadFileAsBlob(url) {\r\n  return new Promise((resolve, reject) => {\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.open(\"GET\", url, true);\r\n    xhr.responseType = \"blob\";\r\n    xhr.onload = function(e) {\r\n      if (this.status === 200) {\r\n        resolve(this.response);\r\n      } else {\r\n        reject(this.response);\r\n      }\r\n    };\r\n    xhr.send();\r\n  });\r\n}\r\nBlob.prototype.arrayBuffer = function() {\r\n  return new Promise((resolve, reject) => {\r\n    const fileReader = new FileReader();\r\n    fileReader.onload = function(event) {\r\n      var _a;\r\n      const arrayBuffer = (_a = event.target) == null ? void 0 : _a.result;\r\n      if (typeof arrayBuffer === \"string\" || arrayBuffer === null || arrayBuffer === void 0) {\r\n        reject(\"ArrayBuffer is null\");\r\n        return;\r\n      }\r\n      resolve(arrayBuffer);\r\n    };\r\n    fileReader.readAsArrayBuffer(this);\r\n    fileReader.result;\r\n  });\r\n};\r\nconst uint8 = new Uint8Array(4);\r\nconst uint32 = new Uint32Array(uint8.buffer);\r\nfunction extractChunks(data) {\r\n  if (data[0] !== 137) throw new Error(\"Invalid .png file header\");\r\n  if (data[1] !== 80) throw new Error(\"Invalid .png file header\");\r\n  if (data[2] !== 78) throw new Error(\"Invalid .png file header\");\r\n  if (data[3] !== 71) throw new Error(\"Invalid .png file header\");\r\n  if (data[4] !== 13)\r\n    throw new Error(\"Invalid .png file header: possibly caused by DOS-Unix line ending conversion?\");\r\n  if (data[5] !== 10)\r\n    throw new Error(\"Invalid .png file header: possibly caused by DOS-Unix line ending conversion?\");\r\n  if (data[6] !== 26) throw new Error(\"Invalid .png file header\");\r\n  if (data[7] !== 10)\r\n    throw new Error(\"Invalid .png file header: possibly caused by DOS-Unix line ending conversion?\");\r\n  let ended = false;\r\n  const chunks = [];\r\n  let idx = 8;\r\n  while (idx < data.length) {\r\n    uint8[3] = data[idx++];\r\n    uint8[2] = data[idx++];\r\n    uint8[1] = data[idx++];\r\n    uint8[0] = data[idx++];\r\n    const length = uint32[0] + 4;\r\n    const chunk2 = new Uint8Array(length);\r\n    chunk2[0] = data[idx++];\r\n    chunk2[1] = data[idx++];\r\n    chunk2[2] = data[idx++];\r\n    chunk2[3] = data[idx++];\r\n    const name = String.fromCharCode(chunk2[0]) + String.fromCharCode(chunk2[1]) + String.fromCharCode(chunk2[2]) + String.fromCharCode(chunk2[3]);\r\n    if (!chunks.length && name !== \"IHDR\") {\r\n      throw new Error(\"IHDR header missing\");\r\n    }\r\n    if (name === \"IEND\") {\r\n      ended = true;\r\n      chunks.push({\r\n        name,\r\n        data: new Uint8Array(0)\r\n      });\r\n      break;\r\n    }\r\n    for (let i = 4; i < length; i++) {\r\n      chunk2[i] = data[idx++];\r\n    }\r\n    uint8[3] = data[idx++];\r\n    uint8[2] = data[idx++];\r\n    uint8[1] = data[idx++];\r\n    uint8[0] = data[idx++];\r\n    const chunkData = new Uint8Array(chunk2.buffer.slice(4));\r\n    chunks.push({\r\n      name,\r\n      data: chunkData\r\n    });\r\n  }\r\n  if (!ended) {\r\n    throw new Error(\".png file ended prematurely: no IEND header was found\");\r\n  }\r\n  return chunks;\r\n}\r\nfunction textDecode(data) {\r\n  let naming = true;\r\n  let text = \"\";\r\n  let name = \"\";\r\n  for (const code of data) {\r\n    if (naming) {\r\n      if (code) {\r\n        name += String.fromCharCode(code);\r\n      } else {\r\n        naming = false;\r\n      }\r\n    } else {\r\n      if (code) {\r\n        text += String.fromCharCode(code);\r\n      } else {\r\n        throw new Error(\"Invalid NULL character found. 0x00 character is not permitted in tEXt content\");\r\n      }\r\n    }\r\n  }\r\n  return {\r\n    keyword: name,\r\n    text\r\n  };\r\n}\r\nfunction readUint32(uint8array, offset) {\r\n  const byte1 = uint8array[offset++];\r\n  const byte2 = uint8array[offset++];\r\n  const byte3 = uint8array[offset++];\r\n  const byte4 = uint8array[offset];\r\n  return 0 | byte1 << 24 | byte2 << 16 | byte3 << 8 | byte4;\r\n}\r\nfunction readMetadata(buffer) {\r\n  const result = {\r\n    tEXt: {\r\n      keyword: \"\"\r\n    },\r\n    pHYs: { x: 0, y: 0 }\r\n  };\r\n  const chunks = extractChunks(new Uint8Array(buffer));\r\n  chunks.forEach((chunk2) => {\r\n    if (chunk2.name === \"tExt\") {\r\n      const textChunk = textDecode(chunk2.data);\r\n      result.tEXt[textChunk.keyword] = textChunk.text;\r\n    } else if (chunk2.name === \"pHYs\") {\r\n      result.pHYs = {\r\n        x: readUint32(chunk2.data, 0),\r\n        y: readUint32(chunk2.data, 4)\r\n      };\r\n    } else {\r\n      result[chunk2.name] = true;\r\n    }\r\n  });\r\n  return result;\r\n}\r\nfunction isNotificationPermanent(notif) {\r\n  return notif.type === \"permanent\";\r\n}\r\nfunction isNotifPermanent(notif) {\r\n  return isNotificationPermanent(notif);\r\n}\r\nconst DEFAULT_DISPLAY_TIME = 3e3;\r\nfunction createTemporaryNotification(description, displayTimeMs, style, descriptionArguments, icon) {\r\n  const notifStyle = style != null ? style : \"info\";\r\n  return {\r\n    uuid: UUID.GenerateUuid(),\r\n    type: \"temporary\",\r\n    createdAt: /* @__PURE__ */ new Date(),\r\n    hide: Subject.create(false),\r\n    delayMs: Utils.Clamp(displayTimeMs != null ? displayTimeMs : DEFAULT_DISPLAY_TIME, 0, 6e4),\r\n    description,\r\n    style: notifStyle,\r\n    descriptionArguments,\r\n    icon: icon != null ? icon : getNotifIconFromStyle(notifStyle)\r\n  };\r\n}\r\nfunction createTemporaryNotif(displayTimeMs, description, style, descriptionArguments, icon) {\r\n  return createTemporaryNotification(description, displayTimeMs, style, descriptionArguments, icon);\r\n}\r\nfunction createPermanentNotification(title, description, displayTimeMs, style, descriptionArguments, icon, color, action) {\r\n  const notifStyle = style != null ? style : \"info\";\r\n  return {\r\n    uuid: UUID.GenerateUuid(),\r\n    type: \"permanent\",\r\n    createdAt: /* @__PURE__ */ new Date(),\r\n    hide: Subject.create(false),\r\n    delayMs: Utils.Clamp(displayTimeMs != null ? displayTimeMs : DEFAULT_DISPLAY_TIME, 0, 6e4),\r\n    description,\r\n    style: notifStyle,\r\n    descriptionArguments,\r\n    icon: icon != null ? icon : getNotifIconFromStyle(notifStyle),\r\n    title,\r\n    color,\r\n    action,\r\n    viewed: Subject.create(false)\r\n  };\r\n}\r\nfunction createPermanentNotif(displayTimeMs, title, description, style, descriptionArguments, icon, color, action) {\r\n  return createPermanentNotification(\r\n    title,\r\n    description,\r\n    displayTimeMs,\r\n    style,\r\n    descriptionArguments,\r\n    icon,\r\n    color,\r\n    action\r\n  );\r\n}\r\nfunction getNotifIconFromStyle(style) {\r\n  switch (style) {\r\n    case \"warning\":\r\n      return \"coui://html_ui/efb_ui/efb_os/Assets/icons/NoMargin/Warning.svg\";\r\n    case \"success\":\r\n      return \"coui://html_ui/efb_ui/efb_os/Assets/icons/NoMargin/Check_Full.svg\";\r\n    case \"error\":\r\n      return \"coui://html_ui/efb_ui/efb_os/Assets/icons/NoMargin/Failure_Full.svg\";\r\n    default:\r\n      return \"coui://html_ui/efb_ui/efb_os/Assets/icons/NoMargin/Info_Full.svg\";\r\n  }\r\n}\r\nfunction isPromise(value2) {\r\n  return value2 instanceof Promise;\r\n}\r\nfunction toPromise(value2) {\r\n  return isPromise(value2) ? value2 : Promise.resolve(value2);\r\n}\r\nfunction checkUserSetting(setting, type) {\r\n  if (!Object.values(type).includes(setting.get())) {\r\n    setting.resetToDefault();\r\n  }\r\n}\r\nconst basicFormatter = NumberFormatter.create({\r\n  maxDigits: 0,\r\n  forceDecimalZeroes: false,\r\n  nanString: \"-\"\r\n});\r\nvar StopwatchState = /* @__PURE__ */ ((StopwatchState2) => {\r\n  StopwatchState2[StopwatchState2[\"READY\"] = 0] = \"READY\";\r\n  StopwatchState2[StopwatchState2[\"RUNNING\"] = 1] = \"RUNNING\";\r\n  StopwatchState2[StopwatchState2[\"PAUSED\"] = 2] = \"PAUSED\";\r\n  return StopwatchState2;\r\n})(StopwatchState || {});\r\nclass Stopwatch {\r\n  constructor() {\r\n    this._timerSeconds = Subject.create(0);\r\n    this.timerSeconds = this._timerSeconds;\r\n    this._state = Subject.create(\r\n      0\r\n      /* READY */\r\n    );\r\n    this.state = this._state;\r\n    this.initialTime = 0;\r\n  }\r\n  start() {\r\n    const offset = this._state.get() === 2 ? this._timerSeconds.get() : 0;\r\n    this.initialTime = SimVar.GetSimVarValue(\"E:SIMULATION TIME\", \"seconds\") - offset;\r\n    this.intervalObj = setInterval(this.callback.bind(this), 500);\r\n    this._state.set(\r\n      1\r\n      /* RUNNING */\r\n    );\r\n  }\r\n  pause() {\r\n    clearInterval(this.intervalObj);\r\n    this._state.set(\r\n      2\r\n      /* PAUSED */\r\n    );\r\n  }\r\n  reset() {\r\n    clearInterval(this.intervalObj);\r\n    this.initialTime = 0;\r\n    this._timerSeconds.set(0);\r\n    this._state.set(\r\n      0\r\n      /* READY */\r\n    );\r\n  }\r\n  callback() {\r\n    this._timerSeconds.set(SimVar.GetSimVarValue(\"E:SIMULATION TIME\", \"seconds\") - this.initialTime);\r\n  }\r\n}\r\nconst _UnitFormatter = class _UnitFormatter {\r\n  /**\r\n   * Creates a function which formats measurement units to strings representing their abbreviated names.\r\n   * @param defaultString The string to output when the input unit cannot be formatted. Defaults to the empty string.\r\n   * @param charCase The case to enforce on the output string. Defaults to `'normal'`.\r\n   * @returns A function which formats measurement units to strings representing their abbreviated names.\r\n   */\r\n  static create(defaultString = \"\", charCase = \"normal\") {\r\n    var _a, _b;\r\n    switch (charCase) {\r\n      case \"upper\":\r\n        (_a = _UnitFormatter.UNIT_TEXT_UPPER) != null ? _a : _UnitFormatter.UNIT_TEXT_UPPER = _UnitFormatter.createUpperCase();\r\n        return (unit) => {\r\n          var _a2, _b2;\r\n          return (\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n            (_b2 = (_a2 = _UnitFormatter.UNIT_TEXT_UPPER[unit.family]) == null ? void 0 : _a2[unit.name]) != null ? _b2 : defaultString\r\n          );\r\n        };\r\n      case \"lower\":\r\n        (_b = _UnitFormatter.UNIT_TEXT_LOWER) != null ? _b : _UnitFormatter.UNIT_TEXT_LOWER = _UnitFormatter.createLowerCase();\r\n        return (unit) => {\r\n          var _a2, _b2;\r\n          return (\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n            (_b2 = (_a2 = _UnitFormatter.UNIT_TEXT_LOWER[unit.family]) == null ? void 0 : _a2[unit.name]) != null ? _b2 : defaultString\r\n          );\r\n        };\r\n      default:\r\n        return (unit) => {\r\n          var _a2, _b2;\r\n          return (_b2 = (_a2 = _UnitFormatter.UNIT_TEXT[unit.family]) == null ? void 0 : _a2[unit.name]) != null ? _b2 : defaultString;\r\n        };\r\n    }\r\n  }\r\n  /**\r\n   * Creates a record of lowercase unit abbreviated names.\r\n   * @returns A record of lowercase unit abbreviated names.\r\n   */\r\n  static createLowerCase() {\r\n    const lower = {};\r\n    for (const family in _UnitFormatter.UNIT_TEXT) {\r\n      const familyText = _UnitFormatter.UNIT_TEXT[family];\r\n      lower[family] = {};\r\n      for (const unit in familyText) {\r\n        lower[family][unit] = familyText[unit].toLowerCase();\r\n      }\r\n    }\r\n    return lower;\r\n  }\r\n  /**\r\n   * Creates a record of uppercase unit abbreviated names.\r\n   * @returns A record of uppercase unit abbreviated names.\r\n   */\r\n  static createUpperCase() {\r\n    const upper = {};\r\n    for (const family in _UnitFormatter.UNIT_TEXT) {\r\n      const familyText = _UnitFormatter.UNIT_TEXT[family];\r\n      upper[family] = {};\r\n      for (const unit in familyText) {\r\n        upper[family][unit] = familyText[unit].toUpperCase();\r\n      }\r\n    }\r\n    return upper;\r\n  }\r\n  /**\r\n   * Gets a mapping of unit family and name to text used by UnitFormatter to format units. The returned object maps\r\n   * unit families to objects that map unit names within each family to formatted text.\r\n   * @returns A mapping of unit family and name to text used by UnitFormatter to format units.\r\n   */\r\n  static getUnitTextMap() {\r\n    return _UnitFormatter.UNIT_TEXT;\r\n  }\r\n};\r\n_UnitFormatter.UNIT_TEXT = {\r\n  [UnitFamily.Distance]: {\r\n    [UnitType.METER.name]: \"M\",\r\n    [UnitType.FOOT.name]: \"FT\",\r\n    [UnitType.KILOMETER.name]: \"KM\",\r\n    [UnitType.NMILE.name]: \"NM\",\r\n    [UnitType.MILE.name]: \"SM\"\r\n  },\r\n  [UnitFamily.Angle]: {\r\n    [UnitType.DEGREE.name]: \"\u00B0\",\r\n    [UnitType.RADIAN.name]: \"rad\"\r\n  },\r\n  [UnitFamily.Duration]: {\r\n    [UnitType.SECOND.name]: \"SEC\",\r\n    [UnitType.MINUTE.name]: \"MIN\",\r\n    [UnitType.HOUR.name]: \"HR\"\r\n  },\r\n  [UnitFamily.Weight]: {\r\n    [UnitType.KILOGRAM.name]: \"KG\",\r\n    [UnitType.POUND.name]: \"LBS\",\r\n    [UnitType.LITER_FUEL.name]: \"LT\",\r\n    [UnitType.GALLON_FUEL.name]: \"GAL\",\r\n    [UnitType.IMP_GALLON_FUEL.name]: \"IG\"\r\n  },\r\n  [UnitFamily.Volume]: {\r\n    [UnitType.LITER.name]: \"L\",\r\n    [UnitType.GALLON.name]: \"GAL\"\r\n  },\r\n  [UnitFamily.Pressure]: {\r\n    [UnitType.HPA.name]: \"HPA\",\r\n    [UnitType.IN_HG.name]: \"IN\"\r\n  },\r\n  [UnitFamily.Temperature]: {\r\n    [UnitType.CELSIUS.name]: \"\u00B0C\",\r\n    [UnitType.FAHRENHEIT.name]: \"\u00B0F\"\r\n  },\r\n  [UnitFamily.TemperatureDelta]: {\r\n    [UnitType.DELTA_CELSIUS.name]: \"\u00B0C\",\r\n    [UnitType.DELTA_FAHRENHEIT.name]: \"\u00B0F\"\r\n  },\r\n  [UnitFamily.Speed]: {\r\n    [UnitType.KNOT.name]: \"KT\",\r\n    [UnitType.KPH.name]: \"KM/H\",\r\n    [UnitType.MPM.name]: \"MPM\",\r\n    [UnitType.FPM.name]: \"FPM\"\r\n  },\r\n  [UnitFamily.WeightFlux]: {\r\n    [UnitType.KGH.name]: \"KG/HR\",\r\n    [UnitType.PPH.name]: \"LB/HR\",\r\n    [UnitType.LPH_FUEL.name]: \"LT/HR\",\r\n    [UnitType.GPH_FUEL.name]: \"GAL/HR\",\r\n    [UnitType.IGPH_FUEL.name]: \"IG/HR\"\r\n  }\r\n};\r\nlet UnitFormatter = _UnitFormatter;\r\nfunction value(arg) {\r\n  return typeof arg === \"function\" ? arg() : arg;\r\n}\r\nfunction offsetMousePosition(e, vec, element = null) {\r\n  const mousePosition = elementOffset(e.target, element);\r\n  vec[0] = mousePosition[0] + e.offsetX;\r\n  vec[1] = mousePosition[1] + e.offsetY;\r\n}\r\nfunction elementOffset(from, limit = null) {\r\n  let leftOffset = 0;\r\n  let topOffset = 0;\r\n  let currentElement = from;\r\n  do {\r\n    leftOffset += currentElement.offsetLeft;\r\n    topOffset += currentElement.offsetTop;\r\n    currentElement = currentElement.parentNode;\r\n  } while (currentElement !== null && currentElement !== limit);\r\n  return new Float64Array([leftOffset, topOffset]);\r\n}\r\nconst measure = (_target, propertyKey, descriptor) => {\r\n  const originalMethod = descriptor.value;\r\n  descriptor.value = function(...args) {\r\n    const start = performance.now();\r\n    const result = originalMethod.apply(this, args);\r\n    const finish = performance.now();\r\n    console.log(`Execution time of ${_target.constructor.name}.${propertyKey} took ${finish - start} ms`);\r\n    return result;\r\n  };\r\n  return descriptor;\r\n};\r\nclass AppContainer extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.appMainRef = FSComponent.createRef();\r\n    this.appStackRef = FSComponent.createRef();\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.props.appViewService.onAppContainerRendered(this.appStackRef.instance);\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { ref: this.appMainRef, class: `app-container` }, /* @__PURE__ */ FSComponent.buildComponent(DefaultAppViewStackContainer, { ref: this.appStackRef }));\r\n  }\r\n}\r\nclass DefaultAppViewStackContainer extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.rootRef = FSComponent.createRef();\r\n  }\r\n  renderView(view) {\r\n    FSComponent.render(view, this.rootRef.instance);\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { ref: this.rootRef, class: mergeClassProp(\"app-view-stack\", this.props.class) });\r\n  }\r\n}\r\nfunction Memoize(args) {\r\n  let hashFunction;\r\n  let duration;\r\n  let tags;\r\n  {\r\n    hashFunction = args;\r\n  }\r\n  return (target, propertyKey, descriptor) => {\r\n    if (descriptor.value != null) {\r\n      descriptor.value = getNewFunction(descriptor.value, hashFunction, duration, tags);\r\n    } else if (descriptor.get != null) {\r\n      descriptor.get = getNewFunction(descriptor.get, hashFunction, duration, tags);\r\n    } else {\r\n      throw \"Only put a Memoize() decorator on a method or get accessor.\";\r\n    }\r\n  };\r\n}\r\nconst clearCacheTagsMap = /* @__PURE__ */ new Map();\r\nfunction getNewFunction(originalMethod, hashFunction, duration = 0, tags) {\r\n  const propMapName = Symbol(`__memoized_map__`);\r\n  return function(...args) {\r\n    let returnedValue;\r\n    if (!this.hasOwnProperty(propMapName)) {\r\n      Object.defineProperty(this, propMapName, {\r\n        configurable: false,\r\n        enumerable: false,\r\n        writable: false,\r\n        value: /* @__PURE__ */ new Map()\r\n      });\r\n    }\r\n    let myMap = this[propMapName];\r\n    if (Array.isArray(tags)) {\r\n      for (const tag of tags) {\r\n        if (clearCacheTagsMap.has(tag)) {\r\n          clearCacheTagsMap.get(tag).push(myMap);\r\n        } else {\r\n          clearCacheTagsMap.set(tag, [myMap]);\r\n        }\r\n      }\r\n    }\r\n    if (hashFunction || args.length > 0 || duration > 0) {\r\n      let hashKey;\r\n      if (hashFunction === true) {\r\n        hashKey = args.map((a) => a.toString()).join(\"!\");\r\n      } else if (hashFunction) {\r\n        hashKey = hashFunction.apply(this, args);\r\n      } else {\r\n        hashKey = args[0];\r\n      }\r\n      const timestampKey = `${hashKey}__timestamp`;\r\n      let isExpired = false;\r\n      if (duration > 0) {\r\n        if (!myMap.has(timestampKey)) {\r\n          isExpired = true;\r\n        } else {\r\n          let timestamp = myMap.get(timestampKey);\r\n          isExpired = Date.now() - timestamp > duration;\r\n        }\r\n      }\r\n      if (myMap.has(hashKey) && !isExpired) {\r\n        returnedValue = myMap.get(hashKey);\r\n      } else {\r\n        returnedValue = originalMethod.apply(this, args);\r\n        myMap.set(hashKey, returnedValue);\r\n        if (duration > 0) {\r\n          myMap.set(timestampKey, Date.now());\r\n        }\r\n      }\r\n    } else {\r\n      const hashKey = this;\r\n      if (myMap.has(hashKey)) {\r\n        returnedValue = myMap.get(hashKey);\r\n      } else {\r\n        returnedValue = originalMethod.apply(this, args);\r\n        myMap.set(hashKey, returnedValue);\r\n      }\r\n    }\r\n    return returnedValue;\r\n  };\r\n}\r\nvar GamepadEvents = /* @__PURE__ */ ((GamepadEvents2) => {\r\n  GamepadEvents2[\"JOYSTICK_LEFT_X_AXIS\"] = \"JOYSTICK_LEFT_X_AXIS\";\r\n  GamepadEvents2[\"JOYSTICK_LEFT_Y_AXIS\"] = \"JOYSTICK_LEFT_Y_AXIS\";\r\n  GamepadEvents2[\"JOYSTICK_RIGHT_X_AXIS\"] = \"JOYSTICK_RIGHT_X_AXIS\";\r\n  GamepadEvents2[\"JOYSTICK_RIGHT_Y_AXIS\"] = \"JOYSTICK_RIGH_Y_AXIS\";\r\n  GamepadEvents2[\"BUTTON_A\"] = \"BUTTON_A\";\r\n  GamepadEvents2[\"BUTTON_B\"] = \"BUTTON_B\";\r\n  GamepadEvents2[\"BUTTON_Y\"] = \"BUTTON_Y\";\r\n  GamepadEvents2[\"BUTTON_X\"] = \"BUTTON_X\";\r\n  GamepadEvents2[\"JOYDIR_LEFT\"] = \"JOYDIR_LEFT\";\r\n  GamepadEvents2[\"JOYDIR_RIGHT\"] = \"JOYDIR_RIGHT\";\r\n  GamepadEvents2[\"JOYDIR_UP\"] = \"JOYDIR_UP\";\r\n  GamepadEvents2[\"JOYDIR_DOWN\"] = \"JOYDIR_DOWN\";\r\n  return GamepadEvents2;\r\n})(GamepadEvents || {});\r\nclass GamepadInputManager {\r\n  /**\r\n   * @deprecated\r\n   * @param element The HTML element used for scroll inputs.\r\n   */\r\n  constructor(element) {\r\n    this.element = element;\r\n    this.defaultScrollDirection = \"all\";\r\n    this.defaultScrollSpeed = 1e3;\r\n  }\r\n  /**\r\n   * @deprecated\r\n   * @param inputContext The input context.\r\n   * @param inputAction The input action.\r\n   * @param callback The callback that will be called when the input is triggered.\r\n   * @returns The input watcher ID.\r\n   */\r\n  addCustomEvent(inputContext, inputAction, callback) {\r\n    return \"\";\r\n  }\r\n  /**\r\n   * @deprecated\r\n   * @param eventId The event ID.\r\n   */\r\n  removeCustonEvent(eventId) {\r\n    return;\r\n  }\r\n  /**\r\n   * @deprecated\r\n   * Allows an HTML element to be scrolled through using a gamepad.\r\n   * @param direction The direction where it is allowed to scroll. All directions are allowed by default.\r\n   * @param scrollSpeed The scroll speed in px/s. 1000 by default.\r\n   */\r\n  enableScroll(direction = this.defaultScrollDirection, scrollSpeed = this.defaultScrollSpeed) {\r\n    return;\r\n  }\r\n  /**\r\n   * @deprecated\r\n   * Prevents an HTML element to be scrolled through using a gamepad.\r\n   */\r\n  disableScroll() {\r\n    return;\r\n  }\r\n}\r\nvar InputAction = /* @__PURE__ */ ((InputAction2) => {\r\n  InputAction2[InputAction2[\"SECONDARY\"] = 0] = \"SECONDARY\";\r\n  InputAction2[InputAction2[\"TERTIARY\"] = 1] = \"TERTIARY\";\r\n  InputAction2[InputAction2[\"PREV\"] = 2] = \"PREV\";\r\n  InputAction2[InputAction2[\"NEXT\"] = 3] = \"NEXT\";\r\n  InputAction2[InputAction2[\"PREV_SUB\"] = 4] = \"PREV_SUB\";\r\n  InputAction2[InputAction2[\"NEXT_SUB\"] = 5] = \"NEXT_SUB\";\r\n  InputAction2[InputAction2[\"ZOOM_OUT\"] = 6] = \"ZOOM_OUT\";\r\n  InputAction2[InputAction2[\"ZOOM_IN\"] = 7] = \"ZOOM_IN\";\r\n  InputAction2[InputAction2[\"SCROLL_UP\"] = 8] = \"SCROLL_UP\";\r\n  InputAction2[InputAction2[\"SCROLL_RIGHT\"] = 9] = \"SCROLL_RIGHT\";\r\n  InputAction2[InputAction2[\"SCROLL_DOWN\"] = 10] = \"SCROLL_DOWN\";\r\n  InputAction2[InputAction2[\"SCROLL_LEFT\"] = 11] = \"SCROLL_LEFT\";\r\n  return InputAction2;\r\n})(InputAction || {});\r\nconst InputActions = {\r\n  [\r\n    0\r\n    /* SECONDARY */\r\n  ]: \"KEY_EFB_SECONDARY\",\r\n  [\r\n    1\r\n    /* TERTIARY */\r\n  ]: \"KEY_EFB_TERTIARY\",\r\n  [\r\n    2\r\n    /* PREV */\r\n  ]: \"KEY_EFB_NAV_TABS_PREV\",\r\n  [\r\n    3\r\n    /* NEXT */\r\n  ]: \"KEY_EFB_NAV_TABS_NEXT\",\r\n  [\r\n    4\r\n    /* PREV_SUB */\r\n  ]: \"KEY_EFB_ZOOM_OUT\",\r\n  [\r\n    5\r\n    /* NEXT_SUB */\r\n  ]: \"KEY_EFB_ZOOM_IN\",\r\n  [\r\n    6\r\n    /* ZOOM_OUT */\r\n  ]: \"KEY_EFB_ZOOM_OUT\",\r\n  [\r\n    7\r\n    /* ZOOM_IN */\r\n  ]: \"KEY_EFB_ZOOM_IN\",\r\n  [\r\n    8\r\n    /* SCROLL_UP */\r\n  ]: \"KEY_EFB_SCROLL_UP\",\r\n  [\r\n    9\r\n    /* SCROLL_RIGHT */\r\n  ]: \"KEY_EFB_SCROLL_RIGHT\",\r\n  [\r\n    10\r\n    /* SCROLL_DOWN */\r\n  ]: \"KEY_EFB_SCROLL_DOWN\",\r\n  [\r\n    11\r\n    /* SCROLL_LEFT */\r\n  ]: \"KEY_EFB_SCROLL_LEFT\"\r\n};\r\nvar InternalInputAction = /* @__PURE__ */ ((InternalInputAction2) => {\r\n  InternalInputAction2[InternalInputAction2[\"VALID\"] = 0] = \"VALID\";\r\n  InternalInputAction2[InternalInputAction2[\"BACK\"] = 1] = \"BACK\";\r\n  InternalInputAction2[InternalInputAction2[\"SECONDARY\"] = 2] = \"SECONDARY\";\r\n  InternalInputAction2[InternalInputAction2[\"TERTIARY\"] = 3] = \"TERTIARY\";\r\n  InternalInputAction2[InternalInputAction2[\"PREV_TAB\"] = 4] = \"PREV_TAB\";\r\n  InternalInputAction2[InternalInputAction2[\"NEXT_TAB\"] = 5] = \"NEXT_TAB\";\r\n  InternalInputAction2[InternalInputAction2[\"ZOOM_OUT\"] = 6] = \"ZOOM_OUT\";\r\n  InternalInputAction2[InternalInputAction2[\"ZOOM_IN\"] = 7] = \"ZOOM_IN\";\r\n  InternalInputAction2[InternalInputAction2[\"UP\"] = 8] = \"UP\";\r\n  InternalInputAction2[InternalInputAction2[\"RIGHT\"] = 9] = \"RIGHT\";\r\n  InternalInputAction2[InternalInputAction2[\"DOWN\"] = 10] = \"DOWN\";\r\n  InternalInputAction2[InternalInputAction2[\"LEFT\"] = 11] = \"LEFT\";\r\n  InternalInputAction2[InternalInputAction2[\"PREV_APP\"] = 12] = \"PREV_APP\";\r\n  InternalInputAction2[InternalInputAction2[\"NEXT_APP\"] = 13] = \"NEXT_APP\";\r\n  InternalInputAction2[InternalInputAction2[\"OPEN_NOTIFICATION_MENU\"] = 14] = \"OPEN_NOTIFICATION_MENU\";\r\n  InternalInputAction2[InternalInputAction2[\"SCROLL_UP\"] = 15] = \"SCROLL_UP\";\r\n  InternalInputAction2[InternalInputAction2[\"SCROLL_RIGHT\"] = 16] = \"SCROLL_RIGHT\";\r\n  InternalInputAction2[InternalInputAction2[\"SCROLL_DOWN\"] = 17] = \"SCROLL_DOWN\";\r\n  InternalInputAction2[InternalInputAction2[\"SCROLL_LEFT\"] = 18] = \"SCROLL_LEFT\";\r\n  InternalInputAction2[InternalInputAction2[\"TEXTBOX_VALID\"] = 19] = \"TEXTBOX_VALID\";\r\n  InternalInputAction2[InternalInputAction2[\"TEXTBOX_UP\"] = 20] = \"TEXTBOX_UP\";\r\n  InternalInputAction2[InternalInputAction2[\"TEXTBOX_RIGHT\"] = 21] = \"TEXTBOX_RIGHT\";\r\n  InternalInputAction2[InternalInputAction2[\"TEXTBOX_DOWN\"] = 22] = \"TEXTBOX_DOWN\";\r\n  InternalInputAction2[InternalInputAction2[\"TEXTBOX_LEFT\"] = 23] = \"TEXTBOX_LEFT\";\r\n  return InternalInputAction2;\r\n})(InternalInputAction || {});\r\nconst InternalInputActions = {\r\n  [\r\n    0\r\n    /* VALID */\r\n  ]: \"KEY_EFB_VALID\",\r\n  [\r\n    1\r\n    /* BACK */\r\n  ]: \"KEY_EFB_BACK\",\r\n  [\r\n    2\r\n    /* SECONDARY */\r\n  ]: \"KEY_EFB_SECONDARY\",\r\n  [\r\n    3\r\n    /* TERTIARY */\r\n  ]: \"KEY_EFB_TERTIARY\",\r\n  [\r\n    4\r\n    /* PREV_TAB */\r\n  ]: \"KEY_EFB_NAV_TABS_PREV\",\r\n  [\r\n    5\r\n    /* NEXT_TAB */\r\n  ]: \"KEY_EFB_NAV_TABS_NEXT\",\r\n  [\r\n    6\r\n    /* ZOOM_OUT */\r\n  ]: \"KEY_EFB_ZOOM_OUT\",\r\n  [\r\n    7\r\n    /* ZOOM_IN */\r\n  ]: \"KEY_EFB_ZOOM_IN\",\r\n  [\r\n    8\r\n    /* UP */\r\n  ]: \"KEY_EFB_UP\",\r\n  [\r\n    9\r\n    /* RIGHT */\r\n  ]: \"KEY_EFB_NAV_APP_NEXT\",\r\n  [\r\n    10\r\n    /* DOWN */\r\n  ]: \"KEY_EFB_DOWN\",\r\n  [\r\n    11\r\n    /* LEFT */\r\n  ]: \"KEY_EFB_NAV_APP_PREV\",\r\n  [\r\n    12\r\n    /* PREV_APP */\r\n  ]: \"KEY_EFB_NAV_APP_PREV\",\r\n  [\r\n    13\r\n    /* NEXT_APP */\r\n  ]: \"KEY_EFB_NAV_APP_NEXT\",\r\n  [\r\n    14\r\n    /* OPEN_NOTIFICATION_MENU */\r\n  ]: \"KEY_EFB_NOTIFICATIONS_MENU\",\r\n  [\r\n    15\r\n    /* SCROLL_UP */\r\n  ]: \"KEY_EFB_SCROLL_UP\",\r\n  [\r\n    16\r\n    /* SCROLL_RIGHT */\r\n  ]: \"KEY_EFB_SCROLL_RIGHT\",\r\n  [\r\n    17\r\n    /* SCROLL_DOWN */\r\n  ]: \"KEY_EFB_SCROLL_DOWN\",\r\n  [\r\n    18\r\n    /* SCROLL_LEFT */\r\n  ]: \"KEY_EFB_SCROLL_LEFT\",\r\n  [\r\n    19\r\n    /* TEXTBOX_VALID */\r\n  ]: \"KEY_EFB_VALID_TEXT\",\r\n  [\r\n    20\r\n    /* TEXTBOX_UP */\r\n  ]: \"KEY_EFB_TEXTBOX_UP\",\r\n  [\r\n    21\r\n    /* TEXTBOX_RIGHT */\r\n  ]: \"KEY_EFB_TEXTBOX_RIGHT\",\r\n  [\r\n    22\r\n    /* TEXTBOX_DOWN */\r\n  ]: \"KEY_EFB_TEXTBOX_DOWN\",\r\n  [\r\n    23\r\n    /* TEXTBOX_LEFT */\r\n  ]: \"KEY_EFB_TEXTBOX_LEFT\"\r\n};\r\nconst _InputsListener = class _InputsListener extends ViewListener.ViewListener {\r\n  /**\r\n   * @deprecated\r\n   * @param context The input context.\r\n   * @param action The input action.\r\n   * @param callback The callback that will be called when the input is triggered.\r\n   * @returns The input watcher ID.\r\n   */\r\n  static addInputChangeCallback(context, action, callback) {\r\n    const idWatcher = \"InputWatcher_\" + context + \"_\" + action + \"_\" + UUID.GenerateUuid();\r\n    _InputsListener.inputsListener.trigger(\"ADD_INPUT_WATCHER\", idWatcher, context, action);\r\n    _InputsListener.inputsListener.on(\"InputListener.InputChange\", (id, down) => {\r\n      if (id === idWatcher) {\r\n        callback(down);\r\n      }\r\n    });\r\n    return idWatcher;\r\n  }\r\n  /**\r\n   * @deprecated\r\n   * @param id The event ID.\r\n   */\r\n  static removeInputChangeCallback(id) {\r\n    _InputsListener.inputsListener.trigger(\"REMOVE_INPUT_WATCHER\", id);\r\n  }\r\n};\r\n_InputsListener.isLoaded = Subject.create(false);\r\n_InputsListener.inputsListener = RegisterViewListener(\r\n  \"JS_LISTENER_INPUTS\",\r\n  () => _InputsListener.isLoaded.set(true)\r\n);\r\nlet InputsListener = _InputsListener;\r\nclass InputStackListener {\r\n  constructor() {\r\n    this._isReady = Subject.create(false);\r\n    this.isReady = this._isReady;\r\n    this.inputActionMap = /* @__PURE__ */ new Map();\r\n    this.inputStackListener = RegisterViewListener(\r\n      \"JS_LISTENER_INPUT_STACK\",\r\n      () => this._isReady.set(true)\r\n    );\r\n    this.onInputTriggeredCallback = this._onInputTriggeredCallback.bind(this);\r\n    this.inputStackListener.on(\"ON_INPUT_TRIGGERED\", this.onInputTriggeredCallback);\r\n  }\r\n  _onInputTriggeredCallback(task, value2, _activeId, uuid) {\r\n    var _a;\r\n    (_a = this.inputActionMap.get(uuid)) == null ? void 0 : _a(task, value2);\r\n  }\r\n  /**\r\n   * Add an action that will be executed when the given input is triggered.\r\n   * @param input The input that, when triggered, will execute the action.\r\n   * @param callback The action callback that will be called when the input is triggered.\r\n   * @param inputType The trigger type of the input between 'pressed', 'released' and 'axis'. Default to 'released'.\r\n   * @param context The context which the input will be applied to. Default to 'DEFAULT'.\r\n   * @returns A callback that has to be called when the input action is not needed anymore.\r\n   */\r\n  addInputAction(input, callback, inputType = \"released\", context = \"DEFAULT\") {\r\n    const uuid = UUID.GenerateUuid().toUpperCase();\r\n    const formattedUuid = `{${uuid}}`;\r\n    this.inputActionMap.set(uuid, (task, value2) => {\r\n      const isConsumed = callback(value2);\r\n      this.inputStackListener.call(`RESOLVE_${task}`, isConsumed);\r\n    });\r\n    this.inputStackListener.trigger(\"ADD_INPUT_ACTION\", input, formattedUuid, \"\", inputType, context);\r\n    return () => {\r\n      this.inputStackListener.trigger(\"REMOVE_INPUT_ACTION\", input, formattedUuid);\r\n      this.inputActionMap.delete(uuid);\r\n    };\r\n  }\r\n}\r\nclass InternalInputManager {\r\n  constructor(inputActionRecord) {\r\n    this.inputActionRecord = inputActionRecord;\r\n    this.defaultInputType = \"released\";\r\n    this.defaultScrollAxis = \"all\";\r\n    this.defaultScrollSpeedFactor = 10;\r\n    this.inputStackListener = new InputStackListener();\r\n  }\r\n  //#region Add input action\r\n  /**\r\n   * Add an action that will be executed when the given input is triggered.\r\n   * @param inputAction The input that, when triggered, will execute the action.\r\n   * @param callback The action callback that will be called when the input is triggered.\r\n   * @param options The optional input action options.\r\n   * @returns A callback that has to be called when the input action is not needed anymore.\r\n   */\r\n  addInputAction(inputAction, callback, options) {\r\n    var _a;\r\n    return this.inputStackListener.addInputAction(\r\n      this.inputActionRecord[inputAction],\r\n      callback,\r\n      (_a = options == null ? void 0 : options.inputType) != null ? _a : this.defaultInputType\r\n    );\r\n  }\r\n  //#endregion\r\n  //#region On hover\r\n  /**\r\n   * Add an action that will be executed when the given input is triggered on hover of the given HTML element.\r\n   * @param element The HTML element that will allow the action to be executed when hovered on.\r\n   * @param inputAction The input that, when triggered, will execute the action.\r\n   * @param callback The action callback that will be called when the input is triggered.\r\n   * @param options The optional input action options.\r\n   * @returns A callback that has to be called when the input action is not needed anymore.\r\n   */\r\n  addInputActionOnHover(element, inputAction, callback, options) {\r\n    let inputActionDestructor = null;\r\n    const mouseEnterCallback = () => {\r\n      var _a;\r\n      if (inputActionDestructor) {\r\n        inputActionDestructor();\r\n      }\r\n      inputActionDestructor = this.inputStackListener.addInputAction(\r\n        this.inputActionRecord[inputAction],\r\n        callback,\r\n        (_a = options == null ? void 0 : options.inputType) != null ? _a : this.defaultInputType\r\n      );\r\n    };\r\n    const mouseLeaveCallback = () => {\r\n      inputActionDestructor == null ? void 0 : inputActionDestructor();\r\n    };\r\n    element.addEventListener(\"mouseenter\", mouseEnterCallback);\r\n    element.addEventListener(\"mouseleave\", mouseLeaveCallback);\r\n    return () => {\r\n      element.removeEventListener(\"mouseenter\", mouseEnterCallback);\r\n      element.removeEventListener(\"mouseleave\", mouseLeaveCallback);\r\n      inputActionDestructor == null ? void 0 : inputActionDestructor();\r\n    };\r\n  }\r\n  //#endregion\r\n}\r\nclass InputManager extends InternalInputManager {\r\n  constructor() {\r\n    super(InputActions);\r\n  }\r\n  //#region Scroll\r\n  /**\r\n   * Add scroll input actions using the gamepad joystick for a given HTML element.\r\n   * @param element The scrollable HTML element.\r\n   * @param options The optional scroll input action options.\r\n   * @returns A callback that has to be called when the scroll input action is not needed anymore.\r\n   */\r\n  addScrollInputAction(element, options) {\r\n    var _a;\r\n    const scrollSpeed = options == null ? void 0 : options.scrollSpeed;\r\n    let predicate;\r\n    if (scrollSpeed === void 0) {\r\n      predicate = (axis) => this.computeScrollSpeedFactor(axis, this.defaultScrollSpeedFactor);\r\n    } else if (typeof scrollSpeed === \"number\") {\r\n      predicate = (axis) => this.computeScrollSpeedFactor(axis, scrollSpeed);\r\n    } else {\r\n      predicate = scrollSpeed;\r\n    }\r\n    switch ((_a = options == null ? void 0 : options.scrollAxis) != null ? _a : this.defaultScrollAxis) {\r\n      case \"vertical\":\r\n      case \"y\":\r\n        return this.setupVerticalScroll(element, predicate);\r\n      case \"horizontal\":\r\n      case \"x\":\r\n        return this.setupHorizontalScroll(element, predicate);\r\n      default: {\r\n        const verticalScrollDestructor = this.setupVerticalScroll(element, predicate);\r\n        const horizontalScrollDestructor = this.setupHorizontalScroll(element, predicate);\r\n        return () => {\r\n          verticalScrollDestructor();\r\n          horizontalScrollDestructor();\r\n        };\r\n      }\r\n    }\r\n  }\r\n  setupVerticalScroll(element, predicate) {\r\n    const scrollUpInputActionDestructor = this.addInputActionOnHover(\r\n      element,\r\n      InputAction.SCROLL_UP,\r\n      (axisValue) => {\r\n        if (axisValue < 0) {\r\n          return false;\r\n        }\r\n        element.scroll({\r\n          top: element.scrollTop - predicate(axisValue)\r\n        });\r\n        return true;\r\n      },\r\n      { inputType: \"axis\" }\r\n    );\r\n    const scrollDownInputActionDestructor = this.addInputActionOnHover(\r\n      element,\r\n      InputAction.SCROLL_DOWN,\r\n      (axisValue) => {\r\n        if (axisValue < 0) {\r\n          return false;\r\n        }\r\n        element.scroll({\r\n          top: element.scrollTop + predicate(axisValue)\r\n        });\r\n        return true;\r\n      },\r\n      { inputType: \"axis\" }\r\n    );\r\n    return () => {\r\n      scrollUpInputActionDestructor();\r\n      scrollDownInputActionDestructor();\r\n    };\r\n  }\r\n  setupHorizontalScroll(element, predicate) {\r\n    const scrollLeftInputActionDestructor = this.addInputActionOnHover(\r\n      element,\r\n      InputAction.SCROLL_LEFT,\r\n      (axisValue) => {\r\n        if (axisValue < 0) {\r\n          return false;\r\n        }\r\n        element.scroll({\r\n          left: element.scrollLeft - predicate(axisValue)\r\n        });\r\n        return true;\r\n      },\r\n      { inputType: \"axis\" }\r\n    );\r\n    const scrollRightInputActionDestructor = this.addInputActionOnHover(\r\n      element,\r\n      InputAction.SCROLL_RIGHT,\r\n      (axisValue) => {\r\n        if (axisValue < 0) {\r\n          return false;\r\n        }\r\n        element.scroll({\r\n          left: element.scrollLeft + predicate(axisValue)\r\n        });\r\n        return true;\r\n      },\r\n      { inputType: \"axis\" }\r\n    );\r\n    return () => {\r\n      scrollLeftInputActionDestructor();\r\n      scrollRightInputActionDestructor();\r\n    };\r\n  }\r\n  computeScrollSpeedFactor(axisValue, factor) {\r\n    return axisValue * axisValue * factor;\r\n  }\r\n  //#endregion\r\n}\r\nconst _GamepadUiComponent = class _GamepadUiComponent extends DisplayComponent {\r\n  constructor() {\r\n    var _a, _b;\r\n    super(...arguments);\r\n    this.classSubscriptions = [];\r\n    this.gamepadUiComponentRef = FSComponent.createRef();\r\n    this.inputManager = new InputManager();\r\n    this.areGamepadInputsEnabled = Subject.create(false);\r\n    this._nextHandler = Subject.create(void 0);\r\n    this.nextHandler = this._nextHandler;\r\n    this.disabled = SubscribableUtils.toSubscribable((_a = this.props.disabled) != null ? _a : false, true);\r\n    this.visible = SubscribableUtils.toSubscribable((_b = this.props.visible) != null ? _b : true, true);\r\n    this.componentClickListener = this.handleComponentClick.bind(this);\r\n  }\r\n  setNextGamepadEventHandler(ref) {\r\n    this._nextHandler.set(ref);\r\n  }\r\n  deletePreviousGamepadEventHandler() {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n  handleGamepadEvent(gamepadEvent) {\r\n    console.log(`Received ${gamepadEvent} in handleMoveEvent`);\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    const gamepadUiComponentInstance = this.gamepadUiComponentRef.getOrDefault();\r\n    if (gamepadUiComponentInstance === null) {\r\n      return;\r\n    }\r\n    const classes = mergeClassProp(this.props.class);\r\n    Object.keys(classes).forEach((className) => {\r\n      const subscribable = SubscribableUtils.toSubscribable(classes[className], true);\r\n      this.classSubscriptions.push(\r\n        subscribable.sub((value2) => {\r\n          gamepadUiComponentInstance.classList.toggle(className, value2);\r\n        }, true)\r\n      );\r\n    });\r\n    this.isVisibleSubscription = this.visible.sub((isVisible) => {\r\n      gamepadUiComponentInstance.hidden = !isVisible;\r\n    }, true);\r\n    if (SubscribableUtils.isSubscribable(this.props.disabled)) {\r\n      this.isDisabledSubscription = this.props.disabled.sub((disabled) => {\r\n        disabled ? this.disable() : this.enable();\r\n      }, true);\r\n    } else {\r\n      this.props.disabled ? this.disable() : this.enable();\r\n    }\r\n    window.addEventListener(\"click\", this.componentClickListener);\r\n    if (this.props.onboardingStepId !== void 0) {\r\n      gamepadUiComponentInstance.setAttribute(\"id\", this.props.onboardingStepId);\r\n    }\r\n  }\r\n  handleComponentClick(e) {\r\n    if (!this.gamepadUiComponentRef.instance.contains(e.target)) {\r\n      this.onClickOutOfComponent(e);\r\n    }\r\n  }\r\n  onButtonAPressed() {\r\n    if (this.props.onButtonAPressed !== void 0) {\r\n      this.props.onButtonAPressed();\r\n    }\r\n  }\r\n  onButtonBPressed() {\r\n    if (this.props.onButtonBPressed !== void 0) {\r\n      this.props.onButtonBPressed();\r\n    }\r\n  }\r\n  onClickOutOfComponent(_e) {\r\n    return;\r\n  }\r\n  enableGamepadInputs() {\r\n    if (this.areGamepadInputsEnabled.get()) {\r\n      console.warn(\"Trying to enable gamepad inputs that are already enabled. Operation cancelled.\");\r\n      return;\r\n    }\r\n    this.areGamepadInputsEnabled.set(true);\r\n  }\r\n  disableGamepadInputs() {\r\n    this.areGamepadInputsEnabled.set(false);\r\n  }\r\n  enable() {\r\n    this.gamepadUiComponentRef.instance.removeAttribute(\"disabled\");\r\n  }\r\n  disable() {\r\n    this.gamepadUiComponentRef.instance.setAttribute(\"disabled\", \"\");\r\n  }\r\n  show() {\r\n    this.gamepadUiComponentRef.instance.style.visibility = \"visible\";\r\n  }\r\n  hide() {\r\n    this.gamepadUiComponentRef.instance.style.visibility = \"hidden\";\r\n  }\r\n  toggleFocus(value2) {\r\n    if (value2 !== void 0) {\r\n      if (value2 === true) {\r\n        this.gamepadUiComponentRef.instance.classList.add(_GamepadUiComponent.FOCUS_CLASS);\r\n      } else {\r\n        this.gamepadUiComponentRef.instance.classList.remove(_GamepadUiComponent.FOCUS_CLASS);\r\n      }\r\n      return;\r\n    }\r\n    this.gamepadUiComponentRef.instance.classList.toggle(_GamepadUiComponent.FOCUS_CLASS);\r\n  }\r\n  getComponentRect() {\r\n    return this.gamepadUiComponentRef.instance.getBoundingClientRect();\r\n  }\r\n  destroy() {\r\n    var _a, _b;\r\n    this.classSubscriptions.forEach((subscription) => subscription.destroy());\r\n    (_a = this.isVisibleSubscription) == null ? void 0 : _a.destroy();\r\n    (_b = this.isDisabledSubscription) == null ? void 0 : _b.destroy();\r\n    window.removeEventListener(\"click\", this.componentClickListener);\r\n    super.destroy();\r\n  }\r\n};\r\n_GamepadUiComponent.FOCUS_CLASS = \"focus\";\r\nlet GamepadUiComponent = _GamepadUiComponent;\r\nclass GamepadUiParser {\r\n  constructor() {\r\n    this.gamepadUiViewVNode = null;\r\n  }\r\n  /** On veut focus le premier \u00E9l\u00E9ment */\r\n  bindVNodeReference(gamepadUiViewVNode) {\r\n    this.gamepadUiViewVNode = gamepadUiViewVNode;\r\n    this.focusFirstElement();\r\n  }\r\n  focusFirstElement() {\r\n    if (this.currentElement = this.findFirstElement()) {\r\n      this.currentElement.instance.toggleFocus(true);\r\n    }\r\n  }\r\n  goUp() {\r\n    this.goDir(\"UP\");\r\n  }\r\n  goRight() {\r\n    this.goDir(\"RIGHT\");\r\n  }\r\n  goDown() {\r\n    this.goDir(\"DOWN\");\r\n  }\r\n  goLeft() {\r\n    this.goDir(\"LEFT\");\r\n  }\r\n  pushButtonA() {\r\n    var _a;\r\n    (_a = this.currentElement) == null ? void 0 : _a.instance.onButtonAPressed();\r\n  }\r\n  pushButtonB() {\r\n    var _a;\r\n    (_a = this.currentElement) == null ? void 0 : _a.instance.onButtonBPressed();\r\n  }\r\n  goDir(dir) {\r\n    const HTMLElementList = this.parseDOM();\r\n    if (!this.currentElement || HTMLElementList === null) {\r\n      return;\r\n    }\r\n    const nextElement = this.findClosestNode(this.currentElement, HTMLElementList, dir);\r\n    if (nextElement !== null) {\r\n      this.currentElement.instance.toggleFocus(false);\r\n      this.currentElement = nextElement;\r\n      this.currentElement.instance.toggleFocus(true);\r\n    }\r\n  }\r\n  parseDOM() {\r\n    if (this.gamepadUiViewVNode === null) {\r\n      throw new Error(`Can't parse DOM, VNode is null`);\r\n    }\r\n    const VNodeList = [];\r\n    FSComponent.visitNodes(this.gamepadUiViewVNode, (node) => {\r\n      if (node.instance instanceof GamepadUiComponent) {\r\n        const ref = FSComponent.createRef();\r\n        ref.instance = node.instance;\r\n        VNodeList.push(ref);\r\n      }\r\n      return false;\r\n    });\r\n    return VNodeList.length ? VNodeList : null;\r\n  }\r\n  findFirstElement() {\r\n    const HTMLElementList = this.parseDOM();\r\n    if (HTMLElementList === null) {\r\n      return null;\r\n    }\r\n    return HTMLElementList[0];\r\n  }\r\n  /** On r\u00E9duit la liste dont le top est en dessous du bottom du current node. */\r\n  findClosestNode(currentGamepadUiComponent, gamepadUiComponentList, direction) {\r\n    let candidateIndex = -1;\r\n    switch (direction) {\r\n      case \"UP\":\r\n        candidateIndex = this.findBestCandidate(\r\n          currentGamepadUiComponent,\r\n          gamepadUiComponentList,\r\n          \"bottom\",\r\n          \"top\"\r\n        );\r\n        break;\r\n      case \"RIGHT\":\r\n        candidateIndex = this.findBestCandidate(\r\n          currentGamepadUiComponent,\r\n          gamepadUiComponentList,\r\n          \"left\",\r\n          \"right\"\r\n        );\r\n        break;\r\n      case \"DOWN\":\r\n        candidateIndex = this.findBestCandidate(\r\n          currentGamepadUiComponent,\r\n          gamepadUiComponentList,\r\n          \"top\",\r\n          \"bottom\"\r\n        );\r\n        break;\r\n      case \"LEFT\":\r\n        candidateIndex = this.findBestCandidate(\r\n          currentGamepadUiComponent,\r\n          gamepadUiComponentList,\r\n          \"right\",\r\n          \"left\"\r\n        );\r\n        break;\r\n    }\r\n    if (candidateIndex !== -1 && candidateIndex < gamepadUiComponentList.length) {\r\n      return gamepadUiComponentList[candidateIndex];\r\n    }\r\n    return null;\r\n  }\r\n  findBestCandidate(currentGamepadUiComponent, gamepadUiComponentList, side1, side2) {\r\n    const htmlElementCandidates = [];\r\n    let closestDistance = Infinity;\r\n    let candidateIndex = -1;\r\n    const currentHTMLElementRect = currentGamepadUiComponent.instance.getComponentRect();\r\n    gamepadUiComponentList.forEach((htmlElement, index2) => {\r\n      const htmlElementRect = htmlElement.instance.getComponentRect();\r\n      if (this.isRectPosValid(htmlElementRect, currentHTMLElementRect, side1, side2, false)) {\r\n        if (!htmlElementCandidates.some(\r\n          (htmlElementCandidate) => this.isRectPosValid(\r\n            htmlElementRect,\r\n            htmlElementCandidate.instance.getComponentRect(),\r\n            side1,\r\n            side1,\r\n            true\r\n          )\r\n        )) {\r\n          htmlElementCandidates.push(htmlElement);\r\n          const corner = side1 === \"bottom\" || side1 === \"top\" ? \"left\" : \"top\";\r\n          const distance = this.distances1D(htmlElementRect, currentHTMLElementRect, corner);\r\n          if (distance <= closestDistance) {\r\n            closestDistance = distance;\r\n            candidateIndex = index2;\r\n          }\r\n        }\r\n      }\r\n    });\r\n    return candidateIndex;\r\n  }\r\n  isRectPosValid(rect1, rect2, side1, side2, strict) {\r\n    if (side1 === \"bottom\" || side1 === \"right\") {\r\n      if (strict) {\r\n        return rect1[side1] < rect2[side2];\r\n      } else {\r\n        return rect1[side1] <= rect2[side2];\r\n      }\r\n    } else {\r\n      if (strict) {\r\n        return rect1[side1] > rect2[side2];\r\n      } else {\r\n        return rect1[side1] >= rect2[side2];\r\n      }\r\n    }\r\n  }\r\n  distances1D(rect1, rect2, side) {\r\n    return Math.abs(rect2[side] - rect1[side]);\r\n  }\r\n}\r\nclass UiView extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.services = [];\r\n  }\r\n  onOpen() {\r\n    var _a;\r\n    for (const service of this.services) {\r\n      (_a = service.onOpen) == null ? void 0 : _a.call(service);\r\n    }\r\n  }\r\n  onClose() {\r\n    var _a;\r\n    for (const service of this.services) {\r\n      (_a = service.onClose) == null ? void 0 : _a.call(service);\r\n    }\r\n  }\r\n  onResume() {\r\n    var _a;\r\n    for (const service of this.services) {\r\n      (_a = service.onResume) == null ? void 0 : _a.call(service);\r\n    }\r\n  }\r\n  onPause() {\r\n    var _a;\r\n    for (const service of this.services) {\r\n      (_a = service.onPause) == null ? void 0 : _a.call(service);\r\n    }\r\n  }\r\n  onUpdate(time) {\r\n    var _a;\r\n    for (const service of this.services) {\r\n      (_a = service.onUpdate) == null ? void 0 : _a.call(service, time);\r\n    }\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    for (const service of this.services) {\r\n      (_a = service.destroy) == null ? void 0 : _a.call(service);\r\n    }\r\n    super.destroy();\r\n  }\r\n}\r\nclass GamepadUiView extends UiView {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.gamepadUiViewRef = FSComponent.createRef();\r\n    this.gamepadUiParser = new GamepadUiParser();\r\n    this._nextHandler = Subject.create(void 0);\r\n    this.nextHandler = this._nextHandler;\r\n    this.inputManager = new InputManager();\r\n    this.gamepadComponentChildren = [];\r\n    this.areGamepadInputsEnabled = Subject.create(false);\r\n    this.viewCoreInputManager = new InternalInputManager(InternalInputActions);\r\n  }\r\n  /**\r\n   * Enable the gamepad inputs for this UI view.\r\n   * Gamepad inputs of any UI view shall be added in its own enableGamepadInputs function via inputManager.\r\n   */\r\n  enableGamepadInputs() {\r\n    if (this.areGamepadInputsEnabled.get()) {\r\n      console.warn(\"Trying to enable gamepad inputs that are already enabled. Operation cancelled.\");\r\n      return;\r\n    }\r\n    this.goBackActionDestructor = this.viewCoreInputManager.addInputAction(\r\n      InternalInputAction.BACK,\r\n      () => {\r\n        if (this.props.appViewService === void 0) {\r\n          return false;\r\n        }\r\n        try {\r\n          this.props.appViewService.goBack();\r\n        } catch (e) {\r\n          return false;\r\n        }\r\n        return true;\r\n      }\r\n    );\r\n    this.gamepadComponentChildren.forEach((child) => child.enableGamepadInputs());\r\n    this.areGamepadInputsEnabled.set(true);\r\n  }\r\n  /**\r\n   * Disable the gamepad inputs for this UI view.\r\n   * Gamepad input destructors of any UI view shall be called in its own disableGamepadInputs function.\r\n   */\r\n  disableGamepadInputs() {\r\n    var _a;\r\n    (_a = this.goBackActionDestructor) == null ? void 0 : _a.call(this);\r\n    this.gamepadComponentChildren.forEach((child) => child.disableGamepadInputs());\r\n    this.areGamepadInputsEnabled.set(false);\r\n  }\r\n  onClose() {\r\n    super.onClose();\r\n    this.disableGamepadInputs();\r\n  }\r\n  onResume() {\r\n    super.onResume();\r\n    this.enableGamepadInputs();\r\n  }\r\n  onPause() {\r\n    super.onPause();\r\n    this.disableGamepadInputs();\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.gamepadUiParser.bindVNodeReference(node);\r\n    FSComponent.visitNodes(node, (childNode) => {\r\n      if (childNode.instance instanceof GamepadUiComponent) {\r\n        this.gamepadComponentChildren.push(childNode.instance);\r\n      }\r\n      return false;\r\n    });\r\n  }\r\n  destroy() {\r\n    super.destroy();\r\n    this.disableGamepadInputs();\r\n  }\r\n  setNextGamepadEventHandler(ref) {\r\n    this._nextHandler.set(ref);\r\n  }\r\n  deletePreviousGamepadEventHandler() {\r\n    this._nextHandler.set(void 0);\r\n  }\r\n  handleGamepadEvent(_gamepadEvent) {\r\n    if (_gamepadEvent === GamepadEvents.BUTTON_B) {\r\n      this.gamepadUiParser.pushButtonB();\r\n    }\r\n    const nextHandler = this._nextHandler.get();\r\n    if (nextHandler !== void 0) {\r\n      return nextHandler.handleGamepadEvent(_gamepadEvent);\r\n    }\r\n    switch (_gamepadEvent) {\r\n      case GamepadEvents.JOYDIR_UP:\r\n        this.gamepadUiParser.goUp();\r\n        break;\r\n      case GamepadEvents.JOYDIR_RIGHT:\r\n        this.gamepadUiParser.goRight();\r\n        break;\r\n      case GamepadEvents.JOYDIR_DOWN:\r\n        this.gamepadUiParser.goDown();\r\n        break;\r\n      case GamepadEvents.JOYDIR_LEFT:\r\n        this.gamepadUiParser.goLeft();\r\n        break;\r\n      case GamepadEvents.BUTTON_A:\r\n        this.gamepadUiParser.pushButtonA();\r\n        break;\r\n    }\r\n  }\r\n}\r\nvar ViewBootMode = /* @__PURE__ */ ((ViewBootMode2) => {\r\n  ViewBootMode2[ViewBootMode2[\"COLD\"] = 0] = \"COLD\";\r\n  ViewBootMode2[ViewBootMode2[\"HOT\"] = 1] = \"HOT\";\r\n  return ViewBootMode2;\r\n})(ViewBootMode || {});\r\nvar ViewSuspendMode = /* @__PURE__ */ ((ViewSuspendMode2) => {\r\n  ViewSuspendMode2[ViewSuspendMode2[\"SLEEP\"] = 0] = \"SLEEP\";\r\n  ViewSuspendMode2[ViewSuspendMode2[\"TERMINATE\"] = 1] = \"TERMINATE\";\r\n  return ViewSuspendMode2;\r\n})(ViewSuspendMode || {});\r\nconst defaultViewOptions = {\r\n  BootMode: ViewBootMode.COLD,\r\n  SuspendMode: ViewSuspendMode.SLEEP\r\n};\r\nclass AppViewService {\r\n  constructor(bus) {\r\n    this.registeredUiViewEntries = /* @__PURE__ */ new Map();\r\n    this.appViewStack = [];\r\n    this.registeredUiViewPromises = [];\r\n    this.hasInitialized = false;\r\n    this._currentUiView = Subject.create(null);\r\n    this.currentUiView = this._currentUiView;\r\n    this.bus = bus;\r\n    this.goHomeSub = this.bus.on(\r\n      \"_efb_appviewservice_go_home\",\r\n      () => {\r\n        const steps = this.appViewStack.length - 1;\r\n        if (steps >= 1) {\r\n          this.goBack(steps);\r\n        }\r\n      },\r\n      true\r\n    );\r\n  }\r\n  onOpen() {\r\n    var _a, _b;\r\n    this.goHomeSub.resume();\r\n    (_b = (_a = this.getActiveUiViewEntry()) == null ? void 0 : _a.ref) == null ? void 0 : _b.onOpen();\r\n  }\r\n  onClose() {\r\n    var _a, _b;\r\n    this.goHomeSub.pause();\r\n    (_b = (_a = this.getActiveUiViewEntry()) == null ? void 0 : _a.ref) == null ? void 0 : _b.onClose();\r\n  }\r\n  onResume() {\r\n    var _a, _b;\r\n    this.goHomeSub.resume();\r\n    (_b = (_a = this.getActiveUiViewEntry()) == null ? void 0 : _a.ref) == null ? void 0 : _b.onResume();\r\n  }\r\n  onPause() {\r\n    var _a, _b;\r\n    this.goHomeSub.pause();\r\n    (_b = (_a = this.getActiveUiViewEntry()) == null ? void 0 : _a.ref) == null ? void 0 : _b.onPause();\r\n  }\r\n  /**\r\n   * Registers and renders a view (page or popup) to be opened by the service.\r\n   * @param key The UiView string key.\r\n   * @param type The view type\r\n   * @param vNodeFactory A function that returns a {@link UiView} VNode for the key\r\n   * @param options The {@link UiView} {@link ViewOptions}\r\n   * @returns UiViewEntry\r\n   */\r\n  registerView(key, type, vNodeFactory, options) {\r\n    if (this.registeredUiViewEntries.has(key)) {\r\n      throw new Error(`View \"${key}\" is already used`);\r\n    } else if (typeof vNodeFactory !== \"function\") {\r\n      throw new Error(\"vNodeFactory has to be a function returning a VNode\");\r\n    }\r\n    const viewOptions = Object.assign({}, defaultViewOptions, options);\r\n    const appViewEntry = {\r\n      key,\r\n      render: vNodeFactory,\r\n      vNode: vNodeFactory,\r\n      ref: null,\r\n      containerRef: FSComponent.createRef(),\r\n      isVisible: Subject.create(false),\r\n      layer: Subject.create(-1),\r\n      type: Subject.create(type),\r\n      isInit: false,\r\n      viewOptions\r\n    };\r\n    if (viewOptions.BootMode === ViewBootMode.HOT) {\r\n      this.initViewEntry(appViewEntry);\r\n    }\r\n    this.registeredUiViewEntries.set(key, appViewEntry);\r\n    return appViewEntry;\r\n  }\r\n  registerPage(key, vNodeFactory, options) {\r\n    return this.registerView(key, \"page\", vNodeFactory, options);\r\n  }\r\n  registerPopup(key, vNodeFactory, options) {\r\n    return this.registerView(key, \"popup\", vNodeFactory, options);\r\n  }\r\n  async killView(viewEntry) {\r\n    var _a;\r\n    if (viewEntry.isInit === false) {\r\n      return;\r\n    }\r\n    if (this.appViewStack.find((view) => view.key === viewEntry.key)) {\r\n      throw new Error(\"You must close your view before killing it\");\r\n    }\r\n    viewEntry.isInit = false;\r\n    (_a = viewEntry.ref) == null ? void 0 : _a.destroy();\r\n    viewEntry.containerRef.instance.destroy();\r\n    viewEntry.ref = null;\r\n    viewEntry.containerRef = FSComponent.createRef();\r\n    viewEntry.vNode = viewEntry.render.bind(viewEntry);\r\n    return new Promise((resolve) => {\r\n      if (viewEntry.viewOptions.BootMode === ViewBootMode.HOT) {\r\n        this.initViewEntry(viewEntry);\r\n      }\r\n      resolve();\r\n    });\r\n  }\r\n  /**\r\n   * @param entry a {@link UiViewEntry}\r\n   * @param shouldOpen opens the view on initialization, defaults to false\r\n   */\r\n  initViewEntry(entry, shouldOpen = false) {\r\n    var _a;\r\n    if (entry.isInit) {\r\n      return;\r\n    }\r\n    entry.isInit = true;\r\n    entry.vNode = value(entry.vNode);\r\n    entry.ref = entry.vNode.instance;\r\n    (_a = this.appViewRef) == null ? void 0 : _a.renderView(\r\n      /* @__PURE__ */ FSComponent.buildComponent(\r\n        AppViewWrapper,\r\n        {\r\n          viewName: entry.key,\r\n          isVisible: entry.isVisible,\r\n          type: entry.type,\r\n          layer: entry.layer,\r\n          ref: entry.containerRef\r\n        },\r\n        entry.vNode\r\n      )\r\n    );\r\n    shouldOpen && entry.ref.onOpen();\r\n  }\r\n  /**\r\n   * Destroys every view in registered view entries and resets the view stack.\r\n   */\r\n  unload() {\r\n    var _a;\r\n    this.registeredUiViewPromises = [];\r\n    for (const viewEntry of this.registeredUiViewEntries.values()) {\r\n      (_a = viewEntry.ref) == null ? void 0 : _a.destroy();\r\n    }\r\n    this.registeredUiViewEntries.clear();\r\n    this.appViewStack.splice(0, this.appViewStack.length);\r\n    this.hasInitialized = false;\r\n  }\r\n  /**\r\n   *\r\n   * @param homePageUiViewKey the string key of the {@link UiView}\r\n   * @returns a Promise resolving when all pages are initialized\r\n   */\r\n  async initialize(homePageUiViewKey) {\r\n    if (this.hasInitialized) {\r\n      return Promise.resolve();\r\n    }\r\n    return Promise.all(this.registeredUiViewPromises).then(() => {\r\n      this.initializeAppViewStack(homePageUiViewKey);\r\n      this.hasInitialized = true;\r\n    });\r\n  }\r\n  /**\r\n   * @returns the current active view entry.\r\n   */\r\n  getActiveUiViewEntry() {\r\n    const activeViewEntry = ArrayUtils.peekLast(this.appViewStack);\r\n    return activeViewEntry;\r\n  }\r\n  /** @deprecated */\r\n  on(_event, _viewKey, _callback) {\r\n    return this;\r\n  }\r\n  /**\r\n   * Handles logic associated with changing the open page.\r\n   * @param page Page to close\r\n   */\r\n  handleCloseView(page) {\r\n    var _a;\r\n    if (!page || page.isVisible.get() === false) return;\r\n    (_a = page.ref) == null ? void 0 : _a.onPause();\r\n    page.isVisible.set(false);\r\n    this._currentUiView.set(null);\r\n    if (page.viewOptions.SuspendMode === ViewSuspendMode.TERMINATE) {\r\n      setTimeout(() => this.killView(page));\r\n    }\r\n  }\r\n  /**\r\n   * Handles logic associated with changing the open page.\r\n   * @param page Page to open\r\n   */\r\n  handleOpenView(page) {\r\n    var _a;\r\n    if (!page || page.isVisible.get() === true) return;\r\n    (_a = page.ref) == null ? void 0 : _a.onResume();\r\n    page.isVisible.set(true);\r\n    this._currentUiView.set(page);\r\n  }\r\n  /**\r\n   * Populate the view stack with its respective home page.\r\n   * @param mainPageUiViewKey the key of the home page\r\n   */\r\n  initializeAppViewStack(mainPageUiViewKey) {\r\n    this.open(mainPageUiViewKey);\r\n  }\r\n  /**\r\n   * @param key the {@link UiView} string key\r\n   * @returns the {@link UiViewEntry} corresponding to the key\r\n   * @throws if the {@link UiViewEntry} doesn't exists\r\n   */\r\n  getUiViewEntry(key) {\r\n    const appViewEntry = this.registeredUiViewEntries.get(key);\r\n    if (!appViewEntry) {\r\n      throw new Error(`${key} wasn't registered as a view`);\r\n    }\r\n    return appViewEntry;\r\n  }\r\n  /**\r\n   * Called by AppContainer to pass in the refs to the view.\r\n   * Should only be called once.\r\n   * @param appViewRef The app view ref.\r\n   */\r\n  onAppContainerRendered(appViewRef) {\r\n    this.appViewRef = appViewRef;\r\n  }\r\n  isInViewStack(view) {\r\n    const key = typeof view === \"string\" ? view : view.key;\r\n    return this.appViewStack.findIndex((stackViewEntry) => key === stackViewEntry.key) !== -1;\r\n  }\r\n  isActive(view) {\r\n    const key = typeof view === \"string\" ? view : view.key;\r\n    const activeViewEntry = this.getActiveUiViewEntry();\r\n    if (activeViewEntry === void 0) {\r\n      return false;\r\n    }\r\n    return key === activeViewEntry.key;\r\n  }\r\n  open(key) {\r\n    const viewEntry = this.advanceViewStack(key);\r\n    return viewEntry;\r\n  }\r\n  goBack(steps) {\r\n    steps != null ? steps : steps = 1;\r\n    if (steps <= 0) {\r\n      throw new RangeError(`Steps must be superior to 0.`);\r\n    } else if (steps >= this.appViewStack.length) {\r\n      throw new RangeError(`Steps can't be superior to ${this.appViewStack.length} when called.`);\r\n    }\r\n    const activeViewEntry = this.getActiveUiViewEntry();\r\n    if (this.appViewStack.length > steps && activeViewEntry) {\r\n      const viewsToOpen = [];\r\n      const viewsToClose = [];\r\n      while (steps--) {\r\n        const view = this.appViewStack.pop();\r\n        if (view) {\r\n          viewsToClose.push(view);\r\n        }\r\n      }\r\n      let i = this.appViewStack.length;\r\n      do {\r\n        viewsToOpen.push(this.appViewStack[--i]);\r\n      } while (i > 0 && this.appViewStack[i].type.get() !== \"page\");\r\n      for (const page of viewsToClose) {\r\n        this.handleCloseView(page);\r\n      }\r\n      for (const page of viewsToOpen.reverse()) {\r\n        this.handleOpenView(page);\r\n      }\r\n    }\r\n    return this.getActiveUiViewEntry();\r\n  }\r\n  /**\r\n   * Handles view stack logic\r\n   * @param key the {@link UiView} string key\r\n   * @returns the current {@link UiViewEntry}\r\n   */\r\n  advanceViewStack(key) {\r\n    const viewEntry = this.getUiViewEntry(key);\r\n    if (this.appViewStack.includes(viewEntry)) {\r\n      if (this.getActiveUiViewEntry() !== viewEntry) {\r\n        throw new Error(\"Page or popup is already in the viewstack and can't be opened twice\");\r\n      }\r\n      return viewEntry;\r\n    }\r\n    switch (viewEntry.type.get()) {\r\n      case \"page\":\r\n        for (const page of [...this.appViewStack].reverse()) {\r\n          this.handleCloseView(page);\r\n        }\r\n        break;\r\n    }\r\n    this.appViewStack.push(viewEntry);\r\n    this.openView(viewEntry);\r\n    this.handleOpenView(viewEntry);\r\n    return viewEntry;\r\n  }\r\n  /**\r\n   * Handle logic associated with opening a view\r\n   * @param view the view to open.\r\n   */\r\n  openView(view) {\r\n    if (!view.isInit) {\r\n      this.initViewEntry(view, true);\r\n    }\r\n    const index2 = this.appViewStack.indexOf(view);\r\n    if (index2 < 0) {\r\n      throw new Error(`AppViewService: view not found in view stack: ${view.key}`);\r\n    }\r\n    view.layer.set(index2);\r\n  }\r\n  /**\r\n   * Updates all the pages/popups that are initialized and visible\r\n   * @param time timestamp\r\n   */\r\n  update(time) {\r\n    this.registeredUiViewEntries.forEach((UiView2) => {\r\n      var _a;\r\n      if (UiView2.isInit && UiView2.isVisible.get()) {\r\n        (_a = UiView2.ref) == null ? void 0 : _a.onUpdate(time);\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * Routes the event to the current {@link UiView}\r\n   * @param gamepadEvent the {@link GamepadEvents}\r\n   */\r\n  routeGamepadInteractionEvent(gamepadEvent) {\r\n    const _currentUiView = this.getActiveUiViewEntry();\r\n    if ((_currentUiView == null ? void 0 : _currentUiView.ref) instanceof GamepadUiView) {\r\n      _currentUiView.ref.handleGamepadEvent(gamepadEvent);\r\n    }\r\n  }\r\n}\r\nclass AppViewWrapper extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.rootRef = FSComponent.createRef();\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        ref: this.rootRef,\r\n        class: {\r\n          \"ui-view\": true,\r\n          [this.props.viewName]: true,\r\n          hidden: this.props.isVisible.map(SubscribableMapFunctions.not()),\r\n          page: this.props.type.map(where(\"page\")),\r\n          popup: this.props.type.map(where(\"popup\"))\r\n        },\r\n        style: {\r\n          \"z-index\": this.props.layer.map(toString())\r\n        }\r\n      },\r\n      this.props.children\r\n    );\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    const root = this.rootRef.getOrDefault();\r\n    if (root !== null) {\r\n      (_a = root.parentNode) == null ? void 0 : _a.removeChild(root);\r\n    }\r\n    super.destroy();\r\n  }\r\n}\r\nvar __defProp2 = Object.defineProperty;\r\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\r\nvar __decorateClass = (decorators, target, key, kind) => {\r\n  var result = __getOwnPropDesc(target, key);\r\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\r\n    if (decorator = decorators[i])\r\n      result = decorator(target, key, result) || result;\r\n  if (result) __defProp2(target, key, result);\r\n  return result;\r\n};\r\nclass AppView extends DisplayComponent {\r\n  constructor(props) {\r\n    var _a;\r\n    super(props);\r\n    this.rootRef = FSComponent.createRef();\r\n    this.pageKeyActions = /* @__PURE__ */ new Map();\r\n    this._appViewService = props.appViewService || (props.bus ? new AppViewService(props.bus) : void 0);\r\n    this._bus = (_a = this._appViewService) == null ? void 0 : _a.bus;\r\n    this._unitsSettingManager = props.unitsSettingManager;\r\n    this._efbSettingsManager = props.efbSettingsManager;\r\n    this._notificationManager = props.notificationManager;\r\n    this._onboardingManager = props.onboardingManager;\r\n  }\r\n  get appViewService() {\r\n    const _appViewService = this._appViewService;\r\n    if (!_appViewService) {\r\n      throw new Error(\r\n        `Cannot resolve 'appViewService' because none of 'appViewService' and 'bus' props were given.`\r\n      );\r\n    }\r\n    return _appViewService;\r\n  }\r\n  get bus() {\r\n    const _bus = this._bus;\r\n    if (!_bus) {\r\n      throw new Error(`Cannot resolve 'bus' because none of 'appViewService' and 'bus' props were given.`);\r\n    }\r\n    return _bus;\r\n  }\r\n  get unitsSettingManager() {\r\n    const _unitsSettingManager = this._unitsSettingManager;\r\n    if (_unitsSettingManager === void 0) {\r\n      throw new Error(`Cannot resolve 'unitsSettingManager'`);\r\n    }\r\n    return _unitsSettingManager;\r\n  }\r\n  get efbSettingsManager() {\r\n    const _efbSettingsManager = this._efbSettingsManager;\r\n    if (_efbSettingsManager === void 0) {\r\n      throw new Error(`Cannot resolve 'efbSettingsManager'`);\r\n    }\r\n    return _efbSettingsManager;\r\n  }\r\n  /**\r\n   * EFB notification manager\r\n   * @returns a unique efbNotificationManager instance\r\n   */\r\n  get notificationManager() {\r\n    const notificationManager = this._notificationManager;\r\n    if (!notificationManager) {\r\n      throw new Error(\"Notification manager is not defined\");\r\n    }\r\n    return notificationManager;\r\n  }\r\n  get onboardingManager() {\r\n    const _onboardingManager = this._onboardingManager;\r\n    if (!_onboardingManager) {\r\n      throw new Error(`Cannot resolve 'onboardingManager'`);\r\n    }\r\n    return _onboardingManager;\r\n  }\r\n  /**\r\n   * Called once when the view is opened for the first time.\r\n   */\r\n  onOpen() {\r\n    var _a;\r\n    (_a = this._appViewService) == null ? void 0 : _a.onOpen();\r\n  }\r\n  /**\r\n   * Called once when the view is destroyed.\r\n   */\r\n  onClose() {\r\n    var _a;\r\n    (_a = this._appViewService) == null ? void 0 : _a.onClose();\r\n  }\r\n  /**\r\n   * Called each time the view is resumed.\r\n   */\r\n  onResume() {\r\n    var _a;\r\n    (_a = this._appViewService) == null ? void 0 : _a.onResume();\r\n  }\r\n  /**\r\n   * Called each time the view is closed.\r\n   */\r\n  onPause() {\r\n    var _a;\r\n    (_a = this._appViewService) == null ? void 0 : _a.onPause();\r\n  }\r\n  /**\r\n   * On Update loop - It update the `AppViewService` if it is used.\r\n   * @param time in milliseconds\r\n   */\r\n  onUpdate(time) {\r\n    var _a;\r\n    (_a = this._appViewService) == null ? void 0 : _a.update(time);\r\n  }\r\n  /**\r\n   * Callback to register all views the app might use.\r\n   */\r\n  registerViews() {\r\n  }\r\n  /**\r\n   * @internal\r\n   * TODO : Need to be documented after Gamepad integration\r\n   */\r\n  routeGamepadInteractionEvent(gamepadEvent) {\r\n    var _a;\r\n    (_a = this._appViewService) == null ? void 0 : _a.routeGamepadInteractionEvent(gamepadEvent);\r\n  }\r\n  /**\r\n   * @internal\r\n   * @param key custom page key defined in `pageKeyActions`\r\n   * @param args array of arguments given to the defined callback\r\n   */\r\n  handlePageKeyAction(key, args) {\r\n    if (key === null) {\r\n      return;\r\n    }\r\n    const action = this.pageKeyActions.get(key);\r\n    if (action === void 0) {\r\n      console.error(`Key \"${key}\" doesn't exists.`);\r\n      return;\r\n    }\r\n    toPromise(action(args)).catch((reason) => {\r\n      console.error(`handlePageKeyAction Error for key \"${key}\"`, reason);\r\n    });\r\n  }\r\n  /**\r\n   * If using EFB's AppViewService, this method returns an AppContainer binded to AppViewService.\r\n   * Otherwise it can be customized with plain JSX/TSX or custom view service, etc...\r\n   *\r\n   * @example\r\n   * Surrounding AppContainer with a custom class:\r\n   * ```ts\r\n   * public render(): TVNode<HTMLDivElement> {\r\n   * \treturn <div class=\"my-custom-class\">{super.render()}</div>;\r\n   * }\r\n   * ```\r\n   * @example\r\n   * Here's an plain JSX/TSX example:\r\n   * ```ts\r\n   * public render(): TVNode<HTMLSpanElement> {\r\n   * \treturn <span>Hello World!</span>;\r\n   * }\r\n   * ```\r\n   */\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(AppContainer, { appViewService: this.appViewService });\r\n  }\r\n  /** @inheritdoc */\r\n  onAfterRender(node) {\r\n    var _a;\r\n    super.onAfterRender(node);\r\n    this.registerViews();\r\n    if (this.defaultView) {\r\n      (_a = this._appViewService) == null ? void 0 : _a.initialize(this.defaultView);\r\n    }\r\n  }\r\n  /** @internal */\r\n  destroy() {\r\n    var _a;\r\n    (_a = this._appViewService) == null ? void 0 : _a.unload();\r\n    super.destroy();\r\n  }\r\n}\r\n__decorateClass([\r\n  Memoize()\r\n], AppView.prototype, \"appViewService\");\r\n__decorateClass([\r\n  Memoize()\r\n], AppView.prototype, \"bus\");\r\n__decorateClass([\r\n  Memoize()\r\n], AppView.prototype, \"unitsSettingManager\");\r\n__decorateClass([\r\n  Memoize()\r\n], AppView.prototype, \"efbSettingsManager\");\r\n__decorateClass([\r\n  Memoize()\r\n], AppView.prototype, \"onboardingManager\");\r\nclass Button extends GamepadUiComponent {\r\n  constructor() {\r\n    var _a, _b, _c, _d;\r\n    super(...arguments);\r\n    this.isButtonDisabled = SubscribableUtils.toSubscribable((_a = this.props.disabled) != null ? _a : false, true);\r\n    this.isButtonHoverable = MappedSubject.create(\r\n      ([isHoverable, isDisabled]) => {\r\n        return isHoverable && !isDisabled;\r\n      },\r\n      SubscribableUtils.toSubscribable((_b = this.props.hoverable) != null ? _b : true, true),\r\n      this.isButtonDisabled\r\n    );\r\n    this.isButtonSelected = MappedSubject.create(\r\n      ([isSelected, state]) => isSelected || state,\r\n      SubscribableUtils.toSubscribable((_c = this.props.selected) != null ? _c : false, true),\r\n      SubscribableUtils.toSubscribable((_d = this.props.state) != null ? _d : false, true)\r\n    );\r\n  }\r\n  /**\r\n   * @deprecated Old way to render the button. Instead of extending the `Button` class, render your content as a children of `<Button>...</Button>`.\r\n   */\r\n  buttonRender() {\r\n    return null;\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"button\",\r\n      {\r\n        ref: this.gamepadUiComponentRef,\r\n        class: mergeClassProp(\r\n          \"button\",\r\n          \"abstract-button\",\r\n          // deprecated\r\n          {\r\n            hoverable: this.isButtonHoverable,\r\n            selected: this.isButtonSelected\r\n          },\r\n          this.props.class\r\n        ),\r\n        style: this.props.style\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"disabled-layer\" }),\r\n      this.props.children,\r\n      this.buttonRender()\r\n    );\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    if (this.props.callback) {\r\n      this.gamepadUiComponentRef.instance.onclick = (event) => {\r\n        var _a;\r\n        if (this.isButtonDisabled.get() === true) {\r\n          return;\r\n        }\r\n        (_a = this.props.callback) == null ? void 0 : _a.call(this, event);\r\n      };\r\n    }\r\n  }\r\n  destroy() {\r\n    this.isButtonHoverable.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\nclass AbstractButton extends Button {\r\n}\r\nclass TT extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.ref = FSComponent.createRef();\r\n    this.key = SubscribableUtils.toSubscribable(this.props.key, true);\r\n    this.formatter = this.props.format || ((text) => text);\r\n    this.subs = [];\r\n    this.reloadText = this._reloadText.bind(this);\r\n  }\r\n  _reloadText() {\r\n    var _a;\r\n    const key = this.key.get();\r\n    let translatedKey = key.startsWith(\"@\") || key.startsWith(\"TT\") ? Utils.Translate(key) : key;\r\n    (_a = this.props.arguments) == null ? void 0 : _a.forEach((argumentValue, argumentKey) => {\r\n      const argumentValueSub = SubscribableUtils.toSubscribable(argumentValue, true);\r\n      translatedKey = translatedKey.replace(argumentKey, argumentValueSub.get());\r\n    });\r\n    this.updateText(translatedKey);\r\n  }\r\n  getTextTransformed(text) {\r\n    if (isFunction(this.formatter)) {\r\n      return this.formatter(text);\r\n    }\r\n    switch (this.formatter) {\r\n      case \"upper\":\r\n      case \"uppercase\":\r\n        return text.toUpperCase();\r\n      case \"lower\":\r\n      case \"lowercase\":\r\n        return text.toLowerCase();\r\n      case \"ucfirst\":\r\n        return `${text.charAt(0).toUpperCase()}${text.slice(1)}`;\r\n      case \"capitalize\":\r\n        return text.replace(/(^\\w{1})|(\\s+\\w{1})/g, (letter) => letter.toUpperCase());\r\n      default:\r\n        console.warn(`Format \"${this.props.format}\" is not supported.`);\r\n        return text;\r\n    }\r\n  }\r\n  getEmphasisText(text) {\r\n    let emphasisText;\r\n    const boldRegex = /\\*\\*(.*?)\\*\\*/g;\r\n    const italicRegex = /\\*(.*?)\\*/g;\r\n    emphasisText = text.replace(boldRegex, '<span class=\"bold-text\">$1</span>');\r\n    emphasisText = emphasisText.replace(italicRegex, '<span class=\"italic-text\">$1</span>');\r\n    return emphasisText;\r\n  }\r\n  updateText(text) {\r\n    const formattedText = this.getTextTransformed(text);\r\n    const htmlText = this.getEmphasisText(formattedText);\r\n    this.ref.instance.innerHTML = htmlText;\r\n  }\r\n  render() {\r\n    var _a;\r\n    const Tag2 = (_a = this.props.type) != null ? _a : \"span\";\r\n    const _b = this.props, { key: _key, type: _type, format: _format, children: _children } = _b, props = __objRest(_b, [\"key\", \"type\", \"format\", \"children\"]);\r\n    return /* @__PURE__ */ FSComponent.buildComponent(Tag2, __spreadValues({ ref: this.ref }, props));\r\n  }\r\n  onAfterRender(node) {\r\n    var _a;\r\n    super.onAfterRender(node);\r\n    (_a = this.props.arguments) == null ? void 0 : _a.forEach((argumentValue, argumentKey) => {\r\n      const subValue = SubscribableUtils.toSubscribable(argumentValue, true);\r\n      this.subs.push(subValue.sub(this.reloadText));\r\n    });\r\n    this.reloadSubscription = this.key.sub(this.reloadText, true);\r\n    Coherent.on(\"RELOAD_LOCALISATION\", this.reloadText);\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    Coherent.off(\"RELOAD_LOCALISATION\", this.reloadText);\r\n    (_a = this.reloadSubscription) == null ? void 0 : _a.destroy();\r\n    this.subs.forEach((sub) => sub.destroy());\r\n    super.destroy();\r\n  }\r\n}\r\nclass GhostListItem extends GamepadUiComponent {\r\n  constructor(props) {\r\n    props.disabled = true;\r\n    props.visible = false;\r\n    super(props);\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"hidden\", ref: this.gamepadUiComponentRef });\r\n  }\r\n}\r\nconst _GamepadListNavigationManager = class _GamepadListNavigationManager {\r\n  constructor(data, toolbox) {\r\n    var _a, _b;\r\n    this.data = data;\r\n    this.toolbox = toolbox;\r\n    this.allowedUpcomingNavigationMs = 0;\r\n    this.currentItemIndex = Subject.create(-1);\r\n    this.isListFocusedSubscriptions = [];\r\n    this.currentItemIndexSubscription = this.currentItemIndex.sub((index2) => {\r\n      var _a2, _b2;\r\n      const item = index2 < 0 || index2 >= this.data.length ? null : this.data.get(index2);\r\n      (_b2 = (_a2 = this.toolbox).onItemHovered) == null ? void 0 : _b2.call(_a2, item, index2);\r\n    });\r\n    this.internalInputManager = new InternalInputManager(InternalInputActions);\r\n    this.navigationBetweenItemsDelayMs = (_a = toolbox.navigationBetweenItemsDelayMs) != null ? _a : _GamepadListNavigationManager.defaultNavigationBetweenItemsDelayMs;\r\n    if (toolbox.wrap) {\r\n      this.computeUpcomingItemIndex = (previousItemIndex, step) => (this.data.length + previousItemIndex + step) % this.data.length;\r\n    } else {\r\n      this.computeUpcomingItemIndex = (previousItemIndex, step) => {\r\n        const upcomingItemIndex = previousItemIndex + step;\r\n        if (upcomingItemIndex >= 0 && upcomingItemIndex < this.data.length) {\r\n          return upcomingItemIndex;\r\n        } else {\r\n          return previousItemIndex;\r\n        }\r\n      };\r\n    }\r\n    if (SubscribableUtils.isMutableSubscribable(toolbox.isListFocused)) {\r\n      this.isListFocused = toolbox.isListFocused;\r\n    } else if (SubscribableUtils.isSubscribable(toolbox.isListFocused)) {\r\n      this.isListFocused = Subject.create(toolbox.isListFocused.get());\r\n      this.isListFocusedSubscriptions.push(\r\n        toolbox.isListFocused.sub((value2) => this.isListFocused.set(value2))\r\n      );\r\n    } else {\r\n      this.isListFocused = Subject.create((_b = toolbox.isListFocused) != null ? _b : false);\r\n    }\r\n    this.isListFocusedSubscriptions.push(\r\n      MappedSubject.create(\r\n        ([is2D, isFocused]) => {\r\n          if (is2D && isFocused) {\r\n            this.enableGamepadNavigation();\r\n          } else {\r\n            this.disableGamepadNavigation();\r\n          }\r\n        },\r\n        window.PanelInfo.is2D,\r\n        this.isListFocused\r\n      )\r\n    );\r\n  }\r\n  navigateThroughList(step) {\r\n    const currentNavigationTryMs = Date.now();\r\n    if (currentNavigationTryMs < this.allowedUpcomingNavigationMs) {\r\n      return false;\r\n    }\r\n    this.allowedUpcomingNavigationMs = currentNavigationTryMs + this.navigationBetweenItemsDelayMs;\r\n    const currentItemIndex = this.currentItemIndex.get();\r\n    if (currentItemIndex === -1) {\r\n      return false;\r\n    }\r\n    const upcomingItemIndex = this.computeUpcomingItemIndex(currentItemIndex, step);\r\n    this.currentItemIndex.set(upcomingItemIndex);\r\n    return true;\r\n  }\r\n  enableGamepadNavigation() {\r\n    Coherent.trigger(\"SET_EFB_GAMEPAD_NAVIGATION\", true);\r\n    this.currentItemIndex.set(0);\r\n    this.unfocusListActionDestructor = this.internalInputManager.addInputAction(\r\n      InternalInputAction.BACK,\r\n      () => {\r\n        this.isListFocused.set(false);\r\n        return true;\r\n      }\r\n    );\r\n    this.selectItemActionDestructor = this.internalInputManager.addInputAction(\r\n      InternalInputAction.VALID,\r\n      () => {\r\n        var _a, _b;\r\n        const currentItemIndex = this.currentItemIndex.get();\r\n        try {\r\n          (_b = (_a = this.toolbox).onItemSelected) == null ? void 0 : _b.call(_a, this.data.get(currentItemIndex), currentItemIndex);\r\n        } catch (e) {\r\n          return false;\r\n        }\r\n        return true;\r\n      }\r\n    );\r\n    this.allowedUpcomingNavigationMs = Date.now();\r\n    this.prevItemActionDestructor = this.internalInputManager.addInputAction(\r\n      InternalInputAction.UP,\r\n      () => this.navigateThroughList(\r\n        -1\r\n        /* UP */\r\n      ),\r\n      { inputType: \"axis\" }\r\n    );\r\n    this.nextItemActionDestructor = this.internalInputManager.addInputAction(\r\n      InternalInputAction.DOWN,\r\n      () => this.navigateThroughList(\r\n        1\r\n        /* DOWN */\r\n      ),\r\n      { inputType: \"axis\" }\r\n    );\r\n  }\r\n  disableGamepadNavigation() {\r\n    var _a, _b, _c, _d;\r\n    (_a = this.unfocusListActionDestructor) == null ? void 0 : _a.call(this);\r\n    this.unfocusListActionDestructor = void 0;\r\n    (_b = this.selectItemActionDestructor) == null ? void 0 : _b.call(this);\r\n    this.selectItemActionDestructor = void 0;\r\n    (_c = this.prevItemActionDestructor) == null ? void 0 : _c.call(this);\r\n    this.prevItemActionDestructor = void 0;\r\n    (_d = this.nextItemActionDestructor) == null ? void 0 : _d.call(this);\r\n    this.nextItemActionDestructor = void 0;\r\n    this.currentItemIndex.set(-1);\r\n    Coherent.trigger(\"SET_EFB_GAMEPAD_NAVIGATION\", false);\r\n  }\r\n  pause() {\r\n    this.disableGamepadNavigation();\r\n    this.currentItemIndexSubscription.pause();\r\n    this.isListFocusedSubscriptions.forEach((subscription) => {\r\n      subscription.pause();\r\n    });\r\n  }\r\n  resume() {\r\n    this.currentItemIndexSubscription.resume(this.isListFocused.get());\r\n    this.isListFocusedSubscriptions.forEach((subscription) => {\r\n      subscription.resume(true);\r\n    });\r\n  }\r\n  destroy() {\r\n    this.currentItemIndexSubscription.destroy();\r\n    this.isListFocusedSubscriptions.forEach((subscription) => {\r\n      subscription.destroy();\r\n    });\r\n    this.disableGamepadNavigation();\r\n  }\r\n};\r\n_GamepadListNavigationManager.defaultNavigationBetweenItemsDelayMs = 100;\r\nlet GamepadListNavigationManager = _GamepadListNavigationManager;\r\nclass List extends GamepadUiComponent {\r\n  constructor(props) {\r\n    var _a;\r\n    super(props);\r\n    this.renderedItems = ArraySubject.create();\r\n    this.gamepadComponentChildren = ArraySubject.create();\r\n    this.nbRenderedItems = Subject.create(0);\r\n    this.renderedItemsSubscription = this.renderedItems.sub(\r\n      (_index, _type, _item, items) => {\r\n        this.nbRenderedItems.set(items.length);\r\n        this.gamepadComponentChildren.set(items.filter((item) => item instanceof GamepadUiComponent));\r\n      }\r\n    );\r\n    this.isListVisible = (_a = this.props.isListVisible) != null ? _a : Subject.create(true);\r\n    this.isListVisibleSubscription = this.isListVisible.sub((isVisible) => {\r\n      if (isVisible) {\r\n        this.enableGamepadInputs();\r\n      } else {\r\n        this.disableGamepadInputs();\r\n      }\r\n    }, true);\r\n    this.onDataChangedSubscription = this.props.data.sub(this.onDataChanged.bind(this));\r\n    if (props.gamepadNavigationOptions) {\r\n      this.gamepadNavigationManager = new GamepadListNavigationManager(\r\n        props.data,\r\n        props.gamepadNavigationOptions\r\n      );\r\n    }\r\n  }\r\n  /**\r\n   * Scroll the list to a specific item given its index.\r\n   * @param index The index of the item to scroll to.\r\n   * @throws Error if the index is out of bounds or if the item is not an Element.\r\n   */\r\n  scrollToItem(index2) {\r\n    const listRef = this.gamepadUiComponentRef.getOrDefault();\r\n    if (listRef === null) {\r\n      return;\r\n    }\r\n    let node = this.renderedItems.get(index2);\r\n    if (node instanceof GamepadUiComponent) {\r\n      node = node.gamepadUiComponentRef.getOrDefault();\r\n    }\r\n    if (node instanceof Element) {\r\n      const listRect = listRef.getBoundingClientRect();\r\n      const nodeRect = node.getBoundingClientRect();\r\n      const nodeRelativeTop = nodeRect.top - listRect.top;\r\n      const nodeRelativeBottom = nodeRect.bottom - listRect.bottom;\r\n      if (nodeRelativeTop < 0) {\r\n        listRef.scrollTo({ top: listRef.scrollTop + nodeRelativeTop });\r\n      } else if (nodeRelativeBottom > 0) {\r\n        listRef.scrollTo({ top: listRef.scrollTop + nodeRelativeBottom });\r\n      }\r\n    } else {\r\n      throw new Error(\"The item to scroll to is not an Element.\");\r\n    }\r\n  }\r\n  cleanRenderedContent() {\r\n    for (const item of this.renderedItems.getArray()) {\r\n      if (item instanceof DisplayComponent) {\r\n        item.destroy();\r\n      }\r\n    }\r\n    this.gamepadUiComponentRef.instance.textContent = \"\";\r\n    this.renderedItems.clear();\r\n  }\r\n  onDataChanged(index2, type, item) {\r\n    const instance = this.gamepadUiComponentRef.getOrDefault();\r\n    if (instance === null) {\r\n      return;\r\n    }\r\n    if (this.props.refreshOnUpdate) {\r\n      this.renderList();\r\n      return;\r\n    }\r\n    switch (type) {\r\n      case SubscribableArrayEventType.Added:\r\n        {\r\n          if (!item) return;\r\n          const el = instance.children.item(index2);\r\n          if (Array.isArray(item)) {\r\n            for (let i = 0; i < item.length; i++) {\r\n              this.addDomNode(item[i], index2 + i, el);\r\n            }\r\n          } else {\r\n            this.addDomNode(item, index2, el);\r\n          }\r\n        }\r\n        break;\r\n      case SubscribableArrayEventType.Removed:\r\n        {\r\n          if (!item) return;\r\n          if (Array.isArray(item)) {\r\n            item.forEach((_) => {\r\n              this.removeDomNode(index2);\r\n            });\r\n          } else {\r\n            this.removeDomNode(index2);\r\n          }\r\n        }\r\n        break;\r\n      case SubscribableArrayEventType.Cleared:\r\n        this.cleanRenderedContent();\r\n        break;\r\n    }\r\n  }\r\n  addDomNode(item, index2, el) {\r\n    const node = this.props.renderItem(item, index2);\r\n    if (!node) return;\r\n    if (el !== null) {\r\n      FSComponent.renderBefore(node, el);\r\n    } else {\r\n      el = this.gamepadUiComponentRef.instance;\r\n      FSComponent.render(node, el);\r\n    }\r\n    if (node.instance !== null) {\r\n      this.renderedItems.insert(node.instance, index2);\r\n    }\r\n  }\r\n  removeDomNode(index2) {\r\n    const child = this.gamepadUiComponentRef.instance.childNodes.item(index2);\r\n    this.gamepadUiComponentRef.instance.removeChild(child);\r\n    const removed = this.renderedItems.get(index2);\r\n    this.renderedItems.removeItem(removed);\r\n    if (removed instanceof DisplayComponent) {\r\n      removed.destroy();\r\n    }\r\n  }\r\n  enableGamepadInputsOnHover(element) {\r\n    if (this.props.isScrollable) {\r\n      this.scrollActionDestructor = this.inputManager.addScrollInputAction(element, {\r\n        scrollAxis: \"vertical\"\r\n      });\r\n    }\r\n  }\r\n  enableGamepadInputs() {\r\n    var _a;\r\n    super.enableGamepadInputs();\r\n    const scrollContainerRef = this.gamepadUiComponentRef.getOrDefault();\r\n    if (scrollContainerRef !== null) {\r\n      this.enableGamepadInputsOnHover(scrollContainerRef);\r\n    }\r\n    (_a = this.gamepadNavigationManager) == null ? void 0 : _a.resume();\r\n    this.gamepadComponentChildren.getArray().forEach((child) => child.enableGamepadInputs());\r\n  }\r\n  disableGamepadInputs() {\r\n    var _a, _b;\r\n    super.disableGamepadInputs();\r\n    (_a = this.scrollActionDestructor) == null ? void 0 : _a.call(this);\r\n    this.scrollActionDestructor = void 0;\r\n    (_b = this.gamepadNavigationManager) == null ? void 0 : _b.pause();\r\n    this.gamepadComponentChildren.getArray().forEach((child) => child.disableGamepadInputs());\r\n  }\r\n  renderList() {\r\n    const instance = this.gamepadUiComponentRef.getOrDefault();\r\n    if (instance === null) {\r\n      return;\r\n    }\r\n    this.cleanRenderedContent();\r\n    FSComponent.render(\r\n      /* @__PURE__ */ FSComponent.buildComponent(FSComponent.Fragment, null, this.props.data.getArray().map((item, index2) => {\r\n        const vnode = this.props.renderItem(item, index2);\r\n        if (vnode !== null) {\r\n          this.renderedItems.insert(vnode.instance);\r\n        }\r\n        return vnode;\r\n      })),\r\n      instance\r\n    );\r\n  }\r\n  render() {\r\n    var _a;\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        class: mergeClassProp(\"list\", {\r\n          \"scroll-container\": (_a = this.props.isScrollable) != null ? _a : false,\r\n          hide: MappedSubject.create(\r\n            ([isVisible, nbItems]) => !isVisible || nbItems === 0,\r\n            this.isListVisible,\r\n            this.nbRenderedItems\r\n          )\r\n        }),\r\n        style: this.props.style,\r\n        ref: this.gamepadUiComponentRef\r\n      }\r\n    );\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.renderList();\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    this.renderedItemsSubscription.destroy();\r\n    this.onDataChangedSubscription.destroy();\r\n    (_a = this.gamepadNavigationManager) == null ? void 0 : _a.destroy();\r\n    this.isListVisibleSubscription.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\nconst arrowIconPath$1 = \"coui://html_ui/efb_ui/efb_os/Assets/icons/NoMargin/Arrow.svg\";\r\nclass PagingList extends GamepadUiComponent {\r\n  constructor() {\r\n    var _a;\r\n    super(...arguments);\r\n    this.currentData = ArraySubject.create();\r\n    this.previousData = ArraySubject.create();\r\n    this.nextData = ArraySubject.create();\r\n    this.firstPage = Subject.create(true);\r\n    this.lastPage = Subject.create(false);\r\n    this.maxItemsPerPage = SubscribableUtils.toSubscribable(this.props.maxItemsPerPage, true);\r\n    this.numberOfPages = Subject.create(1);\r\n    this.pageSelected = (_a = this.props.pageSelected) != null ? _a : Subject.create(0);\r\n    this.previousPageSelected = this.pageSelected.get();\r\n    this.transitionWrapperRef = FSComponent.createRef();\r\n    this.ongoingTransition = Subject.create(false);\r\n    this.allowTransition = true;\r\n    this.subs = [];\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.subs.push(\r\n      this.props.data.sub(() => this.updateListsData(this.pageSelected.get())),\r\n      this.maxItemsPerPage.sub(() => this.updateListsData(this.pageSelected.get())),\r\n      this.pageSelected.sub(this.onPageChanged.bind(this))\r\n    );\r\n    this.updateListsData(this.pageSelected.get());\r\n  }\r\n  clearData() {\r\n    this.previousData.clear();\r\n    this.currentData.clear();\r\n    this.nextData.clear();\r\n  }\r\n  updateListsData(pageSelected) {\r\n    const maxItemsPerPage = this.maxItemsPerPage.get();\r\n    if (maxItemsPerPage <= 0) {\r\n      console.error(\r\n        `The maximum items per page of a paging list cannot be negative or null. Current value: ${maxItemsPerPage}`\r\n      );\r\n      return;\r\n    }\r\n    const numberOfPages = Math.ceil(this.props.data.length / maxItemsPerPage);\r\n    this.numberOfPages.set(numberOfPages);\r\n    if (numberOfPages === 0) {\r\n      this.clearData();\r\n      return;\r\n    }\r\n    const rawPageSelected = pageSelected;\r\n    pageSelected = Utils.Clamp(pageSelected, 0, numberOfPages - 1);\r\n    const start = pageSelected * maxItemsPerPage;\r\n    const followingStart = start + maxItemsPerPage;\r\n    const fullData = this.props.data.getArray();\r\n    this.currentData.set(fullData.slice(start, followingStart));\r\n    if (start === 0) {\r\n      this.previousData.clear();\r\n      this.firstPage.set(true);\r\n    } else {\r\n      this.previousData.set(fullData.slice(start - maxItemsPerPage, start));\r\n      this.firstPage.set(this.previousData.getArray().length === 0);\r\n    }\r\n    if (followingStart > fullData.length) {\r\n      this.nextData.clear();\r\n      this.lastPage.set(true);\r\n    } else {\r\n      this.nextData.set(fullData.slice(followingStart, followingStart + maxItemsPerPage));\r\n      this.lastPage.set(this.nextData.getArray().length === 0);\r\n    }\r\n    if (rawPageSelected !== pageSelected) {\r\n      this.allowTransition = false;\r\n      this.pageSelected.set(pageSelected);\r\n    }\r\n  }\r\n  async onPageChanged(newPageSelected) {\r\n    const numberOfPages = this.numberOfPages.get();\r\n    if (newPageSelected < 0 || newPageSelected >= numberOfPages) {\r\n      this.pageSelected.set(Utils.Clamp(newPageSelected, 0, numberOfPages - 1));\r\n      return;\r\n    }\r\n    if (!this.allowTransition) {\r\n      this.allowTransition = true;\r\n      this.previousPageSelected = newPageSelected;\r\n      this.updateListsData(newPageSelected);\r\n      return;\r\n    }\r\n    await Wait.awaitCondition(() => !this.ongoingTransition.get());\r\n    this.ongoingTransition.set(true);\r\n    const gap = newPageSelected - this.previousPageSelected;\r\n    const side = gap > 0 ? 1 : -1;\r\n    for (let i = 0; i < Math.abs(gap); i++) {\r\n      const targetPage = this.previousPageSelected + (i + 1) * side;\r\n      await this.doTransition(side, targetPage);\r\n    }\r\n    this.previousPageSelected = newPageSelected;\r\n    this.ongoingTransition.set(false);\r\n  }\r\n  async doTransition(side, targetPage) {\r\n    for (let i = 5; i < 101; i += 5) {\r\n      this.transitionWrapperRef.instance.style.right = `${100 + i * side}%`;\r\n      await Wait.awaitDelay(1);\r\n    }\r\n    this.updateListsData(targetPage);\r\n    this.transitionWrapperRef.instance.style.right = \"100%\";\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        ref: this.gamepadUiComponentRef,\r\n        class: {\r\n          \"paging-list\": true,\r\n          \"first-page\": this.firstPage,\r\n          \"last-page\": this.lastPage,\r\n          \"ongoing-transition\": this.ongoingTransition\r\n        }\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"transition-wrapper\", ref: this.transitionWrapperRef }, /* @__PURE__ */ FSComponent.buildComponent(List, { class: \"previous-list\", data: this.previousData, renderItem: this.props.renderItem }), /* @__PURE__ */ FSComponent.buildComponent(List, { class: \"main-list\", data: this.currentData, renderItem: this.props.renderItem }), /* @__PURE__ */ FSComponent.buildComponent(List, { class: \"following-list\", data: this.nextData, renderItem: this.props.renderItem })),\r\n      /* @__PURE__ */ FSComponent.buildComponent(CarrouselButtons, { numberOfPages: this.numberOfPages, pageSelected: this.pageSelected })\r\n    );\r\n  }\r\n  destroy() {\r\n    this.subs.forEach((s) => s.destroy());\r\n    super.destroy();\r\n  }\r\n}\r\nclass CarrouselButtons extends GamepadUiComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.buttonsRef = [];\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.pagesSub = this.props.numberOfPages.sub(this.renderButtons.bind(this));\r\n  }\r\n  renderButtons(numPages) {\r\n    for (const buttonRef of this.buttonsRef) {\r\n      buttonRef.destroy();\r\n    }\r\n    this.buttonsRef.length = 0;\r\n    this.gamepadUiComponentRef.instance.innerHTML = \"\";\r\n    for (let i = 0; i < numPages; i++) {\r\n      const node = /* @__PURE__ */ FSComponent.buildComponent(\r\n        UniqueCarrouselButton,\r\n        {\r\n          selected: this.props.pageSelected.map((pageSelected) => pageSelected === i),\r\n          callback: () => {\r\n            this.props.pageSelected.set(i);\r\n          }\r\n        }\r\n      );\r\n      FSComponent.render(node, this.gamepadUiComponentRef.instance);\r\n      this.buttonsRef.push(node.instance);\r\n    }\r\n  }\r\n  changePage(increment) {\r\n    const newPageIndex = Utils.Clamp(\r\n      this.props.pageSelected.get() + increment,\r\n      0,\r\n      this.props.numberOfPages.get() - 1\r\n    );\r\n    this.props.pageSelected.set(newPageIndex);\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    (_a = this.pagesSub) == null ? void 0 : _a.destroy();\r\n    super.destroy();\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        class: {\r\n          \"carrousel-buttons\": true,\r\n          hide: this.props.numberOfPages.map((v) => v <= 1)\r\n        }\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\r\n        IconButton,\r\n        {\r\n          class: \"left carrousel-arrow\",\r\n          callback: () => this.changePage(-1),\r\n          iconPath: arrowIconPath$1\r\n        }\r\n      ),\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { ref: this.gamepadUiComponentRef, class: \"buttons-container\" }),\r\n      /* @__PURE__ */ FSComponent.buildComponent(\r\n        IconButton,\r\n        {\r\n          class: \"right carrousel-arrow\",\r\n          callback: () => this.changePage(1),\r\n          iconPath: arrowIconPath$1\r\n        }\r\n      )\r\n    );\r\n  }\r\n}\r\nclass UniqueCarrouselButton extends GamepadUiComponent {\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.gamepadUiComponentRef.instance.onclick = this.props.callback;\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        ref: this.gamepadUiComponentRef,\r\n        class: { \"unique-carrousel-button\": true, selected: this.props.selected }\r\n      }\r\n    );\r\n  }\r\n}\r\nclass ScrollBar extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.svgRef = FSComponent.createRef();\r\n    this.scrollBarRef = FSComponent.createRef();\r\n    this.scrollThumbRef = FSComponent.createRef();\r\n    this.scrollBarContainerRef = FSComponent.createRef();\r\n    this.scrollableContainer = null;\r\n    this.scrollListener = this.onScroll.bind(this);\r\n    this.sizeChangeTimer = null;\r\n    this.arrowPadding = 6;\r\n    this.margin = 2;\r\n    this.currentScrollHeight = 0;\r\n    this.currentThumbAreaHeight = 0;\r\n    this.scrollHeightRatio = 0;\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.scrollableContainer = this.scrollBarContainerRef.instance.previousElementSibling;\r\n    this.scrollableContainer.addEventListener(\"scroll\", this.scrollListener);\r\n    const diffAndAdjust = () => {\r\n      var _a;\r\n      if (this.currentScrollHeight !== ((_a = this.scrollableContainer) == null ? void 0 : _a.scrollHeight)) {\r\n        this.adjustScrollbarDimensions();\r\n      }\r\n    };\r\n    this.sizeChangeTimer = setInterval(diffAndAdjust, 150);\r\n    this.onScroll();\r\n  }\r\n  /**\r\n   * Adjusts the dimensions of the scrollbar elements.\r\n   */\r\n  adjustScrollbarDimensions() {\r\n    if (this.scrollableContainer) {\r\n      const parentTop = this.scrollableContainer.offsetTop;\r\n      this.scrollBarContainerRef.instance.style.top = `${parentTop + 4}px`;\r\n      this.currentScrollHeight = this.scrollableContainer.scrollHeight;\r\n      const containerHeight = this.scrollableContainer.clientHeight;\r\n      const totalMarginAndPadding = this.arrowPadding * 2 + this.margin * 2;\r\n      this.currentThumbAreaHeight = containerHeight - totalMarginAndPadding;\r\n      this.scrollHeightRatio = this.currentScrollHeight / containerHeight;\r\n      this.scrollThumbRef.instance.style.height = `${this.currentThumbAreaHeight / this.scrollHeightRatio}`.toString();\r\n      this.scrollBarContainerRef.instance.style.height = `${containerHeight}px`;\r\n      this.svgRef.instance.setAttribute(\"height\", `${containerHeight - this.margin * 2}px`);\r\n      this.scrollBarRef.instance.style.height = `${containerHeight}px`;\r\n      this.scrollBarContainerRef.instance.style.display = this.scrollHeightRatio <= 1 ? \"none\" : \"\";\r\n      this.onScroll();\r\n    }\r\n  }\r\n  /**\r\n   * Eventhandler called when a scroll event in the scrollable parent container happens.\r\n   */\r\n  onScroll() {\r\n    if (this.scrollableContainer) {\r\n      const scrollY = this.scrollableContainer.scrollTop / this.scrollableContainer.scrollHeight * this.currentThumbAreaHeight + this.arrowPadding;\r\n      if (!isNaN(scrollY)) {\r\n        this.scrollThumbRef.instance.setAttribute(\"y\", scrollY.toString());\r\n      }\r\n    }\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"scroll-bar\", ref: this.scrollBarContainerRef }, /* @__PURE__ */ FSComponent.buildComponent(\"svg\", { ref: this.svgRef }, /* @__PURE__ */ FSComponent.buildComponent(\"rect\", { ref: this.scrollBarRef, x: \"3\", y: \"6\", width: \"4\", fill: \"#707070\" }), /* @__PURE__ */ FSComponent.buildComponent(\"rect\", { ref: this.scrollThumbRef, x: \"3\", y: \"6\", width: \"4\", fill: \"#1390E3\" })));\r\n  }\r\n  destroy() {\r\n    if (this.scrollableContainer) {\r\n      this.scrollableContainer.removeEventListener(\"scroll\", this.scrollListener);\r\n    }\r\n    if (this.sizeChangeTimer !== null) {\r\n      clearInterval(this.sizeChangeTimer);\r\n    }\r\n  }\r\n}\r\nconst arrowIconPath = \"coui://html_ui/efb_ui/efb_os/Assets/icons/NoMargin/Arrow.svg\";\r\nclass DropdownButton extends GamepadUiComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.listDataset = Array.isArray(this.props.listDataset) ? ArraySubject.create(this.props.listDataset) : this.props.listDataset;\r\n    this.isListVisible = Subject.create(false);\r\n  }\r\n  /* Close the list when clicking out of it */\r\n  onClickOutOfComponent() {\r\n    this.isListVisible.set(false);\r\n  }\r\n  onAfterRender(node) {\r\n    var _a;\r\n    super.onAfterRender(node);\r\n    this.isListVisibleSub = (_a = this.props.isListVisible) == null ? void 0 : _a.sub(this.isListVisible.set);\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    (_a = this.isListVisibleSub) == null ? void 0 : _a.destroy();\r\n    super.destroy();\r\n  }\r\n  render() {\r\n    var _a;\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"dropdown-button\", ref: this.gamepadUiComponentRef }, /* @__PURE__ */ FSComponent.buildComponent(\r\n      DropdownButtonSelector,\r\n      {\r\n        class: \"button--full-width\",\r\n        key: this.props.title,\r\n        isOpen: this.isListVisible,\r\n        type: this.props.type,\r\n        callback: () => {\r\n          if (this.disabled.get()) {\r\n            return;\r\n          }\r\n          this.isListVisible.set(!this.isListVisible.get());\r\n        },\r\n        customIcon: this.props.customIcon,\r\n        showArrowIcon: this.props.showArrowIcon,\r\n        disabled: this.disabled\r\n      }\r\n    ), /* @__PURE__ */ FSComponent.buildComponent(\r\n      List,\r\n      {\r\n        class: \"dropdown-button-list\",\r\n        data: this.listDataset,\r\n        isListVisible: this.isListVisible,\r\n        isScrollable: (_a = this.props.isScrollable) != null ? _a : true,\r\n        renderItem: (item, index2) => {\r\n          const disabled = item && typeof item === \"object\" && \"disabled\" in item && SubscribableUtils.isSubscribable(item.disabled) ? item.disabled.map((v) => !!v) : void 0;\r\n          return /* @__PURE__ */ FSComponent.buildComponent(\r\n            DropdownButtonListItem,\r\n            {\r\n              disabled,\r\n              name: this.props.getItemLabel(item),\r\n              onClick: () => {\r\n                this.isListVisible.set(false);\r\n                this.props.onItemClick(item, index2);\r\n              }\r\n            }\r\n          );\r\n        }\r\n      }\r\n    ));\r\n  }\r\n}\r\nclass DropdownButtonSelector extends DisplayComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.iconScale = 1;\r\n    this.iconStyle = ObjectSubject.create({\r\n      transform: `scale(${this.iconScale}, ${this.iconScale})`\r\n    });\r\n    if (this.props.showArrowIcon) {\r\n      this.isOpenSub = this.props.isOpen.sub((isOpen) => {\r\n        this.iconStyle.set(\r\n          \"transform\",\r\n          `scale(${this.iconScale}, ${isOpen ? -1 * this.iconScale : this.iconScale})`\r\n        );\r\n      }, true);\r\n    }\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    (_a = this.isOpenSub) == null ? void 0 : _a.destroy();\r\n    super.destroy();\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      Button,\r\n      {\r\n        class: mergeClassProp(\"dropdown-button-selector\", this.props.class),\r\n        style: this.props.style,\r\n        callback: this.props.callback,\r\n        hoverable: this.props.hoverable,\r\n        selected: this.props.selected,\r\n        disabled: this.props.disabled\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(TT, { class: \"text bold-text\", key: this.props.key }),\r\n      this.props.showArrowIcon && /* @__PURE__ */ FSComponent.buildComponent(\r\n        \"icon-element\",\r\n        {\r\n          class: \"dropdown-button-selector-icon\",\r\n          \"icon-url\": arrowIconPath,\r\n          style: this.iconStyle\r\n        }\r\n      ),\r\n      this.props.customIcon\r\n    );\r\n  }\r\n}\r\nclass DropdownButtonListItem extends GamepadUiComponent {\r\n  constructor() {\r\n    var _a;\r\n    super(...arguments);\r\n    this.isButtonDisabled = SubscribableUtils.toSubscribable((_a = this.props.disabled) != null ? _a : false, true);\r\n    this.cssClassSet = SetSubject.create([\"text\", \"regular-text\"]);\r\n    this.onClick = () => {\r\n      if (!this.isButtonDisabled.get()) {\r\n        this.props.onClick();\r\n      }\r\n    };\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.isButtonDisabled.sub((x) => {\r\n      return x ? this.cssClassSet.add(\"disabled\") : this.cssClassSet.delete(\"disabled\");\r\n    }, true);\r\n    this.gamepadUiComponentRef.instance.onclick = this.onClick;\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"dropdown-button-list-item\", ref: this.gamepadUiComponentRef }, /* @__PURE__ */ FSComponent.buildComponent(TT, { key: this.props.name, type: \"div\", class: this.cssClassSet }));\r\n  }\r\n}\r\nclass IconElement extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.url = SubscribableUtils.toSubscribable(this.props.url, true);\r\n    this.el = FSComponent.createRef();\r\n    this.onSVGIconLoaded = (found, svgAsString) => {\r\n      this.el.instance.innerText = \"\";\r\n      if (!found) {\r\n        console.error(`Image ${this.url.get()} was not found`);\r\n        return;\r\n      }\r\n      const template = document.createElement(\"template\");\r\n      template.innerHTML = svgAsString;\r\n      const svgAsHtml = template.content.querySelector(\"svg\");\r\n      if (svgAsHtml) {\r\n        this.el.instance.appendChild(svgAsHtml);\r\n      }\r\n    };\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { ref: this.el, class: mergeClassProp(\"icon-element\", this.props.class) });\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.urlSub = this.url.sub((url) => {\r\n      if (url.endsWith(\".svg\")) {\r\n        getIconCacheMgr().loadURL(url, this.onSVGIconLoaded);\r\n      } else {\r\n        this.el.instance.innerHTML = `<img src=\"${url}\" onerror=\"console.error('Image ${url} was not found')\" />`;\r\n      }\r\n    }, true);\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    (_a = this.urlSub) == null ? void 0 : _a.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\nclass IconButton extends DisplayComponent {\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      Button,\r\n      {\r\n        class: mergeClassProp(\"icon-button\", this.props.class),\r\n        style: this.props.style,\r\n        callback: this.props.callback,\r\n        hoverable: this.props.hoverable,\r\n        selected: this.props.selected,\r\n        state: this.props.state,\r\n        disabled: this.props.disabled,\r\n        onboardingStepId: this.props.onboardingStepId\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(IconElement, { url: this.props.iconPath })\r\n    );\r\n  }\r\n}\r\nclass MultipleButtons extends GamepadUiComponent {\r\n  constructor() {\r\n    var _a;\r\n    super(...arguments);\r\n    this.buttonSelected = (_a = this.props.buttonSelected) != null ? _a : 0;\r\n    this.buttonRefs = [...Array(this.props.titles.length)].map(\r\n      () => FSComponent.createRef()\r\n    );\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    if (this.buttonRefs.length) {\r\n      this.buttonRefs[this.buttonSelected].instance.selectButton();\r\n    }\r\n  }\r\n  buttonCallback(buttonIndex) {\r\n    var _a, _b;\r\n    if (this.disabled.get()) {\r\n      return;\r\n    }\r\n    if (!((_b = (_a = this.props).callback) == null ? void 0 : _b.call(_a, buttonIndex))) {\r\n      this.selectButton(buttonIndex);\r\n    }\r\n  }\r\n  selectButton(buttonIndex) {\r\n    if (buttonIndex !== this.buttonSelected) {\r\n      this.unselectAllButtons();\r\n      if (buttonIndex > this.buttonRefs.length || buttonIndex < 0) {\r\n        buttonIndex = 0;\r\n      }\r\n      this.buttonSelected = buttonIndex;\r\n      this.buttonRefs[buttonIndex].instance.selectButton();\r\n    }\r\n  }\r\n  unselectAllButtons() {\r\n    this.buttonRefs.forEach((button) => button.instance.unSelectButton());\r\n  }\r\n  renderSelectableButtons() {\r\n    const buttons = [];\r\n    for (let i = 0; i < this.props.titles.length; i++) {\r\n      buttons.push(\r\n        /* @__PURE__ */ FSComponent.buildComponent(\r\n          SelectableButton$1,\r\n          {\r\n            class: \"single-button\",\r\n            title: this.props.titles[i],\r\n            ref: this.buttonRefs[i],\r\n            callback: () => this.buttonCallback(i)\r\n          }\r\n        )\r\n      );\r\n    }\r\n    return buttons;\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { ref: this.gamepadUiComponentRef, class: `multiple-buttons` }, this.renderSelectableButtons());\r\n  }\r\n}\r\nlet SelectableButton$1 = class SelectableButton extends DisplayComponent {\r\n  constructor() {\r\n    var _a;\r\n    super(...arguments);\r\n    this.selected = Subject.create((_a = this.props.selected) != null ? _a : false);\r\n  }\r\n  selectButton() {\r\n    this.selected.set(true);\r\n  }\r\n  unSelectButton() {\r\n    this.selected.set(false);\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      Button,\r\n      {\r\n        class: mergeClassProp({ selected: this.selected }, this.props.class),\r\n        style: this.props.style,\r\n        callback: this.props.callback,\r\n        hoverable: this.props.hoverable,\r\n        selected: this.props.selected,\r\n        disabled: this.props.disabled\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(TT, { class: \"title\", type: \"div\", key: this.props.title, format: \"uppercase\" })\r\n    );\r\n  }\r\n};\r\nclass TypedButton extends AbstractButton {\r\n  onAfterRender(node) {\r\n    var _a;\r\n    super.onAfterRender(node);\r\n    this.gamepadUiComponentRef.instance.classList.add((_a = this.props.type) != null ? _a : \"primary\");\r\n  }\r\n}\r\nclass SelectableButton2 extends TypedButton {\r\n  constructor() {\r\n    var _a;\r\n    super(...arguments);\r\n    this.selected = (_a = this.props.selected) != null ? _a : false;\r\n  }\r\n  selectButton() {\r\n    if (!this.selected) {\r\n      this.selected = true;\r\n      this.switchSelection(true);\r\n    }\r\n  }\r\n  unSelectButton() {\r\n    if (this.selected) {\r\n      this.selected = false;\r\n      this.switchSelection(false);\r\n    }\r\n  }\r\n  switchSelection(selected) {\r\n    this.gamepadUiComponentRef.instance.classList.toggle(\"selected\", selected);\r\n  }\r\n  buttonRender() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"selectable-button\" }, /* @__PURE__ */ FSComponent.buildComponent(TT, { class: \"title\", type: \"div\", key: this.props.title, format: \"upper\" }));\r\n  }\r\n}\r\nclass TTButton extends DisplayComponent {\r\n  render() {\r\n    var _a;\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      Button,\r\n      {\r\n        class: mergeClassProp(\"tt-button\", \"classic-button\", this.props.class),\r\n        style: this.props.style,\r\n        callback: this.props.callback,\r\n        hoverable: this.props.hoverable,\r\n        selected: this.props.selected,\r\n        state: this.props.state,\r\n        disabled: this.props.disabled\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\r\n        TT,\r\n        {\r\n          class: \"bold-text\",\r\n          key: this.props.key,\r\n          type: this.props.type,\r\n          format: (_a = this.props.format) != null ? _a : \"uppercase\",\r\n          arguments: this.props.arguments\r\n        }\r\n      )\r\n    );\r\n  }\r\n}\r\nclass ClassicButton extends Button {\r\n  buttonRender() {\r\n    var _a;\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"classic-button\" }, /* @__PURE__ */ FSComponent.buildComponent(TT, { key: this.props.title, format: (_a = this.props.format) != null ? _a : \"upper\", type: \"div\", class: \"bold-text\" }));\r\n  }\r\n}\r\nclass TabSelector extends GamepadUiComponent {\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        ref: this.gamepadUiComponentRef,\r\n        class: {\r\n          \"tab-selector\": true,\r\n          active: this.props.active,\r\n          hidden: this.props.hidden\r\n        }\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"disabled-layer\" }),\r\n      /* @__PURE__ */ FSComponent.buildComponent(TT, { key: this.props.tabName, class: \"text\", format: \"ucfirst\" }),\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"state\" })\r\n    );\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    if (this.props.callback) {\r\n      this.gamepadUiComponentRef.instance.onclick = (e) => {\r\n        var _a;\r\n        if (SubscribableUtils.toSubscribable(this.props.disabled, true).get() === true) {\r\n          return;\r\n        }\r\n        (_a = this.props.callback) == null ? void 0 : _a.call(e);\r\n      };\r\n    }\r\n  }\r\n}\r\nclass AccordionButton extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.iconStyle = Subject.create(\"rotate(0)\");\r\n    this.isFoldedSubscription = this.props.isFolded.sub((isFolded) => {\r\n      this.iconStyle.set(`rotate(${isFolded ? 0 : -0.5}turn)`);\r\n    }, true);\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      Button,\r\n      {\r\n        class: mergeClassProp(\"accordion-button\", this.props.class),\r\n        style: this.props.style,\r\n        callback: this.props.callback,\r\n        hoverable: this.props.hoverable,\r\n        selected: this.props.selected,\r\n        state: this.props.state,\r\n        disabled: this.props.disabled\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"icon-container\", style: { transform: this.iconStyle } }, /* @__PURE__ */ FSComponent.buildComponent(\r\n        IconElement,\r\n        {\r\n          class: \"accordion-button-icon\",\r\n          url: `coui://html_ui/efb_ui/efb_os/Assets/icons/Arrow.svg`\r\n        }\r\n      )),\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"title\" }, this.props.children)\r\n    );\r\n  }\r\n  destroy() {\r\n    this.isFoldedSubscription.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\nclass AbstractAccordion extends GamepadUiComponent {\r\n  constructor() {\r\n    var _a;\r\n    super(...arguments);\r\n    this.isFolded = SubscribableUtils.isMutableSubscribable(this.props.isFolded) ? this.props.isFolded : Subject.create((_a = this.props.isFolded) != null ? _a : true);\r\n  }\r\n  renderBody() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(FSComponent.Fragment, null, this.props.children);\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: { accordion: true, folded: this.isFolded }, ref: this.gamepadUiComponentRef }, /* @__PURE__ */ FSComponent.buildComponent(\r\n      AccordionButton,\r\n      {\r\n        isFolded: this.isFolded,\r\n        disabled: this.props.disabled,\r\n        class: \"accordion-button abstract-button--full-width\",\r\n        callback: () => {\r\n          this.isFolded.set(!this.isFolded.get());\r\n        }\r\n      },\r\n      this.renderHeader()\r\n    ), /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: { \"menu-content\": true, hide: this.isFolded } }, this.renderBody()));\r\n  }\r\n}\r\nclass ElementAccordion extends AbstractAccordion {\r\n  renderHeader() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(FSComponent.Fragment, null, value(this.props.header));\r\n  }\r\n}\r\nclass StringAccordion extends AbstractAccordion {\r\n  renderHeader() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(TT, { key: this.props.title, format: \"ucfirst\" });\r\n  }\r\n}\r\nconst _BearingDisplay = class _BearingDisplay extends AbstractNumberUnitDisplay {\r\n  constructor() {\r\n    var _a;\r\n    super(...arguments);\r\n    this.unitFormatter = (_a = this.props.unitFormatter) != null ? _a : _BearingDisplay.DEFAULT_UNIT_FORMATTER;\r\n    this.unitTextBigDisplay = Subject.create(\"\");\r\n    this.unitTextSmallDisplay = Subject.create(\"\");\r\n    this.numberText = Subject.create(\"\");\r\n    this.unitTextBig = Subject.create(\"\");\r\n    this.unitTextSmall = Subject.create(\"\");\r\n  }\r\n  /** @inheritdoc */\r\n  onValueChanged(value2) {\r\n    let displayUnit = this.displayUnit.get();\r\n    if (!displayUnit || !value2.unit.canConvert(displayUnit)) {\r\n      displayUnit = value2.unit;\r\n    }\r\n    const numberValue = value2.asUnit(displayUnit);\r\n    this.updateNumberText(numberValue);\r\n    this.updateUnitText(numberValue, displayUnit);\r\n    if (this.props.hideDegreeSymbolWhenNan === true) {\r\n      this.updateUnitTextVisibility(numberValue);\r\n    }\r\n  }\r\n  /** @inheritdoc */\r\n  onDisplayUnitChanged(displayUnit) {\r\n    const value2 = this.value.get();\r\n    if (!displayUnit || !value2.unit.canConvert(displayUnit)) {\r\n      displayUnit = value2.unit;\r\n    }\r\n    const numberValue = value2.asUnit(displayUnit);\r\n    this.updateNumberText(numberValue);\r\n    this.updateUnitText(numberValue, displayUnit);\r\n    this.updateUnitTextVisibility(numberValue);\r\n  }\r\n  /**\r\n   * Updates this component's displayed number text.\r\n   * @param numberValue The numeric value to display.\r\n   */\r\n  updateNumberText(numberValue) {\r\n    let numberText = this.props.formatter(numberValue);\r\n    if (this.props.use360 !== false && parseFloat(numberText) === 0) {\r\n      numberText = this.props.formatter(360);\r\n    }\r\n    this.numberText.set(numberText);\r\n  }\r\n  /**\r\n   * Updates this component's displayed unit text.\r\n   * @param numberValue The numeric value to display.\r\n   * @param displayUnit The unit type in which to display the value.\r\n   */\r\n  updateUnitText(numberValue, displayUnit) {\r\n    _BearingDisplay.unitTextCache[0] = \"\";\r\n    _BearingDisplay.unitTextCache[1] = \"\";\r\n    this.unitFormatter(_BearingDisplay.unitTextCache, displayUnit, numberValue);\r\n    this.unitTextBig.set(_BearingDisplay.unitTextCache[0]);\r\n    this.unitTextSmall.set(_BearingDisplay.unitTextCache[1]);\r\n  }\r\n  /**\r\n   * Updates whether this component's unit text spans are visible.\r\n   * @param numberValue The numeric value displayed by this component.\r\n   */\r\n  updateUnitTextVisibility(numberValue) {\r\n    if (this.props.hideDegreeSymbolWhenNan === true) {\r\n      if (isNaN(numberValue)) {\r\n        this.unitTextBigDisplay.set(\"none\");\r\n        this.unitTextSmallDisplay.set(\"none\");\r\n        return;\r\n      }\r\n    }\r\n    this.unitTextBigDisplay.set(this.unitTextBig.get() === \"\" ? \"none\" : \"\");\r\n    this.unitTextSmallDisplay.set(this.unitTextSmall.get() === \"\" ? \"none\" : \"\");\r\n  }\r\n  /** @inheritdoc */\r\n  render() {\r\n    var _a;\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: (_a = this.props.class) != null ? _a : \"\", style: \"white-space: nowrap;\" }, /* @__PURE__ */ FSComponent.buildComponent(\"span\", { class: \"bearing-num\" }, this.numberText), /* @__PURE__ */ FSComponent.buildComponent(\"span\", { class: \"bearing-unit\", style: { display: this.unitTextBigDisplay } }, this.unitTextBig), /* @__PURE__ */ FSComponent.buildComponent(\"span\", { class: \"bearing-unit-small\", style: { display: this.unitTextSmallDisplay } }, this.unitTextSmall));\r\n  }\r\n};\r\n_BearingDisplay.DEFAULT_UNIT_FORMATTER = (out, unit) => {\r\n  out[0] = \"\u00B0\";\r\n  out[1] = unit.isMagnetic() ? \"\" : \"T\";\r\n};\r\n_BearingDisplay.unitTextCache = [\"\", \"\"];\r\nlet BearingDisplay = _BearingDisplay;\r\nconst INTERNAL_KEY_SEPARATOR = \"__MSFS2024_INTERNAL_DATE_ANA_ACE__\";\r\nconst FormatKeys = [\"YYYY\", \"YY\", \"MMMM\", \"MMM\", \"MM\", \"DDDD\", \"DD\", \"hh\", \"mm\", \"ss\"];\r\nconst dateToValue = {\r\n  YYYY: (date) => date.getFullYear().toString(),\r\n  YY: (date) => (date.getFullYear() % 100).toString().padStart(2, \"0\"),\r\n  MMMM: (date) => monthKeys[date.getMonth()],\r\n  MMM: (date) => monthShortKeys[date.getMonth()],\r\n  MM: (date) => (date.getMonth() + 1).toString().padStart(2, \"0\"),\r\n  DDDD: (date) => dayKeys[date.getDay()],\r\n  DD: (date) => date.getDate().toString().padStart(2, \"0\"),\r\n  hh: (date) => date.getHours().toString().padStart(2, \"0\"),\r\n  mm: (date) => date.getMinutes().toString().padStart(2, \"0\"),\r\n  ss: (date) => date.getSeconds().toString().padStart(2, \"0\")\r\n};\r\nconst formatToInternalKey = {\r\n  YYYY: \"FULLYEAR\",\r\n  YY: \"SHORTYEAR\",\r\n  MMMM: \"FULLMONTH\",\r\n  MMM: \"SHORTMONTH\",\r\n  MM: \"DIGITMONTH\",\r\n  DDDD: \"FULLDAY\",\r\n  DD: \"DIGITDAY\",\r\n  hh: \"HOURS\",\r\n  mm: \"MINUTES\",\r\n  ss: \"SECONDS\"\r\n};\r\nclass DateDisplay extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.ready = Subject.create(false);\r\n    this.date = SubscribableUtils.toSubscribable(this.props.date, true);\r\n    this.format = SubscribableUtils.toSubscribable(this.props.format, true);\r\n    this.dateSubscription = this.date.sub((date) => this.updateDate(date));\r\n    this.formatSubscription = this.format.sub((format) => {\r\n      this.renderFormat(this.date.get(), format);\r\n    });\r\n    this.dateSpanRef = FSComponent.createRef();\r\n    this.dateNodes = [];\r\n    this.cachedSubject = {\r\n      YYYY: Subject.create(\"\"),\r\n      YY: Subject.create(\"\"),\r\n      MMMM: Subject.create(\"\"),\r\n      MMM: Subject.create(\"\"),\r\n      MM: Subject.create(\"\"),\r\n      DDDD: Subject.create(\"\"),\r\n      DD: Subject.create(\"\"),\r\n      hh: Subject.create(\"\"),\r\n      mm: Subject.create(\"\"),\r\n      ss: Subject.create(\"\")\r\n    };\r\n  }\r\n  renderFormat(rawDate, format) {\r\n    if (!this.ready.get()) {\r\n      return;\r\n    }\r\n    this.dateNodes.forEach((node) => FSComponent.shallowDestroy(node));\r\n    this.dateSpanRef.instance.innerHTML = \"\";\r\n    this.updateDate(rawDate);\r\n    let editedFormat = format;\r\n    for (const key in formatToInternalKey) {\r\n      editedFormat = editedFormat.replace(\r\n        key,\r\n        `${INTERNAL_KEY_SEPARATOR}${formatToInternalKey[key]}${INTERNAL_KEY_SEPARATOR}`\r\n      );\r\n    }\r\n    const splittedFormat = editedFormat.split(INTERNAL_KEY_SEPARATOR);\r\n    for (const part of splittedFormat) {\r\n      const foundKey = FormatKeys.find((key) => formatToInternalKey[key] === part);\r\n      if (foundKey !== void 0) {\r\n        this.dateNodes.push(/* @__PURE__ */ FSComponent.buildComponent(TT, { key: this.cachedSubject[foundKey] }));\r\n      } else {\r\n        this.dateNodes.push(/* @__PURE__ */ FSComponent.buildComponent(\"span\", null, part));\r\n      }\r\n    }\r\n    FSComponent.render(/* @__PURE__ */ FSComponent.buildComponent(FSComponent.Fragment, null, this.dateNodes), this.dateSpanRef.instance);\r\n  }\r\n  updateDate(rawDate) {\r\n    if (!this.ready.get()) {\r\n      return;\r\n    }\r\n    const date = new Date(rawDate);\r\n    for (const key in this.cachedSubject) {\r\n      this.cachedSubject[key].set(dateToValue[key](date));\r\n    }\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.ready.set(true);\r\n    this.renderFormat(this.date.get(), this.format.get());\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"span\", { style: this.props.style, class: toClassProp(this.props.class), ref: this.dateSpanRef });\r\n  }\r\n  destroy() {\r\n    this.dateSubscription.destroy();\r\n    this.formatSubscription.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\nclass RunwaySelector extends GamepadUiComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.runways = ArraySubject.create();\r\n    this.currentRunwayName = MappedSubject.create(\r\n      ([facility, currentRunway]) => {\r\n        const runways = facility && FacilityUtils.isFacilityType(facility, FacilityType.Airport) ? RunwayUtils.getOneWayRunwaysFromAirport(facility) : [];\r\n        this.runways.set(runways);\r\n        const runwayIndex = typeof currentRunway === \"number\" ? currentRunway : runways.findIndex((runway) => runway.designation === currentRunway.designation);\r\n        return runwayIndex >= 0 && runwayIndex < runways.length ? getRunwayName(runways[runwayIndex], this.props.runwayNameShortened) : \"\";\r\n      },\r\n      this.props.facility,\r\n      this.props.currentRunway\r\n    );\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        class: {\r\n          \"runway-selector\": true,\r\n          hide: this.currentRunwayName.map((name) => !name)\r\n        },\r\n        ref: this.gamepadUiComponentRef\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\r\n        DropdownButton,\r\n        {\r\n          title: this.currentRunwayName,\r\n          type: \"secondary\",\r\n          listDataset: this.runways,\r\n          getItemLabel: (item) => getRunwayName(item, this.props.runwayNameShortened),\r\n          disabled: this.props.disabled,\r\n          onItemClick: (runway, index2) => {\r\n            this.props.onRunwaySelected(runway, index2);\r\n          },\r\n          showArrowIcon: true\r\n        }\r\n      )\r\n    );\r\n  }\r\n  /** @inheritdoc */\r\n  destroy() {\r\n    this.currentRunwayName.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\nclass Input extends GamepadUiComponent {\r\n  constructor() {\r\n    var _a, _b;\r\n    super(...arguments);\r\n    this.uuid = UUID.GenerateUuid();\r\n    this.inputRef = this.gamepadUiComponentRef;\r\n    this.model = this.props.model || Subject.create(SubscribableUtils.toSubscribable(this.props.value || \"\", true).get());\r\n    this.internalInputManager = new InternalInputManager(InternalInputActions);\r\n    this.dispatchFocusOutEvent = this._dispatchFocusOutEvent.bind(this);\r\n    this.setValueFromOS = this._setValueFromOS.bind(this);\r\n    this.onKeyDown = this._onKeyDown.bind(this);\r\n    this.onKeyUp = this._onKeyUp.bind(this);\r\n    this.onKeyPress = this._onKeyPress.bind(this);\r\n    this.onInput = this._onInput.bind(this);\r\n    this.align = this.props.align || \"left\";\r\n    this.debounce = new DebounceTimer();\r\n    this.reloadLocalisation = this._reloadLocalisation.bind(this);\r\n    this._isFocused = Subject.create(false);\r\n    this.isFocused = this._isFocused;\r\n    this.focusSubscription = this._isFocused.sub((focus) => {\r\n      if (focus) {\r\n        this.onFocusIn();\r\n      } else {\r\n        this.onFocusOut();\r\n      }\r\n    });\r\n    this.placeholderKey = SubscribableUtils.toSubscribable((_a = this.props.placeholder) != null ? _a : \"\", true);\r\n    this.placeholderShown = Subject.create(true);\r\n    this.placeholderTranslation = Subject.create(this.placeholderKey.get());\r\n    this.hidePlaceholderOnFocus = (_b = this.props.hidePlaceholderOnFocus) != null ? _b : false;\r\n    this.subs = [];\r\n  }\r\n  _reloadLocalisation() {\r\n    this.placeholderTranslation.notify();\r\n  }\r\n  _onKeyDown(event) {\r\n    var _a, _b;\r\n    (_b = (_a = this.props).onKeyDown) == null ? void 0 : _b.call(_a, event);\r\n  }\r\n  _onKeyUp(event) {\r\n    var _a, _b;\r\n    (_b = (_a = this.props).onKeyUp) == null ? void 0 : _b.call(_a, event);\r\n  }\r\n  _onKeyPress(event) {\r\n    var _a, _b;\r\n    const keyCode = event.keyCode || event.which;\r\n    (_b = (_a = this.props).onKeyPress) == null ? void 0 : _b.call(_a, event);\r\n    if (event.defaultPrevented) {\r\n      return;\r\n    }\r\n    if (this.props.charFilter && !this.props.charFilter(String.fromCharCode(keyCode))) {\r\n      event.preventDefault();\r\n      return;\r\n    }\r\n  }\r\n  _onInput() {\r\n    var _a;\r\n    this.debounce.schedule(() => {\r\n      const value2 = this.inputRef.instance.value;\r\n      if (value2 === this.model.get()) {\r\n        return;\r\n      }\r\n      this.model.set(value2);\r\n    }, (_a = this.props.debounceDuration) != null ? _a : 0);\r\n  }\r\n  onInputUpdated(value2) {\r\n    var _a, _b;\r\n    this.inputRef.instance.value = value2;\r\n    (_b = (_a = this.props).onInput) == null ? void 0 : _b.call(_a, this.inputRef.instance);\r\n    if (!this.hidePlaceholderOnFocus && value2.length === 0) {\r\n      this.placeholderShown.set(true);\r\n    }\r\n  }\r\n  onFocusIn() {\r\n    var _a, _b;\r\n    Coherent.trigger(\"FOCUS_INPUT_FIELD\", {\r\n      // TODO Allow the following parameters to be customized via props\r\n      title: \"Title\",\r\n      description: \"\",\r\n      default_text: \"\",\r\n      is_numeric: this.props.type === \"number\",\r\n      is_efb: true\r\n    });\r\n    Coherent.on(\"mousePressOutsideView\", this.dispatchFocusOutEvent);\r\n    Coherent.on(\"SetInputTextFromOS\", this.setValueFromOS);\r\n    this.focusOutActionDestructor = this.internalInputManager.addInputAction(\r\n      InternalInputAction.BACK,\r\n      () => {\r\n        this.dispatchFocusOutEvent();\r\n        return true;\r\n      }\r\n    );\r\n    this.validateInputActionDestructor = this.internalInputManager.addInputAction(\r\n      InternalInputAction.TEXTBOX_VALID,\r\n      () => {\r\n        var _a2, _b2;\r\n        (_b2 = (_a2 = this.props).onValueValidated) == null ? void 0 : _b2.call(_a2, this.inputRef.instance.value);\r\n        this.dispatchFocusOutEvent();\r\n        return true;\r\n      }\r\n    );\r\n    if (this.hidePlaceholderOnFocus && this.inputRef.instance.value.length === 0) {\r\n      this.placeholderShown.set(false);\r\n    }\r\n    (_b = (_a = this.props).onFocusIn) == null ? void 0 : _b.call(_a);\r\n  }\r\n  onFocusOut() {\r\n    var _a, _b, _c, _d;\r\n    (_a = this.focusOutActionDestructor) == null ? void 0 : _a.call(this);\r\n    (_b = this.validateInputActionDestructor) == null ? void 0 : _b.call(this);\r\n    Coherent.trigger(\"UNFOCUS_INPUT_FIELD\", this.uuid);\r\n    Coherent.off(\"mousePressOutsideView\", this.dispatchFocusOutEvent);\r\n    Coherent.off(\"SetInputTextFromOS\", this.setValueFromOS);\r\n    if (this.hidePlaceholderOnFocus && this.inputRef.instance.value.length === 0) {\r\n      this.placeholderShown.set(true);\r\n    }\r\n    (_d = (_c = this.props).onFocusOut) == null ? void 0 : _d.call(_c);\r\n  }\r\n  value() {\r\n    return this.model.get();\r\n  }\r\n  clearInput() {\r\n    this.model.set(\"\");\r\n  }\r\n  focus() {\r\n    const inputInstance = this.inputRef.getOrDefault();\r\n    if (inputInstance !== null) {\r\n      inputInstance.focus();\r\n    }\r\n  }\r\n  blur() {\r\n    const inputInstance = this.inputRef.getOrDefault();\r\n    if (inputInstance !== null) {\r\n      inputInstance.blur();\r\n    }\r\n  }\r\n  _dispatchFocusOutEvent() {\r\n    const inputInstance = this.inputRef.getOrDefault();\r\n    if (inputInstance !== null) {\r\n      inputInstance.blur();\r\n      inputInstance.dispatchEvent(new InputEvent(\"focusout\"));\r\n    }\r\n  }\r\n  _setValueFromOS(text) {\r\n    var _a, _b;\r\n    const inputInstance = this.inputRef.getOrDefault();\r\n    if (inputInstance !== null) {\r\n      inputInstance.value = text;\r\n      inputInstance.dispatchEvent(new InputEvent(\"change\"));\r\n      inputInstance.dispatchEvent(new InputEvent(\"input\"));\r\n      inputInstance.dispatchEvent(new InputEvent(\"submit\"));\r\n      (_b = (_a = this.props).onValueValidated) == null ? void 0 : _b.call(_a, text);\r\n      this.dispatchFocusOutEvent();\r\n    }\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"input\",\r\n      {\r\n        id: this.uuid,\r\n        ref: this.inputRef,\r\n        type: this.props.type,\r\n        class: {\r\n          [`align-${this.align}`]: this.align !== \"left\"\r\n        },\r\n        placeholder: MappedSubject.create(\r\n          ([placeholderShown, placeholderKey]) => {\r\n            return placeholderShown ? Utils.Translate(placeholderKey) : \"\";\r\n          },\r\n          this.placeholderShown,\r\n          this.placeholderKey\r\n        ),\r\n        disabled: this.props.disabled,\r\n        value: SubscribableUtils.toSubscribable(this.props.model || this.props.value || \"\", true).get()\r\n      }\r\n    );\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.subs.push(\r\n      this.model.sub((value2) => {\r\n        this.onInputUpdated(value2);\r\n      }, true),\r\n      this.placeholderKey.sub((key) => {\r\n        this.placeholderTranslation.set(key);\r\n      }, true)\r\n    );\r\n    this.inputRef.instance.addEventListener(\"focus\", () => this._isFocused.set(true));\r\n    this.inputRef.instance.addEventListener(\"focusout\", () => this._isFocused.set(false));\r\n    this.inputRef.instance.addEventListener(\"input\", this.onInput);\r\n    this.inputRef.instance.addEventListener(\"keydown\", this.onKeyDown);\r\n    this.inputRef.instance.addEventListener(\"keyup\", this.onKeyUp);\r\n    this.inputRef.instance.addEventListener(\"keypress\", this.onKeyPress);\r\n    Coherent.on(\"RELOAD_LOCALISATION\", this.reloadLocalisation);\r\n    if (this.props.focusOnInit) {\r\n      this.focus();\r\n    }\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    this.subs.forEach((s) => s.destroy());\r\n    this.focusSubscription.destroy();\r\n    (_a = this.focusOutActionDestructor) == null ? void 0 : _a.call(this);\r\n    if (this._isFocused.get()) {\r\n      Coherent.trigger(\"UNFOCUS_INPUT_FIELD\", this.uuid);\r\n      Coherent.off(\"mousePressOutsideView\", this.dispatchFocusOutEvent);\r\n      Coherent.off(\"SetInputTextFromOS\", this.setValueFromOS);\r\n    }\r\n    this.inputRef.instance.removeEventListener(\"keydown\", this.onKeyDown);\r\n    this.inputRef.instance.removeEventListener(\"keyup\", this.onKeyUp);\r\n    this.inputRef.instance.removeEventListener(\"keypress\", this.onKeyPress);\r\n    this.inputRef.instance.removeEventListener(\"input\", this.onInput);\r\n    Coherent.off(\"RELOAD_LOCALISATION\", this.reloadLocalisation);\r\n    super.destroy();\r\n  }\r\n}\r\nconst addIconPath = \"coui://html_ui/efb_ui/efb_os/Assets/icons/NoMargin/Close.svg\";\r\nclass TextBox extends GamepadUiComponent {\r\n  constructor() {\r\n    var _a, _b;\r\n    super(...arguments);\r\n    this.subscriptions = [];\r\n    this.inputRef = FSComponent.createRef();\r\n    this.model = this.props.model || Subject.create(SubscribableUtils.toSubscribable(this.props.value || \"\", true).get());\r\n    this.hideDeleteTextButton = Subject.create(true);\r\n    this.onDelete = this._onDelete.bind(this);\r\n    this.onmousedown = (e) => {\r\n      e.preventDefault();\r\n      if (!this.inputRef.instance.isFocused.get()) {\r\n        this.inputRef.instance.focus();\r\n      }\r\n    };\r\n    this.prefix = SubscribableUtils.toSubscribable(\r\n      this.props.prefix || \"\",\r\n      true\r\n    );\r\n    this.suffix = SubscribableUtils.toSubscribable(\r\n      this.props.suffix || \"\",\r\n      true\r\n    );\r\n    this.showPrefix = SubscribableUtils.toSubscribable((_a = this.props.showPrefix) != null ? _a : true, true);\r\n    this.showSuffix = SubscribableUtils.toSubscribable((_b = this.props.showSuffix) != null ? _b : true, true);\r\n    this.prefixRef = FSComponent.createRef();\r\n    this.suffixRef = FSComponent.createRef();\r\n    this.showPrefixOrSuffixMapFunction = ([value2, show]) => {\r\n      return !show || value2.toString().length === 0;\r\n    };\r\n  }\r\n  _onDelete(event) {\r\n    var _a, _b;\r\n    event.preventDefault();\r\n    this.hideDeleteTextButton.set(true);\r\n    this.inputRef.instance.clearInput();\r\n    (_b = (_a = this.props).onDelete) == null ? void 0 : _b.call(_a);\r\n    if (this.props.focusOnClear) {\r\n      this.inputRef.instance.focus();\r\n    }\r\n  }\r\n  onInput(input) {\r\n    var _a, _b;\r\n    (_b = (_a = this.props).onInput) == null ? void 0 : _b.call(_a, input);\r\n    if (this.props.showDeleteIcon) {\r\n      this.hideDeleteTextButton.set(input.value.trim().length === 0);\r\n    }\r\n  }\r\n  onFocusIn() {\r\n    var _a, _b;\r\n    (_b = (_a = this.props).onFocusIn) == null ? void 0 : _b.call(_a);\r\n    this.gamepadUiComponentRef.instance.classList.add(\"textbox--focused\");\r\n  }\r\n  onFocusOut() {\r\n    var _a, _b;\r\n    (_b = (_a = this.props).onFocusOut) == null ? void 0 : _b.call(_a);\r\n    this.gamepadUiComponentRef.instance.classList.remove(\"textbox--focused\");\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { ref: this.gamepadUiComponentRef, class: \"textbox\" }, /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"disabled-layer\" }), /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        ref: this.prefixRef,\r\n        class: {\r\n          prefix: true,\r\n          \"prefix--hidden\": MappedSubject.create(this.prefix, this.showPrefix).map(\r\n            this.showPrefixOrSuffixMapFunction\r\n          )\r\n        }\r\n      }\r\n    ), /* @__PURE__ */ FSComponent.buildComponent(\r\n      Input,\r\n      {\r\n        ref: this.inputRef,\r\n        type: \"text\",\r\n        align: this.props.align,\r\n        model: this.model,\r\n        placeholder: this.props.placeholder,\r\n        disabled: this.props.disabled,\r\n        hidePlaceholderOnFocus: this.props.hidePlaceholderOnFocus,\r\n        focusOnInit: this.props.focusOnInit,\r\n        onFocusIn: this.onFocusIn.bind(this),\r\n        onFocusOut: this.onFocusOut.bind(this),\r\n        onInput: this.onInput.bind(this),\r\n        onValueValidated: this.props.onValueValidated,\r\n        debounceDuration: this.props.debounceDuration,\r\n        onKeyDown: this.props.onKeyDown,\r\n        onKeyUp: this.props.onKeyUp,\r\n        onKeyPress: this.props.onKeyPress,\r\n        charFilter: this.props.charFilter\r\n      }\r\n    ), /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        ref: this.suffixRef,\r\n        class: {\r\n          suffix: true,\r\n          \"suffix--hidden\": MappedSubject.create(this.suffix, this.showSuffix).map(\r\n            this.showPrefixOrSuffixMapFunction\r\n          )\r\n        }\r\n      }\r\n    ), this.props.showDeleteIcon && /* @__PURE__ */ FSComponent.buildComponent(\r\n      IconButton,\r\n      {\r\n        class: mergeClassProp(\"delete-text-button\", { hide: this.hideDeleteTextButton }),\r\n        iconPath: addIconPath,\r\n        callback: this.onDelete\r\n      }\r\n    ));\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    const prefixSuffixCb = (reference) => {\r\n      let previousNode = null;\r\n      return (value2) => {\r\n        if (previousNode) {\r\n          FSComponent.shallowDestroy(previousNode);\r\n          const instance = previousNode.instance;\r\n          if (instance && instance instanceof DisplayComponent) {\r\n            instance.destroy();\r\n          }\r\n          previousNode = null;\r\n        }\r\n        if (typeof value2 === \"string\") {\r\n          reference.instance.innerText = value2;\r\n        } else if (typeof value2 === \"object\" && isVNode(value2)) {\r\n          previousNode = value2;\r\n          reference.instance.innerHTML = \"\";\r\n          FSComponent.render(value2, reference.instance);\r\n        } else {\r\n          reference.instance.innerText = value2;\r\n        }\r\n      };\r\n    };\r\n    this.subscriptions.push(\r\n      this.prefix.sub(prefixSuffixCb(this.prefixRef), true),\r\n      this.suffix.sub(prefixSuffixCb(this.suffixRef), true)\r\n    );\r\n    this.gamepadUiComponentRef.instance.addEventListener(\"mousedown\", this.onmousedown);\r\n  }\r\n  destroy() {\r\n    this.gamepadUiComponentRef.instance.removeEventListener(\"mousedown\", this.onmousedown);\r\n    this.subscriptions.forEach((s) => s.destroy());\r\n    super.destroy();\r\n  }\r\n}\r\nconst _UnitBox = class _UnitBox extends GamepadUiComponent {\r\n  constructor() {\r\n    var _a, _b;\r\n    super(...arguments);\r\n    this.valueNumber = this.props.value;\r\n    this.unit = SubscribableUtils.toSubscribable((_a = this.props.unit) != null ? _a : null, true);\r\n    this.showUnitSuffix = SubscribableUtils.toSubscribable((_b = this.props.showSuffix) != null ? _b : true, true);\r\n    this.textValue = Subject.create(\"0\");\r\n    this.formattedTextValue = Subject.create(\"0\");\r\n    this.subs = [];\r\n    this.canUpdateDisplay = true;\r\n    this.suffixSmall = Subject.create(\"\");\r\n    this.suffixBig = Subject.create(\"\");\r\n  }\r\n  static createDefaultUnitTextMap() {\r\n    const originalMap = UnitFormatter.getUnitTextMap();\r\n    const map = {};\r\n    for (const family in originalMap) {\r\n      const nameMap = map[family] = {};\r\n      const originalNameMap = originalMap[family];\r\n      for (const name in originalNameMap) {\r\n        const text = nameMap[name] = [\"\", \"\"];\r\n        const originalText = originalNameMap[name];\r\n        if (originalText[0].startsWith(\"\u00B0\")) {\r\n          text[0] = \"\u00B0\";\r\n          text[1] = originalText.substring(1);\r\n        } else {\r\n          text[1] = originalText;\r\n        }\r\n      }\r\n    }\r\n    return map;\r\n  }\r\n  setValue(value2, displayUnit) {\r\n    var _a;\r\n    if (!displayUnit || !value2.unit.canConvert(displayUnit)) {\r\n      displayUnit = value2.unit;\r\n    }\r\n    let numberValue = value2.asUnit(displayUnit);\r\n    if (this.props.min && numberValue < this.props.min.asUnit(displayUnit)) {\r\n      numberValue = this.props.min.asUnit(displayUnit);\r\n    }\r\n    if (this.props.max && numberValue > this.props.max.asUnit(displayUnit)) {\r\n      numberValue = this.props.max.asUnit(displayUnit);\r\n    }\r\n    if (numberValue >= 9999999) {\r\n      this.textValue.set(\"9999999\");\r\n      return;\r\n    }\r\n    const numberText = NumberFormatter.create(__spreadValues({\r\n      nanString: \"0\"\r\n    }, (_a = this.props.numberFormatterOptions) != null ? _a : {}))(numberValue);\r\n    if (numberText.includes(\".\")) {\r\n      const dotPos = numberText.indexOf(\".\");\r\n      this.textValue.set(numberText.substring(0, dotPos + 3));\r\n    } else {\r\n      this.textValue.set(this.textValue.get().includes(\".\") ? `${numberText}.` : numberText);\r\n    }\r\n    const unitTexts = _UnitBox.DEFAULT_UNIT_FORMATTER(displayUnit);\r\n    if (unitTexts === null) {\r\n      this.suffixSmall.set(\"\");\r\n      this.suffixBig.set(\"\");\r\n      return;\r\n    }\r\n    this.suffixSmall.set(unitTexts[0]);\r\n    this.suffixBig.set(unitTexts[1]);\r\n  }\r\n  updateDisplay() {\r\n    var _a, _b;\r\n    (_b = (_a = this.props).onFocusOut) == null ? void 0 : _b.call(_a);\r\n    if (this.canUpdateDisplay) {\r\n      this.formattedTextValue.set(this.textValue.get());\r\n    }\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        ref: this.gamepadUiComponentRef,\r\n        class: { unitbox: true, \"unitbox--disabled\": this.props.disabled || false }\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\r\n        TextBox,\r\n        {\r\n          align: \"right\",\r\n          showDeleteIcon: this.props.showDeleteIcon || false,\r\n          customDeleteIcon: this.props.customDeleteIcon,\r\n          focusOnClear: this.props.focusOnClear,\r\n          onDelete: this.props.onDelete,\r\n          model: this.formattedTextValue,\r\n          placeholder: this.props.placeholder,\r\n          hidePlaceholderOnFocus: this.props.hidePlaceholderOnFocus,\r\n          disabled: this.props.disabled,\r\n          focusOnInit: this.props.focusOnInit,\r\n          onFocusIn: this.props.onFocusIn,\r\n          onFocusOut: this.updateDisplay.bind(this),\r\n          onInput: this.props.onInput,\r\n          onKeyPress: this.props.onKeyPress,\r\n          charFilter: (char) => char >= \"0\" && char <= \"9\" || [\",\", \".\", \"-\"].includes(char),\r\n          suffix: /* @__PURE__ */ FSComponent.buildComponent(FSComponent.Fragment, null, /* @__PURE__ */ FSComponent.buildComponent(\"span\", null, this.suffixSmall), /* @__PURE__ */ FSComponent.buildComponent(\"span\", null, this.suffixBig)),\r\n          showSuffix: this.showUnitSuffix\r\n        }\r\n      )\r\n    );\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.subs.push(\r\n      this.formattedTextValue.sub((value2) => {\r\n        value2 = value2.replace(\",\", \".\").replace(/\\.+$/, \"\");\r\n        let displayUnit = this.unit.get();\r\n        if (!displayUnit || !this.valueNumber.get().unit.canConvert(displayUnit)) {\r\n          displayUnit = this.valueNumber.get().unit;\r\n        }\r\n        const unitValue = displayUnit.convertTo(Number(value2), this.valueNumber.get().unit);\r\n        this.canUpdateDisplay = false;\r\n        this.valueNumber.set(unitValue);\r\n        this.canUpdateDisplay = true;\r\n      }),\r\n      this.valueNumber.sub((value2) => {\r\n        this.setValue(value2, this.unit.get());\r\n        this.updateDisplay();\r\n      }, true),\r\n      this.unit.sub((unit) => {\r\n        this.setValue(this.valueNumber.get(), unit);\r\n        this.updateDisplay();\r\n      }, true)\r\n    );\r\n  }\r\n  destroy() {\r\n    this.subs.forEach((s) => s.destroy());\r\n    super.destroy();\r\n  }\r\n};\r\n_UnitBox.DEFAULT_UNIT_TEXT_MAP = _UnitBox.createDefaultUnitTextMap();\r\n_UnitBox.DEFAULT_UNIT_FORMATTER = (unit) => {\r\n  var _a;\r\n  const text = (_a = _UnitBox.DEFAULT_UNIT_TEXT_MAP[unit.family]) == null ? void 0 : _a[unit.name];\r\n  if (text) {\r\n    return text;\r\n  }\r\n  return null;\r\n};\r\nlet UnitBox = _UnitBox;\r\nclass UnitsBox extends GamepadUiComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.inputSub = Subject.create(\"\");\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"units-box-container\", ref: this.gamepadUiComponentRef }, /* @__PURE__ */ FSComponent.buildComponent(\r\n      Input,\r\n      {\r\n        type: \"text\",\r\n        model: this.inputSub,\r\n        class: \"units-box light-text\",\r\n        charFilter: (char) => char >= \"0\" && char <= \"9\",\r\n        onFocusOut: () => {\r\n          var _a;\r\n          let value2 = parseInt(this.inputSub.get());\r\n          if (Number.isNaN(value2) || value2 < 0) {\r\n            value2 = (_a = this.props.defaultValue) != null ? _a : 0;\r\n          }\r\n          this.props.valueSub.set(value2);\r\n        }\r\n      }\r\n    ), /* @__PURE__ */ FSComponent.buildComponent(\"span\", { class: \"suffix light-text\" }, \"ft\"));\r\n  }\r\n}\r\nclass Incremental extends GamepadUiComponent {\r\n  constructor(props) {\r\n    var _a, _b, _c, _d, _e;\r\n    super(props);\r\n    this.min = SubscribableUtils.toSubscribable((_a = this.props.min) != null ? _a : 0, true);\r\n    this.max = SubscribableUtils.toSubscribable((_b = this.props.max) != null ? _b : Number.MAX_SAFE_INTEGER, true);\r\n    this.step = SubscribableUtils.toSubscribable((_c = this.props.step) != null ? _c : 1, true);\r\n    this.formatter = (_d = this.props.formatter) != null ? _d : NumberFormatter.create();\r\n    this.useTextbox = (_e = this.props.useTextbox) != null ? _e : true;\r\n    this.displayedValue = Subject.create(\"\");\r\n    if (SubscribableUtils.isMutableSubscribable(props.value)) {\r\n      this.value = props.value;\r\n    } else if (SubscribableUtils.isSubscribable(props.value)) {\r\n      this.value = Subject.create(props.value.get());\r\n      this.subscribableValueSubscription = props.value.sub((value2) => this.value.set(value2));\r\n    } else {\r\n      this.value = Subject.create(props.value);\r\n    }\r\n    this.valueSubscription = this.value.sub((newValue) => {\r\n      var _a2, _b2;\r\n      (_b2 = (_a2 = this.props).onChange) == null ? void 0 : _b2.call(_a2, newValue);\r\n    });\r\n    this.displayedValueSubscription = MappedSubject.create(\r\n      ([value2, max]) => {\r\n        this.displayedValue.set(this.formatter(value2, max));\r\n      },\r\n      this.value,\r\n      this.max\r\n    );\r\n  }\r\n  renderButton(icon, direction = -1) {\r\n    if (icon !== void 0 && typeof icon !== \"string\") {\r\n      return icon;\r\n    }\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      IconButton,\r\n      {\r\n        class: direction === -1 ? \"incremental-decrease\" : \"incremental-increase\",\r\n        iconPath: (icon != null ? icon : direction === -1) ? \"coui://html_ui/efb_ui/efb_os/Assets/icons/Remove.svg\" : \"coui://html_ui/efb_ui/efb_os/Assets/icons/Add.svg\",\r\n        callback: () => {\r\n          var _a, _b;\r\n          const newValue = Utils.Clamp(\r\n            this.value.get() + this.step.get() * direction,\r\n            this.min.get(),\r\n            this.max.get()\r\n          );\r\n          this.value.set(newValue);\r\n          (_b = (_a = this.props).onButtonClicked) == null ? void 0 : _b.call(_a, direction, newValue);\r\n        },\r\n        disabled: this.props.disabled\r\n      }\r\n    );\r\n  }\r\n  renderData() {\r\n    if (this.useTextbox) {\r\n      return /* @__PURE__ */ FSComponent.buildComponent(\r\n        TextBox,\r\n        {\r\n          model: this.displayedValue,\r\n          class: \"data-display\",\r\n          charFilter: (char) => char >= \"0\" && char <= \"9\" || char === \".\",\r\n          suffix: this.props.suffix,\r\n          align: \"center\",\r\n          onInput: (e) => {\r\n            const newValue = Number(e.value);\r\n            if (newValue < this.min.get() || newValue > this.max.get()) {\r\n              this.displayedValue.set(\r\n                this.formatter(Utils.Clamp(newValue, this.min.get(), this.max.get()), this.max.get())\r\n              );\r\n              return;\r\n            }\r\n            if (!Number.isNaN(newValue)) {\r\n              this.value.set(Utils.Clamp(newValue, this.min.get(), this.max.get()));\r\n            }\r\n          },\r\n          onKeyDown: (event) => {\r\n            var _a, _b;\r\n            return (_b = (_a = this.props).onKeyDown) == null ? void 0 : _b.call(_a, event, this.value.get());\r\n          },\r\n          onKeyUp: (event) => {\r\n            var _a, _b;\r\n            return (_b = (_a = this.props).onKeyUp) == null ? void 0 : _b.call(_a, event, this.value.get());\r\n          },\r\n          onKeyPress: (event) => {\r\n            var _a, _b;\r\n            return (_b = (_a = this.props).onKeyPress) == null ? void 0 : _b.call(_a, event, this.value.get());\r\n          },\r\n          onFocusIn: this.onTextBoxFocusIn.bind(this),\r\n          onFocusOut: this.onTextBoxFocusOut.bind(this),\r\n          disabled: this.props.disabled\r\n        }\r\n      );\r\n    } else {\r\n      const dataSuffix = this.props.suffix ? /* @__PURE__ */ FSComponent.buildComponent(TT, { key: this.props.suffix, class: \"suffix\" }) : null;\r\n      return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"data-display\" }, /* @__PURE__ */ FSComponent.buildComponent(\"span\", { class: \"data-value\" }, this.displayedValue), dataSuffix);\r\n    }\r\n  }\r\n  // Allow the user to properly enter a value by pausing it's update\r\n  onTextBoxFocusIn() {\r\n    this.displayedValueSubscription.pause();\r\n  }\r\n  onTextBoxFocusOut() {\r\n    this.displayedValueSubscription.resume();\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"incremental\", ref: this.gamepadUiComponentRef }, this.renderButton(this.props.firstIcon, -1), this.renderData(), this.renderButton(this.props.firstIcon, 1));\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    (_a = this.subscribableValueSubscription) == null ? void 0 : _a.destroy();\r\n    this.valueSubscription.destroy();\r\n    this.displayedValueSubscription.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\nvar MapShim = function() {\r\n  if (typeof Map !== \"undefined\") {\r\n    return Map;\r\n  }\r\n  function getIndex(arr, key) {\r\n    var result = -1;\r\n    arr.some(function(entry, index2) {\r\n      if (entry[0] === key) {\r\n        result = index2;\r\n        return true;\r\n      }\r\n      return false;\r\n    });\r\n    return result;\r\n  }\r\n  return (\r\n    /** @class */\r\n    function() {\r\n      function class_1() {\r\n        this.__entries__ = [];\r\n      }\r\n      Object.defineProperty(class_1.prototype, \"size\", {\r\n        /**\r\n         * @returns {boolean}\r\n         */\r\n        get: function() {\r\n          return this.__entries__.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n      });\r\n      class_1.prototype.get = function(key) {\r\n        var index2 = getIndex(this.__entries__, key);\r\n        var entry = this.__entries__[index2];\r\n        return entry && entry[1];\r\n      };\r\n      class_1.prototype.set = function(key, value2) {\r\n        var index2 = getIndex(this.__entries__, key);\r\n        if (~index2) {\r\n          this.__entries__[index2][1] = value2;\r\n        } else {\r\n          this.__entries__.push([key, value2]);\r\n        }\r\n      };\r\n      class_1.prototype.delete = function(key) {\r\n        var entries = this.__entries__;\r\n        var index2 = getIndex(entries, key);\r\n        if (~index2) {\r\n          entries.splice(index2, 1);\r\n        }\r\n      };\r\n      class_1.prototype.has = function(key) {\r\n        return !!~getIndex(this.__entries__, key);\r\n      };\r\n      class_1.prototype.clear = function() {\r\n        this.__entries__.splice(0);\r\n      };\r\n      class_1.prototype.forEach = function(callback, ctx) {\r\n        if (ctx === void 0) {\r\n          ctx = null;\r\n        }\r\n        for (var _i = 0, _a = this.__entries__; _i < _a.length; _i++) {\r\n          var entry = _a[_i];\r\n          callback.call(ctx, entry[1], entry[0]);\r\n        }\r\n      };\r\n      return class_1;\r\n    }()\r\n  );\r\n}();\r\nvar isBrowser = typeof window !== \"undefined\" && typeof document !== \"undefined\" && window.document === document;\r\nvar global$1 = function() {\r\n  if (typeof global !== \"undefined\" && global.Math === Math) {\r\n    return global;\r\n  }\r\n  if (typeof self !== \"undefined\" && self.Math === Math) {\r\n    return self;\r\n  }\r\n  if (typeof window !== \"undefined\" && window.Math === Math) {\r\n    return window;\r\n  }\r\n  return Function(\"return this\")();\r\n}();\r\nvar requestAnimationFrame$1 = function() {\r\n  if (typeof requestAnimationFrame === \"function\") {\r\n    return requestAnimationFrame.bind(global$1);\r\n  }\r\n  return function(callback) {\r\n    return setTimeout(function() {\r\n      return callback(Date.now());\r\n    }, 1e3 / 60);\r\n  };\r\n}();\r\nvar trailingTimeout = 2;\r\nfunction throttle(callback, delay) {\r\n  var leadingCall = false, trailingCall = false, lastCallTime = 0;\r\n  function resolvePending() {\r\n    if (leadingCall) {\r\n      leadingCall = false;\r\n      callback();\r\n    }\r\n    if (trailingCall) {\r\n      proxy();\r\n    }\r\n  }\r\n  function timeoutCallback() {\r\n    requestAnimationFrame$1(resolvePending);\r\n  }\r\n  function proxy() {\r\n    var timeStamp = Date.now();\r\n    if (leadingCall) {\r\n      if (timeStamp - lastCallTime < trailingTimeout) {\r\n        return;\r\n      }\r\n      trailingCall = true;\r\n    } else {\r\n      leadingCall = true;\r\n      trailingCall = false;\r\n      setTimeout(timeoutCallback, delay);\r\n    }\r\n    lastCallTime = timeStamp;\r\n  }\r\n  return proxy;\r\n}\r\nvar REFRESH_DELAY = 20;\r\nvar transitionKeys = [\"top\", \"right\", \"bottom\", \"left\", \"width\", \"height\", \"size\", \"weight\"];\r\nvar mutationObserverSupported = typeof MutationObserver !== \"undefined\";\r\nvar ResizeObserverController = (\r\n  /** @class */\r\n  function() {\r\n    function ResizeObserverController2() {\r\n      this.connected_ = false;\r\n      this.mutationEventsAdded_ = false;\r\n      this.mutationsObserver_ = null;\r\n      this.observers_ = [];\r\n      this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);\r\n      this.refresh = throttle(this.refresh.bind(this), REFRESH_DELAY);\r\n    }\r\n    ResizeObserverController2.prototype.addObserver = function(observer) {\r\n      if (!~this.observers_.indexOf(observer)) {\r\n        this.observers_.push(observer);\r\n      }\r\n      if (!this.connected_) {\r\n        this.connect_();\r\n      }\r\n    };\r\n    ResizeObserverController2.prototype.removeObserver = function(observer) {\r\n      var observers2 = this.observers_;\r\n      var index2 = observers2.indexOf(observer);\r\n      if (~index2) {\r\n        observers2.splice(index2, 1);\r\n      }\r\n      if (!observers2.length && this.connected_) {\r\n        this.disconnect_();\r\n      }\r\n    };\r\n    ResizeObserverController2.prototype.refresh = function() {\r\n      var changesDetected = this.updateObservers_();\r\n      if (changesDetected) {\r\n        this.refresh();\r\n      }\r\n    };\r\n    ResizeObserverController2.prototype.updateObservers_ = function() {\r\n      var activeObservers = this.observers_.filter(function(observer) {\r\n        return observer.gatherActive(), observer.hasActive();\r\n      });\r\n      activeObservers.forEach(function(observer) {\r\n        return observer.broadcastActive();\r\n      });\r\n      return activeObservers.length > 0;\r\n    };\r\n    ResizeObserverController2.prototype.connect_ = function() {\r\n      if (!isBrowser || this.connected_) {\r\n        return;\r\n      }\r\n      document.addEventListener(\"transitionend\", this.onTransitionEnd_);\r\n      window.addEventListener(\"resize\", this.refresh);\r\n      if (mutationObserverSupported) {\r\n        this.mutationsObserver_ = new MutationObserver(this.refresh);\r\n        this.mutationsObserver_.observe(document, {\r\n          attributes: true,\r\n          childList: true,\r\n          characterData: true,\r\n          subtree: true\r\n        });\r\n      } else {\r\n        document.addEventListener(\"DOMSubtreeModified\", this.refresh);\r\n        this.mutationEventsAdded_ = true;\r\n      }\r\n      this.connected_ = true;\r\n    };\r\n    ResizeObserverController2.prototype.disconnect_ = function() {\r\n      if (!isBrowser || !this.connected_) {\r\n        return;\r\n      }\r\n      document.removeEventListener(\"transitionend\", this.onTransitionEnd_);\r\n      window.removeEventListener(\"resize\", this.refresh);\r\n      if (this.mutationsObserver_) {\r\n        this.mutationsObserver_.disconnect();\r\n      }\r\n      if (this.mutationEventsAdded_) {\r\n        document.removeEventListener(\"DOMSubtreeModified\", this.refresh);\r\n      }\r\n      this.mutationsObserver_ = null;\r\n      this.mutationEventsAdded_ = false;\r\n      this.connected_ = false;\r\n    };\r\n    ResizeObserverController2.prototype.onTransitionEnd_ = function(_a) {\r\n      var _b = _a.propertyName, propertyName = _b === void 0 ? \"\" : _b;\r\n      var isReflowProperty = transitionKeys.some(function(key) {\r\n        return !!~propertyName.indexOf(key);\r\n      });\r\n      if (isReflowProperty) {\r\n        this.refresh();\r\n      }\r\n    };\r\n    ResizeObserverController2.getInstance = function() {\r\n      if (!this.instance_) {\r\n        this.instance_ = new ResizeObserverController2();\r\n      }\r\n      return this.instance_;\r\n    };\r\n    ResizeObserverController2.instance_ = null;\r\n    return ResizeObserverController2;\r\n  }()\r\n);\r\nvar defineConfigurable = function(target, props) {\r\n  for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {\r\n    var key = _a[_i];\r\n    Object.defineProperty(target, key, {\r\n      value: props[key],\r\n      enumerable: false,\r\n      writable: false,\r\n      configurable: true\r\n    });\r\n  }\r\n  return target;\r\n};\r\nvar getWindowOf = function(target) {\r\n  var ownerGlobal = target && target.ownerDocument && target.ownerDocument.defaultView;\r\n  return ownerGlobal || global$1;\r\n};\r\nvar emptyRect = createRectInit(0, 0, 0, 0);\r\nfunction toFloat(value2) {\r\n  return parseFloat(value2) || 0;\r\n}\r\nfunction getBordersSize(styles) {\r\n  var positions = [];\r\n  for (var _i = 1; _i < arguments.length; _i++) {\r\n    positions[_i - 1] = arguments[_i];\r\n  }\r\n  return positions.reduce(function(size, position) {\r\n    var value2 = styles[\"border-\" + position + \"-width\"];\r\n    return size + toFloat(value2);\r\n  }, 0);\r\n}\r\nfunction getPaddings(styles) {\r\n  var positions = [\"top\", \"right\", \"bottom\", \"left\"];\r\n  var paddings = {};\r\n  for (var _i = 0, positions_1 = positions; _i < positions_1.length; _i++) {\r\n    var position = positions_1[_i];\r\n    var value2 = styles[\"padding-\" + position];\r\n    paddings[position] = toFloat(value2);\r\n  }\r\n  return paddings;\r\n}\r\nfunction getSVGContentRect(target) {\r\n  var bbox = target.getBBox();\r\n  return createRectInit(0, 0, bbox.width, bbox.height);\r\n}\r\nfunction getHTMLElementContentRect(target) {\r\n  var clientWidth = target.clientWidth, clientHeight = target.clientHeight;\r\n  if (!clientWidth && !clientHeight) {\r\n    return emptyRect;\r\n  }\r\n  var styles = getWindowOf(target).getComputedStyle(target);\r\n  var paddings = getPaddings(styles);\r\n  var horizPad = paddings.left + paddings.right;\r\n  var vertPad = paddings.top + paddings.bottom;\r\n  var width = toFloat(styles.width), height = toFloat(styles.height);\r\n  if (styles.boxSizing === \"border-box\") {\r\n    if (Math.round(width + horizPad) !== clientWidth) {\r\n      width -= getBordersSize(styles, \"left\", \"right\") + horizPad;\r\n    }\r\n    if (Math.round(height + vertPad) !== clientHeight) {\r\n      height -= getBordersSize(styles, \"top\", \"bottom\") + vertPad;\r\n    }\r\n  }\r\n  if (!isDocumentElement(target)) {\r\n    var vertScrollbar = Math.round(width + horizPad) - clientWidth;\r\n    var horizScrollbar = Math.round(height + vertPad) - clientHeight;\r\n    if (Math.abs(vertScrollbar) !== 1) {\r\n      width -= vertScrollbar;\r\n    }\r\n    if (Math.abs(horizScrollbar) !== 1) {\r\n      height -= horizScrollbar;\r\n    }\r\n  }\r\n  return createRectInit(paddings.left, paddings.top, width, height);\r\n}\r\nvar isSVGGraphicsElement = function() {\r\n  if (typeof SVGGraphicsElement !== \"undefined\") {\r\n    return function(target) {\r\n      return target instanceof getWindowOf(target).SVGGraphicsElement;\r\n    };\r\n  }\r\n  return function(target) {\r\n    return target instanceof getWindowOf(target).SVGElement && typeof target.getBBox === \"function\";\r\n  };\r\n}();\r\nfunction isDocumentElement(target) {\r\n  return target === getWindowOf(target).document.documentElement;\r\n}\r\nfunction getContentRect(target) {\r\n  if (!isBrowser) {\r\n    return emptyRect;\r\n  }\r\n  if (isSVGGraphicsElement(target)) {\r\n    return getSVGContentRect(target);\r\n  }\r\n  return getHTMLElementContentRect(target);\r\n}\r\nfunction createReadOnlyRect(_a) {\r\n  var x = _a.x, y = _a.y, width = _a.width, height = _a.height;\r\n  var Constr = typeof DOMRectReadOnly !== \"undefined\" ? DOMRectReadOnly : Object;\r\n  var rect = Object.create(Constr.prototype);\r\n  defineConfigurable(rect, {\r\n    x,\r\n    y,\r\n    width,\r\n    height,\r\n    top: y,\r\n    right: x + width,\r\n    bottom: height + y,\r\n    left: x\r\n  });\r\n  return rect;\r\n}\r\nfunction createRectInit(x, y, width, height) {\r\n  return { x, y, width, height };\r\n}\r\nvar ResizeObservation = (\r\n  /** @class */\r\n  function() {\r\n    function ResizeObservation2(target) {\r\n      this.broadcastWidth = 0;\r\n      this.broadcastHeight = 0;\r\n      this.contentRect_ = createRectInit(0, 0, 0, 0);\r\n      this.target = target;\r\n    }\r\n    ResizeObservation2.prototype.isActive = function() {\r\n      var rect = getContentRect(this.target);\r\n      this.contentRect_ = rect;\r\n      return rect.width !== this.broadcastWidth || rect.height !== this.broadcastHeight;\r\n    };\r\n    ResizeObservation2.prototype.broadcastRect = function() {\r\n      var rect = this.contentRect_;\r\n      this.broadcastWidth = rect.width;\r\n      this.broadcastHeight = rect.height;\r\n      return rect;\r\n    };\r\n    return ResizeObservation2;\r\n  }()\r\n);\r\nvar ResizeObserverEntry = (\r\n  /** @class */\r\n  /* @__PURE__ */ function() {\r\n    function ResizeObserverEntry2(target, rectInit) {\r\n      var contentRect = createReadOnlyRect(rectInit);\r\n      defineConfigurable(this, { target, contentRect });\r\n    }\r\n    return ResizeObserverEntry2;\r\n  }()\r\n);\r\nvar ResizeObserverSPI = (\r\n  /** @class */\r\n  function() {\r\n    function ResizeObserverSPI2(callback, controller, callbackCtx) {\r\n      this.activeObservations_ = [];\r\n      this.observations_ = new MapShim();\r\n      if (typeof callback !== \"function\") {\r\n        throw new TypeError(\"The callback provided as parameter 1 is not a function.\");\r\n      }\r\n      this.callback_ = callback;\r\n      this.controller_ = controller;\r\n      this.callbackCtx_ = callbackCtx;\r\n    }\r\n    ResizeObserverSPI2.prototype.observe = function(target) {\r\n      if (!arguments.length) {\r\n        throw new TypeError(\"1 argument required, but only 0 present.\");\r\n      }\r\n      if (typeof Element === \"undefined\" || !(Element instanceof Object)) {\r\n        return;\r\n      }\r\n      if (!(target instanceof getWindowOf(target).Element)) {\r\n        throw new TypeError('parameter 1 is not of type \"Element\".');\r\n      }\r\n      var observations = this.observations_;\r\n      if (observations.has(target)) {\r\n        return;\r\n      }\r\n      observations.set(target, new ResizeObservation(target));\r\n      this.controller_.addObserver(this);\r\n      this.controller_.refresh();\r\n    };\r\n    ResizeObserverSPI2.prototype.unobserve = function(target) {\r\n      if (!arguments.length) {\r\n        throw new TypeError(\"1 argument required, but only 0 present.\");\r\n      }\r\n      if (typeof Element === \"undefined\" || !(Element instanceof Object)) {\r\n        return;\r\n      }\r\n      if (!(target instanceof getWindowOf(target).Element)) {\r\n        throw new TypeError('parameter 1 is not of type \"Element\".');\r\n      }\r\n      var observations = this.observations_;\r\n      if (!observations.has(target)) {\r\n        return;\r\n      }\r\n      observations.delete(target);\r\n      if (!observations.size) {\r\n        this.controller_.removeObserver(this);\r\n      }\r\n    };\r\n    ResizeObserverSPI2.prototype.disconnect = function() {\r\n      this.clearActive();\r\n      this.observations_.clear();\r\n      this.controller_.removeObserver(this);\r\n    };\r\n    ResizeObserverSPI2.prototype.gatherActive = function() {\r\n      var _this = this;\r\n      this.clearActive();\r\n      this.observations_.forEach(function(observation) {\r\n        if (observation.isActive()) {\r\n          _this.activeObservations_.push(observation);\r\n        }\r\n      });\r\n    };\r\n    ResizeObserverSPI2.prototype.broadcastActive = function() {\r\n      if (!this.hasActive()) {\r\n        return;\r\n      }\r\n      var ctx = this.callbackCtx_;\r\n      var entries = this.activeObservations_.map(function(observation) {\r\n        return new ResizeObserverEntry(observation.target, observation.broadcastRect());\r\n      });\r\n      this.callback_.call(ctx, entries, ctx);\r\n      this.clearActive();\r\n    };\r\n    ResizeObserverSPI2.prototype.clearActive = function() {\r\n      this.activeObservations_.splice(0);\r\n    };\r\n    ResizeObserverSPI2.prototype.hasActive = function() {\r\n      return this.activeObservations_.length > 0;\r\n    };\r\n    return ResizeObserverSPI2;\r\n  }()\r\n);\r\nvar observers = typeof WeakMap !== \"undefined\" ? /* @__PURE__ */ new WeakMap() : new MapShim();\r\nvar ResizeObserver = (\r\n  /** @class */\r\n  /* @__PURE__ */ function() {\r\n    function ResizeObserver2(callback) {\r\n      if (!(this instanceof ResizeObserver2)) {\r\n        throw new TypeError(\"Cannot call a class as a function.\");\r\n      }\r\n      if (!arguments.length) {\r\n        throw new TypeError(\"1 argument required, but only 0 present.\");\r\n      }\r\n      var controller = ResizeObserverController.getInstance();\r\n      var observer = new ResizeObserverSPI(callback, controller, this);\r\n      observers.set(this, observer);\r\n    }\r\n    return ResizeObserver2;\r\n  }()\r\n);\r\n[\r\n  \"observe\",\r\n  \"unobserve\",\r\n  \"disconnect\"\r\n].forEach(function(method) {\r\n  ResizeObserver.prototype[method] = function() {\r\n    var _a;\r\n    return (_a = observers.get(this))[method].apply(_a, arguments);\r\n  };\r\n});\r\nvar index = function() {\r\n  if (typeof global$1.ResizeObserver !== \"undefined\") {\r\n    return global$1.ResizeObserver;\r\n  }\r\n  return ResizeObserver;\r\n}();\r\nconst defaultProps = {\r\n  speed: 50,\r\n  // 50 pixels/seconds => 0.05 px/ms => 1px/20ms\r\n  startDelay: 500,\r\n  resetDelay: 500\r\n};\r\nclass Marquee extends DisplayComponent {\r\n  constructor() {\r\n    var _a, _b, _c, _d, _e;\r\n    super(...arguments);\r\n    this.containerRef = FSComponent.createRef();\r\n    this.marqueeRef = FSComponent.createRef();\r\n    this.speedPxPerSeconds = SubscribableUtils.toSubscribable(\r\n      (_a = this.props.speed) != null ? _a : defaultProps.speed,\r\n      true\r\n    );\r\n    this.startDelayMs = SubscribableUtils.toSubscribable(\r\n      (_c = (_b = this.props.startDelay) != null ? _b : this.props.delay) != null ? _c : defaultProps.startDelay,\r\n      true\r\n    );\r\n    this.resetDelayMs = SubscribableUtils.toSubscribable(\r\n      (_e = (_d = this.props.resetDelay) != null ? _d : this.props.delay) != null ? _e : defaultProps.resetDelay,\r\n      true\r\n    );\r\n    this.transitionActive = Subject.create(false);\r\n    this.delayMs = Subject.create(this.startDelayMs.get());\r\n    this.durationMs = Subject.create(0);\r\n    this.translationPx = Subject.create(0);\r\n    this.containerWidth = 0;\r\n    this.marqueeWidth = 0;\r\n    this.transitionRightPx = 0;\r\n    this.isLeftToRight = true;\r\n    this.onMouseEnter = this._onMouseEnter.bind(this);\r\n    this.onMouseLeave = this._onMouseLeave.bind(this);\r\n    this.onTransitionEnded = this._onTransitionEnded.bind(this);\r\n  }\r\n  getDurationForDistance(distance) {\r\n    return Math.abs(distance) * (1e3 / Math.abs(this.speedPxPerSeconds.get()));\r\n  }\r\n  _onMouseEnter() {\r\n    if (this.transitionActive.get() || this.transitionRightPx >= 0) {\r\n      return;\r\n    }\r\n    this.transitionActive.set(true);\r\n    this.isLeftToRight = true;\r\n    this.delayMs.set(this.startDelayMs.get());\r\n    this.durationMs.set(this.getDurationForDistance(this.transitionRightPx));\r\n    this.translationPx.set(this.transitionRightPx);\r\n  }\r\n  _onMouseLeave() {\r\n    if (!this.transitionActive.get()) {\r\n      return;\r\n    }\r\n    this.transitionActive.set(false);\r\n    if (this.timeoutId) {\r\n      clearTimeout(this.timeoutId);\r\n      this.timeoutId = void 0;\r\n    }\r\n    this.isLeftToRight = true;\r\n    this.delayMs.set(0);\r\n    this.durationMs.set(0);\r\n    this.translationPx.set(0);\r\n  }\r\n  _onTransitionEnded(event) {\r\n    if (event.target !== this.marqueeRef.instance) {\r\n      return;\r\n    }\r\n    if (event.propertyName !== \"transform\") {\r\n      return;\r\n    }\r\n    if (!this.transitionActive.get()) {\r\n      return;\r\n    }\r\n    const leftToRightEnded = this.isLeftToRight;\r\n    this.isLeftToRight = !leftToRightEnded;\r\n    if (leftToRightEnded) {\r\n      this.delayMs.set(this.resetDelayMs.get());\r\n      this.durationMs.set(0);\r\n      this.translationPx.set(0);\r\n      if (this.delayMs.get() === 0) {\r\n        this.timeoutId = setTimeout(() => {\r\n          this._onTransitionEnded(event);\r\n        });\r\n      }\r\n    } else {\r\n      this.delayMs.set(this.startDelayMs.get());\r\n      this.durationMs.set(this.getDurationForDistance(this.transitionRightPx));\r\n      this.translationPx.set(this.transitionRightPx);\r\n    }\r\n  }\r\n  getMarqueeActivator() {\r\n    let activator = this.marqueeRef.getOrDefault();\r\n    if (this.props.activator) {\r\n      const instance = this.props.activator.getOrDefault();\r\n      if (instance instanceof HTMLElement) {\r\n        activator = instance;\r\n      } else if (instance instanceof GamepadUiComponent) {\r\n        activator = instance.gamepadUiComponentRef.getOrDefault();\r\n      }\r\n    }\r\n    return activator;\r\n  }\r\n  render() {\r\n    const marqueeStyle = {\r\n      \"--duration\": this.durationMs.map((duration) => `${duration}ms`),\r\n      \"--delay\": this.delayMs.map((delay) => `${delay}ms`),\r\n      \"--translation\": this.translationPx.map((translation) => `${translation}px`)\r\n    };\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { ref: this.containerRef, class: mergeClassProp(\"efb-marquee-container\", this.props.class) }, /* @__PURE__ */ FSComponent.buildComponent(\"div\", { ref: this.marqueeRef, class: \"efb-marquee\", style: marqueeStyle }, this.props.children));\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.containerWidth = this.containerRef.instance.clientWidth;\r\n    this.marqueeWidth = this.marqueeRef.instance.clientWidth;\r\n    this.transitionRightPx = Math.min(this.containerWidth - this.marqueeWidth, 0);\r\n    const self2 = this;\r\n    this.observer = new index(function(mutations) {\r\n      mutations.forEach(function(_mutation) {\r\n        self2.containerWidth = self2.containerRef.instance.clientWidth;\r\n        self2.marqueeWidth = self2.marqueeRef.instance.clientWidth;\r\n        self2.transitionRightPx = Math.min(self2.containerWidth - self2.marqueeWidth, 0);\r\n        if (self2.transitionActive.get()) {\r\n          self2.isLeftToRight = true;\r\n          self2.durationMs.set(0);\r\n          self2.translationPx.set(0);\r\n          if (self2.transitionRightPx < 0) {\r\n            setTimeout(() => {\r\n              if (self2.transitionActive.get()) {\r\n                self2.durationMs.set(self2.getDurationForDistance(self2.transitionRightPx));\r\n                self2.translationPx.set(self2.transitionRightPx);\r\n              }\r\n            }, self2.startDelayMs.get());\r\n          }\r\n        }\r\n      });\r\n    });\r\n    this.observer.observe(this.marqueeRef.instance);\r\n    const activator = this.getMarqueeActivator();\r\n    if (activator) {\r\n      activator.addEventListener(\"mouseenter\", this.onMouseEnter);\r\n      activator.addEventListener(\"mouseleave\", this.onMouseLeave);\r\n    }\r\n    this.marqueeRef.instance.addEventListener(\"transitionend\", this.onTransitionEnded);\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    (_a = this.observer) == null ? void 0 : _a.disconnect();\r\n    const activator = this.getMarqueeActivator();\r\n    if (activator) {\r\n      activator.removeEventListener(\"mouseenter\", this.onMouseEnter);\r\n      activator.removeEventListener(\"mouseleave\", this.onMouseLeave);\r\n    }\r\n    this.marqueeRef.instance.removeEventListener(\"transitionend\", this.onTransitionEnded);\r\n    super.destroy();\r\n  }\r\n}\r\nconst _NumberUnitDisplay = class _NumberUnitDisplay extends AbstractNumberUnitDisplay {\r\n  constructor() {\r\n    var _a, _b;\r\n    super(...arguments);\r\n    this.formatter = (_a = this.props.formatter) != null ? _a : NumberFormatter.create({\r\n      // TODO Properly format the time\r\n      precision: 0.01,\r\n      maxDigits: 5,\r\n      forceDecimalZeroes: false,\r\n      nanString: \"0\"\r\n    });\r\n    this.unitFormatter = (_b = this.props.unitFormatter) != null ? _b : _NumberUnitDisplay.DEFAULT_UNIT_FORMATTER;\r\n    this.unitTextBigDisplay = Subject.create(\"\");\r\n    this.unitTextSmallDisplay = Subject.create(\"\");\r\n    this.numberText = Subject.create(\"\");\r\n    this.unitTextBig = Subject.create(\"\");\r\n    this.unitTextSmall = Subject.create(\"\");\r\n  }\r\n  /** @inheritdoc */\r\n  onValueChanged(value2) {\r\n    this.updateDisplay(value2, this.displayUnit.get());\r\n  }\r\n  /** @inheritdoc */\r\n  onDisplayUnitChanged(displayUnit) {\r\n    this.updateDisplay(this.value.get(), displayUnit);\r\n  }\r\n  /**\r\n   * Updates this component's displayed number and unit text.\r\n   * @param value The value to display.\r\n   * @param displayUnit The unit type in which to display the value, or `null` if the value should be displayed in its\r\n   * native unit type.\r\n   */\r\n  updateDisplay(value2, displayUnit) {\r\n    if (!displayUnit || !value2.unit.canConvert(displayUnit)) {\r\n      displayUnit = value2.unit;\r\n    }\r\n    const numberValue = value2.asUnit(displayUnit);\r\n    const numberText = this.formatter(numberValue);\r\n    this.numberText.set(numberText);\r\n    _NumberUnitDisplay.unitTextCache[0] = \"\";\r\n    _NumberUnitDisplay.unitTextCache[1] = \"\";\r\n    this.unitFormatter(_NumberUnitDisplay.unitTextCache, displayUnit, numberValue);\r\n    this.unitTextBig.set(_NumberUnitDisplay.unitTextCache[0]);\r\n    this.unitTextSmall.set(_NumberUnitDisplay.unitTextCache[1]);\r\n    this.updateUnitTextVisibility(\r\n      numberValue,\r\n      _NumberUnitDisplay.unitTextCache[0],\r\n      _NumberUnitDisplay.unitTextCache[1]\r\n    );\r\n  }\r\n  /**\r\n   * Updates whether this component's unit text spans are visible.\r\n   * @param numberValue The numeric value displayed by this component.\r\n   * @param unitTextBig The text to display in the big text span.\r\n   * @param unitTextSmall The text to display in the small text span.\r\n   */\r\n  updateUnitTextVisibility(numberValue, unitTextBig, unitTextSmall) {\r\n    if (this.props.hideUnitWhenNaN === true && isNaN(numberValue)) {\r\n      this.unitTextBigDisplay.set(\"none\");\r\n      this.unitTextSmallDisplay.set(\"none\");\r\n      return;\r\n    }\r\n    this.unitTextBigDisplay.set(unitTextBig === \"\" ? \"none\" : \"\");\r\n    this.unitTextSmallDisplay.set(unitTextSmall === \"\" ? \"none\" : \"\");\r\n  }\r\n  /**\r\n   * Creates the default mapping from unit to displayed text.\r\n   * @returns The default mapping from unit to displayed text.\r\n   */\r\n  static createDefaultUnitTextMap() {\r\n    const originalMap = UnitFormatter.getUnitTextMap();\r\n    const map = {};\r\n    for (const family in originalMap) {\r\n      const nameMap = map[family] = {};\r\n      const originalNameMap = originalMap[family];\r\n      for (const name in originalNameMap) {\r\n        const text = nameMap[name] = [\"\", \"\"];\r\n        const originalText = originalNameMap[name];\r\n        if (originalText[0] === \"\u00B0\") {\r\n          text[0] = \"\u00B0\";\r\n          text[1] = originalText.substring(1);\r\n        } else {\r\n          text[1] = originalText;\r\n        }\r\n      }\r\n    }\r\n    return map;\r\n  }\r\n  render() {\r\n    var _a;\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: (_a = this.props.class) != null ? _a : \"\", style: \"white-space: nowrap;\" }, /* @__PURE__ */ FSComponent.buildComponent(\"span\", { class: \"numberunit-num\" }, this.numberText), /* @__PURE__ */ FSComponent.buildComponent(\"span\", { class: \"numberunit-unit-big\", style: { display: this.unitTextBigDisplay } }, this.unitTextBig), /* @__PURE__ */ FSComponent.buildComponent(\"span\", { class: \"numberunit-unit-small\", style: { display: this.unitTextSmallDisplay } }, this.unitTextSmall));\r\n  }\r\n};\r\n_NumberUnitDisplay.DEFAULT_UNIT_TEXT_MAP = _NumberUnitDisplay.createDefaultUnitTextMap();\r\n_NumberUnitDisplay.DEFAULT_UNIT_FORMATTER = (out, unit) => {\r\n  var _a;\r\n  const text = (_a = _NumberUnitDisplay.DEFAULT_UNIT_TEXT_MAP[unit.family]) == null ? void 0 : _a[unit.name];\r\n  if (text) {\r\n    out[0] = text[0];\r\n    out[1] = text[1];\r\n  }\r\n};\r\n_NumberUnitDisplay.unitTextCache = [\"\", \"\"];\r\nlet NumberUnitDisplay = _NumberUnitDisplay;\r\nclass ProgressComponent extends GamepadUiComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.fullCompletionSub = Subject.create(false);\r\n  }\r\n  _updateProgress(progressRatio) {\r\n    this.updateProgress(progressRatio);\r\n    this.fullCompletionSub.set(progressRatio === 1);\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    if (typeof this.props.progressRatio === \"number\") {\r\n      this._updateProgress(this.props.progressRatio);\r\n    } else {\r\n      this.progressRatioSubscription = this.props.progressRatio.sub(this._updateProgress.bind(this), true);\r\n    }\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    (_a = this.progressRatioSubscription) == null ? void 0 : _a.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\nclass CircularProgress extends ProgressComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.circularProgressRef = FSComponent.createRef();\r\n    this.lowerSliceRef = FSComponent.createRef();\r\n    this.higherSliceRef = FSComponent.createRef();\r\n    this.sliceClassToggleSub = Subject.create(false);\r\n    this.sliceClassToggleNotSub = this.sliceClassToggleSub.map(SubscribableMapFunctions.not());\r\n    this.circularProgressStyle = ObjectSubject.create({\r\n      \"--circular-progress-rotation-value-left\": \"0\",\r\n      \"--circular-progress-rotation-value-right\": \"0\"\r\n    });\r\n    this.circularProgressPrimaryBackgroundClass = \"circular-progress-primary-background\";\r\n    this.circularProgressSecondaryBackgroundClass = \"circular-progress-secondary-background\";\r\n    this.circularProgressSliceClasses = {\r\n      \"circular-progress-slice\": true,\r\n      [this.circularProgressSecondaryBackgroundClass]: this.sliceClassToggleSub,\r\n      [this.circularProgressPrimaryBackgroundClass]: this.sliceClassToggleNotSub\r\n    };\r\n  }\r\n  updateProgressByHalf(progressRatio, overHalf) {\r\n    if (overHalf) {\r\n      this.circularProgressStyle.set(\"--circular-progress-rotation-value-left\", `${progressRatio}turn`);\r\n      this.circularProgressStyle.set(\"--circular-progress-rotation-value-right\", \"0\");\r\n    } else {\r\n      this.circularProgressStyle.set(\"--circular-progress-rotation-value-left\", \"0\");\r\n      this.circularProgressStyle.set(\"--circular-progress-rotation-value-right\", `${progressRatio}turn`);\r\n    }\r\n    this.sliceClassToggleSub.set(overHalf);\r\n  }\r\n  updateProgress(progressRatio) {\r\n    this.updateProgressByHalf(progressRatio, progressRatio > 0.5);\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        class: { \"circular-progress-container\": true, \"full-completion\": this.fullCompletionSub },\r\n        ref: this.gamepadUiComponentRef\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"circular-progress-circle-container\" }, /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"circular-progress-circle outer\" }), /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"circular-progress-circle inner\" })),\r\n      /* @__PURE__ */ FSComponent.buildComponent(\r\n        \"div\",\r\n        {\r\n          class: {\r\n            \"circular-progress\": true,\r\n            [this.circularProgressPrimaryBackgroundClass]: this.sliceClassToggleSub,\r\n            [this.circularProgressSecondaryBackgroundClass]: this.sliceClassToggleNotSub\r\n          },\r\n          ref: this.circularProgressRef,\r\n          style: this.circularProgressStyle\r\n        },\r\n        /* @__PURE__ */ FSComponent.buildComponent(\r\n          \"div\",\r\n          {\r\n            class: __spreadProps(__spreadValues({}, this.circularProgressSliceClasses), {\r\n              left: true\r\n            }),\r\n            ref: this.higherSliceRef\r\n          }\r\n        ),\r\n        /* @__PURE__ */ FSComponent.buildComponent(\r\n          \"div\",\r\n          {\r\n            class: __spreadProps(__spreadValues({}, this.circularProgressSliceClasses), {\r\n              right: true\r\n            }),\r\n            ref: this.lowerSliceRef\r\n          }\r\n        ),\r\n        this.props.iconPath && /* @__PURE__ */ FSComponent.buildComponent(\r\n          IconElement,\r\n          {\r\n            class: {\r\n              \"full-completion-icon\": true,\r\n              hide: this.fullCompletionSub.map(SubscribableMapFunctions.not())\r\n            },\r\n            url: this.props.iconPath\r\n          }\r\n        )\r\n      )\r\n    );\r\n  }\r\n}\r\nclass ProgressBar extends ProgressComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.circularProgressStyle = ObjectSubject.create({\r\n      \"--progress-bar-width-percentage\": \"0%\"\r\n    });\r\n  }\r\n  updateProgress(progressRatio) {\r\n    let progressPercentage = progressRatio * 100;\r\n    if (progressPercentage > 100) progressPercentage = 100;\r\n    else if (progressPercentage < 0) progressPercentage = 0;\r\n    this.circularProgressStyle.set(\"--progress-bar-width-percentage\", `${progressPercentage}%`);\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        class: { \"progress-bar-container\": true, \"full-completion\": this.fullCompletionSub },\r\n        ref: this.gamepadUiComponentRef\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"progress-bar\", style: this.circularProgressStyle })\r\n    );\r\n  }\r\n}\r\nclass SearchBar extends GamepadUiComponent {\r\n  constructor(props) {\r\n    var _a, _b, _c, _d, _e, _f;\r\n    super(props);\r\n    this.resultItems = ArraySubject.create();\r\n    this.onInputSearchSub = this.props.model || Subject.create(\"\");\r\n    this.textBoxRef = (_a = this.props.textBoxRef) != null ? _a : FSComponent.createRef();\r\n    this.searchBarListRef = (_b = this.props.searchBarListRef) != null ? _b : FSComponent.createRef();\r\n    this.isSearchBarFocus = Subject.create(false);\r\n    this.placeholder = (_c = this.props.placeholder) != null ? _c : \"@fs-base-efb,TT:EFB.COMMON.SEARCH_PLACEHOLDER\";\r\n    this.DEBOUNCE_DURATION = 0;\r\n    this.subs = [];\r\n    this.currentSearchId = 0;\r\n    this.isSearchPending = Subject.create(false);\r\n    this.gamepadNavigationOptions = (_d = this.props.gamepadNavigationOptions) != null ? _d : {};\r\n    this.askForResultNavigationSubscription = this.isSearchPending.sub((pending) => {\r\n      if (!pending) {\r\n        this.askForResultNavigationSubscription.pause();\r\n        this.enableSearchResultNavigation();\r\n      }\r\n    });\r\n    this.onDelete = () => {\r\n    };\r\n    this.prefix = Subject.create(SubscribableUtils.toSubscribable(this.props.prefix || \"\", true).get());\r\n    this.suffix = Subject.create(SubscribableUtils.toSubscribable(this.props.suffix || \"\", true).get());\r\n    this.listRef = FSComponent.createRef();\r\n    this.askForResultNavigationSubscription.pause();\r\n    if (((_e = props.gamepadNavigationOptions) == null ? void 0 : _e.isListFocused) !== void 0) {\r\n      if (SubscribableUtils.isMutableSubscribable(props.gamepadNavigationOptions.isListFocused)) {\r\n        this.isResultListFocus = props.gamepadNavigationOptions.isListFocused;\r\n      } else if (SubscribableUtils.isSubscribable(props.gamepadNavigationOptions.isListFocused)) {\r\n        this.isResultListFocus = Subject.create(props.gamepadNavigationOptions.isListFocused.get());\r\n        this.subs.push(\r\n          props.gamepadNavigationOptions.isListFocused.sub(\r\n            (value2) => this.isResultListFocus.set(value2)\r\n          )\r\n        );\r\n      } else {\r\n        this.isResultListFocus = Subject.create(props.gamepadNavigationOptions.isListFocused);\r\n      }\r\n    } else {\r\n      this.isResultListFocus = Subject.create(false);\r\n    }\r\n    this.isListVisible = (_f = this.props.isListVisible) != null ? _f : MappedSubject.create(\r\n      ([searchBarFocus, listFocus]) => searchBarFocus || listFocus,\r\n      this.isSearchBarFocus,\r\n      this.isResultListFocus\r\n    );\r\n  }\r\n  enableSearchResultNavigation() {\r\n    this.isResultListFocus.set(true);\r\n  }\r\n  disableSearchResultNavigation() {\r\n    this.isResultListFocus.set(false);\r\n  }\r\n  tryRenderItem(data, index2) {\r\n    return this.props.renderItem ? this.props.renderItem(data, index2) : this.renderItem(data, index2);\r\n  }\r\n  /* Must be implemented by children classes */\r\n  renderItem(_data, _index) {\r\n    throw new Error(\"Missing renderItem props\");\r\n  }\r\n  tryUpdateResultItems(input) {\r\n    return this.props.updateResultItems ? this.props.updateResultItems(input) : this.updateResultItems(input);\r\n  }\r\n  /* Must be implemented by children classes */\r\n  updateResultItems(_input) {\r\n    throw new Error(\"Missing updateResultItems props\");\r\n  }\r\n  async onSearchUpdated(input) {\r\n    this.currentSearchId++;\r\n    const searchId = this.currentSearchId;\r\n    this.isSearchPending.set(true);\r\n    const values = await this.tryUpdateResultItems(input);\r\n    if (searchId !== this.currentSearchId) {\r\n      return;\r\n    }\r\n    this.isSearchPending.set(false);\r\n    this.resultItems.set(values);\r\n    if (values.length === 0) {\r\n      this.disableSearchResultNavigation();\r\n    }\r\n  }\r\n  /** @deprecated Do nothing. */\r\n  onResultItemsUpdated() {\r\n  }\r\n  render() {\r\n    var _a, _b;\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"search-bar\", ref: this.gamepadUiComponentRef }, /* @__PURE__ */ FSComponent.buildComponent(\r\n      TextBox,\r\n      {\r\n        model: this.onInputSearchSub,\r\n        ref: this.textBoxRef,\r\n        placeholder: this.placeholder,\r\n        disabled: this.props.disabled,\r\n        hidePlaceholderOnFocus: this.props.hidePlaceholderOnFocus,\r\n        focusOnInit: this.props.focusOnInit,\r\n        onFocusIn: () => {\r\n          var _a2, _b2;\r\n          Wait.awaitFrames(1).catch().then(() => this.isSearchBarFocus.set(true));\r\n          (_b2 = (_a2 = this.props).onFocusIn) == null ? void 0 : _b2.call(_a2);\r\n        },\r\n        onFocusOut: () => {\r\n          var _a2, _b2;\r\n          Wait.awaitFrames(1).catch().then(() => this.isSearchBarFocus.set(false));\r\n          (_b2 = (_a2 = this.props).onFocusOut) == null ? void 0 : _b2.call(_a2);\r\n          if (this.props.emptySearchOnFocusOut || !this.onInputSearchSub.get().trim()) {\r\n            this.textBoxRef.instance.inputRef.instance.clearInput();\r\n          }\r\n        },\r\n        onInput: this.props.onInput,\r\n        onValueValidated: (text) => {\r\n          var _a2, _b2;\r\n          this.askForResultNavigationSubscription.resume(true);\r\n          (_b2 = (_a2 = this.props).onValueValidated) == null ? void 0 : _b2.call(_a2, text);\r\n        },\r\n        debounceDuration: (_a = this.props.debounceDuration) != null ? _a : this.DEBOUNCE_DURATION,\r\n        onKeyPress: this.props.onKeyPress,\r\n        charFilter: this.props.charFilter,\r\n        onDelete: this.onDelete,\r\n        focusOnClear: this.props.focusOnClear,\r\n        showDeleteIcon: (_b = this.props.showDeleteIcon) != null ? _b : true,\r\n        customDeleteIcon: this.props.customDeleteIcon,\r\n        prefix: this.prefix,\r\n        suffix: this.suffix\r\n      }\r\n    ), /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"search-bar-list-container\", ref: this.searchBarListRef }, /* @__PURE__ */ FSComponent.buildComponent(\r\n      List,\r\n      {\r\n        ref: this.listRef,\r\n        data: this.resultItems,\r\n        isListVisible: this.isListVisible,\r\n        isScrollable: true,\r\n        class: \"search-bar-list\",\r\n        renderItem: this.tryRenderItem.bind(this),\r\n        refreshOnUpdate: this.props.refreshOnUpdate,\r\n        gamepadNavigationOptions: __spreadProps(__spreadValues({}, this.gamepadNavigationOptions), {\r\n          onItemHovered: (item, index2) => {\r\n            var _a2, _b2;\r\n            const scrollToIndex = Math.max(0, index2);\r\n            this.listRef.instance.scrollToItem(scrollToIndex);\r\n            (_b2 = (_a2 = this.gamepadNavigationOptions).onItemHovered) == null ? void 0 : _b2.call(_a2, item, index2);\r\n          },\r\n          onItemSelected: (item, index2) => {\r\n            var _a2, _b2;\r\n            this.disableSearchResultNavigation();\r\n            (_b2 = (_a2 = this.gamepadNavigationOptions).onItemSelected) == null ? void 0 : _b2.call(_a2, item, index2);\r\n          },\r\n          isListFocused: this.isResultListFocus\r\n        })\r\n      }\r\n    )));\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    if (this.props.emptySearchOnInit) {\r\n      this.onSearchUpdated(\"\");\r\n    }\r\n    this.subs.push(\r\n      this.onInputSearchSub.sub((value2) => {\r\n        this.onSearchUpdated(value2);\r\n      }),\r\n      this.isSearchBarFocus.sub((focus) => {\r\n        var _a, _b;\r\n        if (focus) {\r\n          (_b = (_a = this.props).onListDisplayed) == null ? void 0 : _b.call(_a);\r\n        }\r\n      })\r\n    );\r\n  }\r\n  destroy() {\r\n    this.subs.forEach((s) => s.destroy());\r\n    this.askForResultNavigationSubscription.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\nconst _FacilitySearchUtils = class _FacilitySearchUtils {\r\n  constructor(bus) {\r\n    this.facilityLoader = null;\r\n    this.position = new GeoPoint(0, 0);\r\n    bus.getSubscriber().on(\"gps-position\").handle((pos) => {\r\n      this.position.set(pos.lat, pos.long);\r\n    });\r\n    this.facilityLoader = new FacilityLoader(FacilityRepository.getRepository(bus));\r\n  }\r\n  static getSearchUtils(bus) {\r\n    var _a;\r\n    return (_a = _FacilitySearchUtils.INSTANCE) != null ? _a : _FacilitySearchUtils.INSTANCE = new _FacilitySearchUtils(bus);\r\n  }\r\n  orderByIdentsAndDistance(a, b) {\r\n    const aIdent = a.icaoStruct.ident.trim();\r\n    const bIdent = b.icaoStruct.ident.trim();\r\n    if (aIdent === bIdent) {\r\n      const aDist = this.position.distance(a.lat, a.lon);\r\n      const bDist = this.position.distance(b.lat, b.lon);\r\n      return aDist - bDist;\r\n    } else {\r\n      return aIdent.localeCompare(bIdent);\r\n    }\r\n  }\r\n  /**\r\n   * Loads facilities based on an ident to search for, a search type and whether to exclude terminal facilities\r\n   * @param ident The ident to search for\r\n   * @param facilitySearchType The search type. Defaults to {@link FacilitySearchType.All}\r\n   * @param excludeTerminalFacilities Whether to exclude terminal facilities. Defaults to `true`.\r\n   * @returns a readonly array of facilities\r\n   */\r\n  async loadFacilities(ident, facilitySearchType = FacilitySearchType.All, excludeTerminalFacilities = true) {\r\n    if (this.facilityLoader === null) {\r\n      return Promise.resolve([]);\r\n    }\r\n    const icaos = await this.facilityLoader.searchByIdentWithIcaoStructs(facilitySearchType, ident, 15);\r\n    const facilities = (await this.facilityLoader.getFacilities(icaos)).filter(\r\n      (fac) => fac !== null && (!excludeTerminalFacilities || fac.icaoStruct.airport.length === 0)\r\n    );\r\n    facilities.sort((a, b) => this.orderByIdentsAndDistance(a, b));\r\n    return facilities;\r\n  }\r\n};\r\n_FacilitySearchUtils.INSTANCE = null;\r\nlet FacilitySearchUtils = _FacilitySearchUtils;\r\nclass FacilityResultItem extends GamepadUiComponent {\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.gamepadUiComponentRef.instance.onmousedown = (ev) => {\r\n      ev.preventDefault();\r\n      if (this.props.callback === void 0) {\r\n        return;\r\n      }\r\n      this.props.callback(this.props.facility);\r\n    };\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: mergeClassProp(\"facility-result-item\", this.props.class), ref: this.gamepadUiComponentRef }, /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"icon-container\" }, /* @__PURE__ */ FSComponent.buildComponent(\"icon-element\", { \"icon-url\": getFacilityIconPath(ICAO.getFacilityType(this.props.facility.icao)) })), /* @__PURE__ */ FSComponent.buildComponent(\"span\", { class: \"icao\" }, ICAO.getIdent(this.props.facility.icao), this.props.separator), /* @__PURE__ */ FSComponent.buildComponent(\"span\", { class: \"facility-name\" }, Utils.Translate(this.props.facility.name).padEnd(5, \"...\")));\r\n  }\r\n}\r\nconst _SearchFacilityHistoryManager = class _SearchFacilityHistoryManager {\r\n  constructor() {\r\n    this.MAX_ITEMS_STORED = 5;\r\n    this.storedICAOs = ArraySubject.create();\r\n    this.loadICAOsFromStorage();\r\n  }\r\n  /**\r\n   * Retrieves all the stored recent searches\r\n   */\r\n  loadICAOsFromStorage() {\r\n    let arrayICAOs = [];\r\n    const stringICAOs = DataStore.get(_SearchFacilityHistoryManager.DATASTORE_KEY);\r\n    if (stringICAOs === void 0 || typeof stringICAOs !== \"string\") {\r\n      this.storedICAOs.set(arrayICAOs);\r\n      return;\r\n    }\r\n    try {\r\n      arrayICAOs = JSON.parse(stringICAOs);\r\n    } catch (e) {\r\n      console.error(\"JSON failed, impossible to parse : \", stringICAOs);\r\n    }\r\n    this.storedICAOs.set(arrayICAOs);\r\n  }\r\n  saveICAOsToStorage() {\r\n    const stringICAOs = JSON.stringify(this.storedICAOs.getArray());\r\n    DataStore.set(_SearchFacilityHistoryManager.DATASTORE_KEY, stringICAOs);\r\n  }\r\n  mostRecentSearch(icao) {\r\n    const foundIndex = this.storedICAOs.getArray().findIndex((storedIcao) => storedIcao === icao);\r\n    if (foundIndex !== -1) {\r\n      this.storedICAOs.removeAt(foundIndex);\r\n    }\r\n    this.storedICAOs.insert(icao, 0);\r\n    while (this.storedICAOs.length > this.MAX_ITEMS_STORED) {\r\n      this.storedICAOs.removeAt(this.MAX_ITEMS_STORED);\r\n    }\r\n    this.saveICAOsToStorage();\r\n  }\r\n  /**\r\n   * Retrieve the search facility history as an array\r\n   * @param input the input of the search\r\n   * @param max_items the maximum number of items returned\r\n   * @returns the recent searches as an array of icaos\r\n   */\r\n  getStoredICAOs(input, max_items = this.MAX_ITEMS_STORED) {\r\n    this.loadICAOsFromStorage();\r\n    return this.storedICAOs.getArray().filter((icao) => ICAO.getIdent(icao).startsWith(input.toUpperCase())).slice(0, max_items);\r\n  }\r\n};\r\n_SearchFacilityHistoryManager.DATASTORE_KEY = \"efb.search-bar-history\";\r\nlet SearchFacilityHistoryManager = _SearchFacilityHistoryManager;\r\nclass SearchFacility extends SearchBar {\r\n  constructor(props) {\r\n    super(props);\r\n    this.facilityLoader = new FacilityLoader(FacilityRepository.getRepository(this.props.bus));\r\n    this.internalSelectedFacilitySub = Subject.create(null);\r\n    this.selectedFacilitySub = this.props.selectedFacilitySub || this.internalSelectedFacilitySub;\r\n    this.selectedFacility = null;\r\n    this.recentSearchesICAO = ArraySubject.create();\r\n    this.historyManager = new SearchFacilityHistoryManager();\r\n    this.DEBOUNCE_DURATION = 300;\r\n    this.ppos = new GeoPoint(0, 0);\r\n    this.currentHoveredItemIndex = Subject.create(-1);\r\n    this.gamepadNavigationOptions = __spreadProps(__spreadValues({}, this.props.gamepadNavigationOptions), {\r\n      onItemHovered: (item, index2) => {\r\n        var _a, _b;\r\n        this.currentHoveredItemIndex.set(index2);\r\n        (_b = (_a = this.props.gamepadNavigationOptions) == null ? void 0 : _a.onItemHovered) == null ? void 0 : _b.call(_a, item, index2);\r\n      },\r\n      onItemSelected: (item, index2) => {\r\n        var _a, _b;\r\n        this.itemCallback(item);\r\n        (_b = (_a = this.props.gamepadNavigationOptions) == null ? void 0 : _a.onItemSelected) == null ? void 0 : _b.call(_a, item, index2);\r\n      }\r\n    });\r\n    this.hideCustoms = MappedSubject.create(\r\n      ([focus, input]) => !focus || input.length !== 0,\r\n      this.isSearchBarFocus,\r\n      this.onInputSearchSub\r\n    );\r\n    this.customItemSelectRef = FSComponent.createRef();\r\n    this.customItemPositionRef = FSComponent.createRef();\r\n    this.onDelete = () => {\r\n      var _a, _b;\r\n      (_b = (_a = this.props).onDelete) == null ? void 0 : _b.call(_a);\r\n      this.prefix.set(\"\");\r\n    };\r\n    props.bus.getSubscriber().on(\"gps-position\").atFrequency(1).handle((pos) => this.ppos.set(pos.lat, pos.long));\r\n  }\r\n  renderItem(data, index2) {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      FacilityResultItem,\r\n      {\r\n        class: {\r\n          hover: this.currentHoveredItemIndex.map(\r\n            (hoveredItemIndex) => hoveredItemIndex === index2\r\n          )\r\n        },\r\n        facility: data,\r\n        separator: \", \",\r\n        callback: this.itemCallback.bind(this)\r\n      }\r\n    );\r\n  }\r\n  itemCallback(data) {\r\n    this.selectedFacility = data;\r\n    if (this.props.onFacilitySelectionFormatter) {\r\n      this.onInputSearchSub.set(this.props.onFacilitySelectionFormatter(data));\r\n    }\r\n    this.updateIcon(data);\r\n    this.props.onFacilityClick(data);\r\n    if (ICAO.getFacilityType(data.icao) !== FacilityType.USR) {\r\n      this.historyManager.mostRecentSearch(data.icao);\r\n    }\r\n    this.textBoxRef.instance.inputRef.instance.blur();\r\n  }\r\n  updateIcon(fac) {\r\n    this.prefix.set(/* @__PURE__ */ FSComponent.buildComponent(IconElement, { url: getFacilityIconPath(ICAO.getFacilityType(fac.icao)) }));\r\n  }\r\n  async updateResultItems(input) {\r\n    var _a;\r\n    const searchInput = input.trim();\r\n    const facilities = [];\r\n    const recentSearchs = (await this.updateRecentSearches(searchInput)).filter((e) => {\r\n      if (e === null) {\r\n        return false;\r\n      }\r\n      switch (this.props.facilitySearchType) {\r\n        case FacilitySearchType.Airport:\r\n          return ICAO.getFacilityType(e.icao) === FacilityType.Airport;\r\n        case FacilitySearchType.Intersection:\r\n          return ICAO.getFacilityType(e.icao) === FacilityType.Intersection;\r\n        case FacilitySearchType.Vor:\r\n          return ICAO.getFacilityType(e.icao) === FacilityType.VOR;\r\n        case FacilitySearchType.Ndb:\r\n          return ICAO.getFacilityType(e.icao) === FacilityType.NDB;\r\n        case FacilitySearchType.User:\r\n          return ICAO.getFacilityType(e.icao) === FacilityType.USR;\r\n        case FacilitySearchType.Visual:\r\n          return ICAO.getFacilityType(e.icao) === FacilityType.VIS;\r\n        case FacilitySearchType.AllExceptVisual:\r\n          return ICAO.getFacilityType(e.icao) !== FacilityType.VIS;\r\n        case FacilitySearchType.Boundary:\r\n        case FacilitySearchType.All:\r\n        default:\r\n          return true;\r\n      }\r\n    });\r\n    facilities.push(...recentSearchs);\r\n    if (searchInput.length > 0) {\r\n      facilities.push(\r\n        ...await FacilitySearchUtils.getSearchUtils(this.props.bus).loadFacilities(\r\n          searchInput,\r\n          this.props.facilitySearchType,\r\n          (_a = this.props.excludeTerminalFacilities) != null ? _a : true\r\n        )\r\n      );\r\n    }\r\n    return unique(facilities);\r\n  }\r\n  async updateRecentSearches(input) {\r\n    const facilitiesPromises = this.historyManager.getStoredICAOs(input, this.props.maxHistoryItems).map((icao) => {\r\n      return this.facilityLoader.getFacility(ICAO.getFacilityType(icao), icao).catch(() => {\r\n        return null;\r\n      });\r\n    });\r\n    return Promise.all(facilitiesPromises);\r\n  }\r\n  resetInput() {\r\n    var _a, _b;\r\n    this.onInputSearchSub.set(\"\");\r\n    (_b = (_a = this.props).onResetInput) == null ? void 0 : _b.call(_a);\r\n    this.internalSelectedFacilitySub.set(null);\r\n    this.prefix.set(\"\");\r\n  }\r\n  restoreInput() {\r\n    const inputHasBeenCleared = !this.onInputSearchSub.get();\r\n    if (this.selectedFacility && inputHasBeenCleared) {\r\n      this.itemCallback(this.selectedFacility);\r\n    }\r\n  }\r\n  onAfterRender(node) {\r\n    var _a;\r\n    super.onAfterRender(node);\r\n    this.selectedFacilitySubscription = (_a = this.props.selectedFacilitySub) == null ? void 0 : _a.sub((facility) => {\r\n      var _a2, _b;\r\n      const localFacility = this.selectedFacilitySub.get();\r\n      this.selectedFacility = facility;\r\n      if (facility) {\r\n        this.updateIcon(facility);\r\n      }\r\n      if ((facility == null ? void 0 : facility.icao) !== (localFacility == null ? void 0 : localFacility.icao) || this.props.selectedFacilitySub === this.selectedFacilitySub) {\r\n        this.onInputSearchSub.set(\r\n          facility ? ((_b = (_a2 = this.props).onFacilitySelectionFormatter) == null ? void 0 : _b.call(_a2, facility)) || facility.icaoStruct.ident : \"\"\r\n        );\r\n      }\r\n    }, true);\r\n    this.subs.push(\r\n      this.isSearchBarFocus.sub((focus) => {\r\n        var _a2, _b;\r\n        (_b = (_a2 = this.props).onTextBoxFocused) == null ? void 0 : _b.call(_a2, focus);\r\n        if (focus) {\r\n          this.onSearchUpdated(this.onInputSearchSub.get());\r\n        }\r\n      })\r\n    );\r\n    if (this.props.positionSelectable) {\r\n      FSComponent.render(\r\n        /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: { \"search-facility-custom-items\": true, hide: this.hideCustoms } }, /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"facility-result-item\", ref: this.customItemPositionRef }, /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"icon-container\" }, /* @__PURE__ */ FSComponent.buildComponent(\r\n          \"icon-element\",\r\n          {\r\n            \"icon-url\": `coui://html_ui/efb_ui/efb_os/Assets/icons/facilities/Challenges.svg`\r\n          }\r\n        )), /* @__PURE__ */ FSComponent.buildComponent(\r\n          TT,\r\n          {\r\n            key: \"@fs-base-efb-app-navigation-map,TT:EFB.NAVIGATION_MAP.YOUR_POSITION\",\r\n            format: \"ucfirst\"\r\n          }\r\n        ))),\r\n        this.searchBarListRef.instance,\r\n        0\r\n      );\r\n      this.customItemPositionRef.instance.onmousedown = () => {\r\n        this.itemCallback(\r\n          createCustomFacility(FacilityRepository.getRepository(this.props.bus), this.ppos.lat, this.ppos.lon)\r\n        );\r\n      };\r\n    }\r\n    this.onSearchUpdated(\"\");\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    (_a = this.selectedFacilitySubscription) == null ? void 0 : _a.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\nclass Slider extends GamepadUiComponent {\r\n  constructor(props) {\r\n    var _a, _b, _c, _d, _e, _f, _g;\r\n    super(props);\r\n    this.max = SubscribableUtils.toSubscribable((_a = this.props.max) != null ? _a : 100, true);\r\n    this.min = SubscribableUtils.toSubscribable((_b = this.props.min) != null ? _b : 0, true);\r\n    this.isButtonDisabled = SubscribableUtils.toSubscribable((_c = this.props.disabled) != null ? _c : false, true);\r\n    this.isButtonSelected = Subject.create(false);\r\n    this.precision = MappedSubject.create(\r\n      ([step, min, _max]) => this.convertValueToPercent(step + min),\r\n      SubscribableUtils.toSubscribable((_d = this.props.step) != null ? _d : 0, true),\r\n      this.min,\r\n      this.max\r\n    );\r\n    this.isButtonHoverable = MappedSubject.create(\r\n      ([isHoverable, isDisabled, isSelected]) => {\r\n        return isHoverable && !isDisabled && !isSelected;\r\n      },\r\n      SubscribableUtils.toSubscribable((_e = this.props.hoverable) != null ? _e : true, true),\r\n      this.isButtonDisabled,\r\n      this.isButtonSelected\r\n    );\r\n    this.verticalSlider = (_f = this.props.vertical) != null ? _f : false;\r\n    this.allowWheel = (_g = this.props.allowWheel) != null ? _g : false;\r\n    this.sliderBarRef = FSComponent.createRef();\r\n    this.sliderBarRect = new DOMRect();\r\n    this.allowMovement = false;\r\n    this.mousePos = 0;\r\n    this.subs = [];\r\n    this.onGlobalMouseUp = this._onGlobalMouseUp.bind(this);\r\n    this.onGlobalMouseMove = this._onGlobalMouseMove.bind(this);\r\n    if (SubscribableUtils.isMutableSubscribable(props.value)) {\r\n      this.value = props.value;\r\n    } else if (SubscribableUtils.isSubscribable(props.value)) {\r\n      this.value = Subject.create(props.value.get());\r\n      this.subscribableValueSubscription = props.value.sub((value2) => this.value.set(value2));\r\n    } else {\r\n      this.value = Subject.create(props.value);\r\n    }\r\n    this.valuePercent = Subject.create(this.convertValueToPercent(this.value.get()));\r\n    this.completionRatio = this.valuePercent.map((ratio) => `${ratio.toString()}%`);\r\n  }\r\n  convertValueToPercent(val) {\r\n    return Utils.Clamp(Math.abs((val - this.min.get()) / (this.max.get() - this.min.get())) * 100, 0, 100);\r\n  }\r\n  onMouseDown() {\r\n    var _a, _b;\r\n    if (this.disabled.get()) {\r\n      return;\r\n    }\r\n    (_b = (_a = this.props).onFocusIn) == null ? void 0 : _b.call(_a);\r\n    this.isButtonSelected.set(true);\r\n    this.allowMovement = true;\r\n    this.sliderBarRect = this.gamepadUiComponentRef.instance.getBoundingClientRect();\r\n    document.addEventListener(\"mouseup\", this.onGlobalMouseUp);\r\n    document.addEventListener(\"mouseleave\", this.onGlobalMouseUp);\r\n    document.addEventListener(\"mousemove\", this.onGlobalMouseMove);\r\n  }\r\n  onMouseWheel(e) {\r\n    e.preventDefault();\r\n    const precision = this.precision.get() || 1;\r\n    const scrollDirection = this.verticalSlider ? -1 : 1;\r\n    const step = precision * (e.deltaY < 1 ? -1 : 1) * scrollDirection;\r\n    this.valuePercent.set(Utils.Clamp(this.valuePercent.get() + step, 0, 100));\r\n  }\r\n  _onGlobalMouseUp() {\r\n    var _a, _b;\r\n    this.allowMovement = false;\r\n    (_b = (_a = this.props).onFocusOut) == null ? void 0 : _b.call(_a);\r\n    this.isButtonSelected.set(false);\r\n    document.removeEventListener(\"mouseup\", this.onGlobalMouseUp);\r\n    document.removeEventListener(\"mouseleave\", this.onGlobalMouseUp);\r\n    document.removeEventListener(\"mousemove\", this.onGlobalMouseMove);\r\n  }\r\n  _onGlobalMouseMove(e) {\r\n    const clientPos = this.verticalSlider ? e.clientY : e.clientX;\r\n    if (!this.allowMovement || clientPos === this.mousePos) {\r\n      return;\r\n    }\r\n    this.mousePos = clientPos;\r\n    let sliderStart = this.sliderBarRect.left;\r\n    let sliderEnd = this.sliderBarRect.right;\r\n    let sliderSize = this.sliderBarRect.width;\r\n    let startRatio = 0;\r\n    if (this.verticalSlider) {\r\n      sliderStart = this.sliderBarRect.top;\r\n      sliderEnd = this.sliderBarRect.bottom;\r\n      sliderSize = this.sliderBarRect.height;\r\n      startRatio = 100;\r\n    }\r\n    if (clientPos < sliderStart) {\r\n      this.valuePercent.set(startRatio);\r\n      return;\r\n    }\r\n    if (clientPos > sliderEnd) {\r\n      this.valuePercent.set(100 - startRatio);\r\n      return;\r\n    }\r\n    const mousePosOnSlider = Utils.Clamp(\r\n      Math.abs(startRatio - (clientPos - sliderStart) / sliderSize * 100),\r\n      0,\r\n      100\r\n    );\r\n    let sliderPos = mousePosOnSlider;\r\n    const precision = this.precision.get();\r\n    if (precision !== 0) {\r\n      const quotient = Math.trunc((mousePosOnSlider + precision / 2) / precision);\r\n      sliderPos = Utils.Clamp(quotient * precision, 0, 100);\r\n    }\r\n    this.valuePercent.set(sliderPos);\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        class: {\r\n          slider: true,\r\n          reverse: this.min > this.max,\r\n          vertical: this.verticalSlider,\r\n          hoverable: this.isButtonHoverable,\r\n          selected: this.isButtonSelected\r\n        },\r\n        style: { \"--ratio-value\": this.completionRatio },\r\n        ref: this.gamepadUiComponentRef\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"disabled-layer\" }),\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"slider-bar\", ref: this.sliderBarRef }, /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"slider-rail\" }), /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"slider-track\" }), /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"slider-button\" }))\r\n    );\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    Coherent.on(\"mouseReleaseOutsideView\", this.onGlobalMouseUp);\r\n    this.sliderBarRef.instance.onmousedown = this.onMouseDown.bind(this);\r\n    if (this.allowWheel) {\r\n      this.sliderBarRef.instance.onwheel = this.onMouseWheel.bind(this);\r\n    }\r\n    this.subs.push(\r\n      this.valuePercent.sub(\r\n        (val) => this.value.set(val * (this.max.get() - this.min.get()) / 100 + this.min.get())\r\n      ),\r\n      this.value.sub((value2) => {\r\n        var _a, _b;\r\n        (_b = (_a = this.props).onValueChange) == null ? void 0 : _b.call(_a, value2);\r\n        this.valuePercent.set(this.convertValueToPercent(value2));\r\n      })\r\n    );\r\n    const sliderElement = this.gamepadUiComponentRef.getOrDefault();\r\n    if (sliderElement !== null) {\r\n      const inputActions = this.verticalSlider ? {\r\n        decrease: InputAction.SCROLL_DOWN,\r\n        increase: InputAction.SCROLL_UP\r\n      } : {\r\n        decrease: InputAction.SCROLL_LEFT,\r\n        increase: InputAction.SCROLL_RIGHT\r\n      };\r\n      let isScrolling = false;\r\n      const addMoveSliderInputAction = (inputAction, factor) => this.inputManager.addInputActionOnHover(\r\n        sliderElement,\r\n        inputAction,\r\n        (axis) => {\r\n          var _a, _b;\r\n          if (!isScrolling) {\r\n            (_b = (_a = this.props).onFocusIn) == null ? void 0 : _b.call(_a);\r\n            this.isButtonSelected.set(true);\r\n            isScrolling = true;\r\n          }\r\n          this.valuePercent.set(this.valuePercent.get() + factor * axis * axis * 2);\r\n          return true;\r\n        },\r\n        { inputType: \"axis\" }\r\n      );\r\n      this.decreaseSliderActionDestructor = addMoveSliderInputAction(inputActions.decrease, -1);\r\n      this.increaseSliderActionDestructor = addMoveSliderInputAction(inputActions.increase, 1);\r\n      const releasedInputTypeOptions = { inputType: \"released\" };\r\n      const onMoveSliderInputActionReleased = () => {\r\n        var _a, _b;\r\n        if (isScrolling) {\r\n          (_b = (_a = this.props).onFocusOut) == null ? void 0 : _b.call(_a);\r\n          this.isButtonSelected.set(false);\r\n          isScrolling = false;\r\n        }\r\n        return false;\r\n      };\r\n      this.decreaseSliderActionReleasedDestructor = this.inputManager.addInputAction(\r\n        inputActions.decrease,\r\n        onMoveSliderInputActionReleased,\r\n        releasedInputTypeOptions\r\n      );\r\n      this.increaseSliderActionReleasedDestructor = this.inputManager.addInputAction(\r\n        inputActions.increase,\r\n        onMoveSliderInputActionReleased,\r\n        releasedInputTypeOptions\r\n      );\r\n    }\r\n  }\r\n  destroy() {\r\n    var _a, _b, _c, _d;\r\n    (_a = this.decreaseSliderActionDestructor) == null ? void 0 : _a.call(this);\r\n    (_b = this.increaseSliderActionDestructor) == null ? void 0 : _b.call(this);\r\n    (_c = this.decreaseSliderActionReleasedDestructor) == null ? void 0 : _c.call(this);\r\n    (_d = this.increaseSliderActionReleasedDestructor) == null ? void 0 : _d.call(this);\r\n    this.isButtonHoverable.destroy();\r\n    this.subs.forEach((sub) => sub.destroy());\r\n    super.destroy();\r\n  }\r\n}\r\nclass Switch extends GamepadUiComponent {\r\n  constructor() {\r\n    var _a;\r\n    super(...arguments);\r\n    this.turnOnDirection = (_a = this.props.turnOnDirection) != null ? _a : \"right\";\r\n    this.checked = SubscribableUtils.isMutableSubscribable(this.props.checked) ? this.props.checked : Subject.create(!!this.props.checked);\r\n    this.turnOnDirectionSub = this.turnOnDirection === \"right\" ? this.checked : this.checked.map(SubscribableMapFunctions.not());\r\n    this.sliderRef = FSComponent.createRef();\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.gamepadUiComponentRef.instance.onclick = () => {\r\n      if (SubscribableUtils.toSubscribable(this.props.disabled, true).get() === true) {\r\n        return;\r\n      }\r\n      this.checked.set(!this.checked.get());\r\n    };\r\n    this.checked.sub((checked) => {\r\n      if (this.props.callback) this.props.callback(checked);\r\n    });\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: { \"switch-container\": true, checked: this.checked }, ref: this.gamepadUiComponentRef }, /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: { slider: true, \"slider--right\": this.turnOnDirectionSub }, ref: this.sliderRef }, /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"disabled-layer\" })));\r\n  }\r\n}\r\nclass Tag extends GamepadUiComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.closeButtonRef = FSComponent.createRef();\r\n  }\r\n  renderButton() {\r\n    if (this.props.iconPath === void 0) {\r\n      return null;\r\n    }\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      IconButton,\r\n      {\r\n        class: \"tag-button\",\r\n        iconPath: this.props.iconPath,\r\n        callback: this.props.onButtonClick || this.props.callback,\r\n        hoverable: this.props.hoverable,\r\n        selected: this.props.selected,\r\n        disabled: this.props.disabled\r\n      }\r\n    );\r\n  }\r\n  render() {\r\n    var _a;\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        ref: this.gamepadUiComponentRef,\r\n        class: mergeClassProp(\"tag-container\", this.props.class, {\r\n          hide: (_a = this.props.visible) != null ? _a : false\r\n        }),\r\n        style: this.props.style\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\r\n        Marquee,\r\n        {\r\n          class: \"title light-text\",\r\n          speed: this.props.speed,\r\n          delay: this.props.delay,\r\n          startDelay: this.props.startDelay,\r\n          resetDelay: this.props.resetDelay,\r\n          activator: this.props.activator\r\n        },\r\n        /* @__PURE__ */ FSComponent.buildComponent(\r\n          TT,\r\n          {\r\n            key: this.props.title,\r\n            type: this.props.type,\r\n            format: this.props.format,\r\n            arguments: this.props.arguments\r\n          }\r\n        )\r\n      ),\r\n      this.renderButton()\r\n    );\r\n  }\r\n}\r\nclass TextArea extends GamepadUiComponent {\r\n  constructor() {\r\n    var _a, _b;\r\n    super(...arguments);\r\n    this.uuid = UUID.GenerateUuid();\r\n    this.textAreaRef = this.gamepadUiComponentRef;\r\n    this.model = this.props.model || Subject.create(SubscribableUtils.toSubscribable(this.props.value || \"\", true).get());\r\n    this.dispatchFocusOutEvent = this._dispatchFocusOutEvent.bind(this);\r\n    this.setValueFromOS = this._setValueFromOS.bind(this);\r\n    this._onKeyPress = this.onKeyPress.bind(this);\r\n    this._onInput = this.onInput.bind(this);\r\n    this.reloadLocalisation = this._reloadLocalisation.bind(this);\r\n    this._isFocused = Subject.create(false);\r\n    this.isFocused = this._isFocused;\r\n    this.placeholderKey = SubscribableUtils.toSubscribable((_a = this.props.placeholder) != null ? _a : \"\", true);\r\n    this.placeholderShown = Subject.create(true);\r\n    this.placeholderTranslation = Subject.create(this.placeholderKey.get());\r\n    this.hidePlaceholderOnFocus = (_b = this.props.hidePlaceholderOnFocus) != null ? _b : false;\r\n    this.subs = [];\r\n  }\r\n  _reloadLocalisation() {\r\n    this.placeholderTranslation.notify();\r\n  }\r\n  onKeyPress(event) {\r\n    var _a, _b;\r\n    const keyCode = event.keyCode || event.which;\r\n    (_b = (_a = this.props).onKeyPress) == null ? void 0 : _b.call(_a, event);\r\n    if (event.defaultPrevented) {\r\n      return;\r\n    }\r\n    if (this.props.charFilter && !this.props.charFilter(String.fromCharCode(keyCode))) {\r\n      event.preventDefault();\r\n      return;\r\n    }\r\n  }\r\n  onInput() {\r\n    const value2 = this.textAreaRef.instance.value;\r\n    if (value2 === this.model.get()) {\r\n      return;\r\n    }\r\n    this.model.set(value2);\r\n  }\r\n  onInputUpdated(value2) {\r\n    var _a, _b;\r\n    this.textAreaRef.instance.value = value2;\r\n    (_b = (_a = this.props).onInput) == null ? void 0 : _b.call(_a, this.textAreaRef.instance);\r\n    if (!this.hidePlaceholderOnFocus && value2.length === 0) {\r\n      this.placeholderShown.set(true);\r\n    }\r\n  }\r\n  onFocusIn() {\r\n    var _a, _b;\r\n    (_b = (_a = this.props).onFocusIn) == null ? void 0 : _b.call(_a);\r\n    if (this.hidePlaceholderOnFocus && this.textAreaRef.instance.value.length === 0) {\r\n      this.placeholderShown.set(false);\r\n    }\r\n  }\r\n  onFocusOut() {\r\n    var _a, _b;\r\n    (_b = (_a = this.props).onFocusOut) == null ? void 0 : _b.call(_a);\r\n    if (this.hidePlaceholderOnFocus && this.textAreaRef.instance.value.length === 0) {\r\n      this.placeholderShown.set(true);\r\n    }\r\n  }\r\n  focus() {\r\n    this.textAreaRef.instance.focus();\r\n  }\r\n  blur() {\r\n    this.textAreaRef.instance.blur();\r\n  }\r\n  value() {\r\n    return this.model.get();\r\n  }\r\n  clearInput() {\r\n    this.model.set(\"\");\r\n  }\r\n  _dispatchFocusOutEvent() {\r\n    this.textAreaRef.instance.blur();\r\n  }\r\n  _setValueFromOS(text) {\r\n    this.textAreaRef.instance.value = text;\r\n    this.textAreaRef.instance.dispatchEvent(new InputEvent(\"change\"));\r\n    this.textAreaRef.instance.dispatchEvent(new InputEvent(\"input\"));\r\n    this.textAreaRef.instance.dispatchEvent(new InputEvent(\"focusout\"));\r\n    this.textAreaRef.instance.blur();\r\n  }\r\n  getTranslation(key) {\r\n    var _a;\r\n    let translatedKey = key.startsWith(\"@\") || key.startsWith(\"TT\") ? Utils.Translate(key) : key;\r\n    (_a = this.props.placeholderArguments) == null ? void 0 : _a.forEach((argumentValue, argumentKey) => {\r\n      const argumentValueSub = SubscribableUtils.toSubscribable(argumentValue, true);\r\n      translatedKey = translatedKey.replace(argumentKey, argumentValueSub.get());\r\n    });\r\n    switch (this.props.placeholderFormat) {\r\n      case \"upper\":\r\n      case \"uppercase\":\r\n        return translatedKey.toUpperCase();\r\n      case \"lower\":\r\n      case \"lowercase\":\r\n        return translatedKey.toLowerCase();\r\n      case \"ucfirst\":\r\n        return `${translatedKey.charAt(0).toUpperCase()}${translatedKey.slice(1)}`;\r\n      case \"capitalize\":\r\n        return translatedKey.replace(/(^\\w{1})|(\\s+\\w{1})/g, (letter) => letter.toUpperCase());\r\n      default:\r\n        return translatedKey;\r\n    }\r\n  }\r\n  render() {\r\n    var _a;\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"textarea\",\r\n      {\r\n        id: this.uuid,\r\n        class: \"textarea\",\r\n        ref: this.textAreaRef,\r\n        placeholder: MappedSubject.create(\r\n          ([placeholderShown, placeholderKey]) => {\r\n            return placeholderShown ? this.getTranslation(placeholderKey) : \"\";\r\n          },\r\n          this.placeholderShown,\r\n          this.placeholderKey\r\n        ),\r\n        disabled: this.props.disabled,\r\n        value: SubscribableUtils.toSubscribable(this.props.model || this.props.value || \"\", true).get(),\r\n        rows: (_a = this.props.rows) != null ? _a : 4\r\n      }\r\n    );\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.subs.push(\r\n      this.model.sub((value2) => {\r\n        this.onInputUpdated(value2);\r\n      }, true),\r\n      this.placeholderKey.sub((key) => {\r\n        this.placeholderTranslation.set(key);\r\n      }, true)\r\n    );\r\n    this.textAreaRef.instance.addEventListener(\"focus\", () => {\r\n      if (this._isFocused.get()) {\r\n        return;\r\n      }\r\n      this._isFocused.set(true);\r\n      Coherent.trigger(\"FOCUS_INPUT_FIELD\", this.uuid, \"\", \"\", \"\", false);\r\n      Coherent.on(\"mousePressOutsideView\", this.dispatchFocusOutEvent);\r\n      Coherent.on(\"SetInputTextFromOS\", this.setValueFromOS);\r\n      this.onFocusIn();\r\n    });\r\n    this.textAreaRef.instance.addEventListener(\"focusout\", () => {\r\n      if (!this._isFocused.get()) {\r\n        return;\r\n      }\r\n      this._isFocused.set(false);\r\n      Coherent.trigger(\"UNFOCUS_INPUT_FIELD\", this.uuid);\r\n      Coherent.off(\"mousePressOutsideView\", this.dispatchFocusOutEvent);\r\n      Coherent.off(\"SetInputTextFromOS\", this.setValueFromOS);\r\n      this.onFocusOut();\r\n    });\r\n    this.textAreaRef.instance.addEventListener(\"input\", this._onInput);\r\n    this.textAreaRef.instance.addEventListener(\"keypress\", this._onKeyPress);\r\n    Coherent.on(\"RELOAD_LOCALISATION\", this.reloadLocalisation);\r\n    if (this.props.focusOnInit) {\r\n      this.focus();\r\n    }\r\n  }\r\n  destroy() {\r\n    this.subs.forEach((s) => s.destroy());\r\n    if (this._isFocused.get()) {\r\n      Coherent.trigger(\"UNFOCUS_INPUT_FIELD\", this.uuid);\r\n      Coherent.off(\"mousePressOutsideView\", this.dispatchFocusOutEvent);\r\n    }\r\n    this.textAreaRef.instance.removeEventListener(\"keypress\", this._onKeyPress);\r\n    this.textAreaRef.instance.removeEventListener(\"input\", this._onInput);\r\n    Coherent.off(\"RELOAD_LOCALISATION\", this.reloadLocalisation);\r\n    super.destroy();\r\n  }\r\n}\r\nclass Timer extends DisplayComponent {\r\n  constructor() {\r\n    var _a;\r\n    super(...arguments);\r\n    this.displayedTime = this.props.displayedTimeFormatter ? this.props.stopwatch.timerSeconds.map(this.props.displayedTimeFormatter) : this.props.stopwatch.timerSeconds.map((timeSeconds) => {\r\n      const date = /* @__PURE__ */ new Date(0);\r\n      date.setSeconds(timeSeconds);\r\n      return `${date.toISOString().substring(11, 19)}`;\r\n    });\r\n    this.showDotIndicator = SubscribableUtils.toSubscribable(\r\n      (_a = this.props.showDotIndicator) != null ? _a : false,\r\n      true\r\n    );\r\n    this.hideDotIndicator = this.showDotIndicator.map(SubscribableMapFunctions.not());\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"timer\" }, /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        class: {\r\n          dot: true,\r\n          hide: this.hideDotIndicator\r\n        }\r\n      }\r\n    ), /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"timer-text\" }, this.displayedTime));\r\n  }\r\n  destroy() {\r\n    this.displayedTime.destroy();\r\n    this.hideDotIndicator.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\nclass Tooltip extends GamepadUiComponent {\r\n  constructor() {\r\n    var _a;\r\n    super(...arguments);\r\n    this.forceHide = (_a = this.props.condition) != null ? _a : false;\r\n  }\r\n  render() {\r\n    var _a;\r\n    const position = (_a = this.props.position) != null ? _a : \"bottom\";\r\n    const content = value(this.props.content);\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"tooltip-component\", ref: this.gamepadUiComponentRef }, this.props.children, /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: { tooltip: true, forceHide: this.forceHide, [position]: true } }, !SubscribableUtils.isSubscribable(content) && typeof content !== \"string\" && isVNode(content) ? content : /* @__PURE__ */ FSComponent.buildComponent(TT, { class: \"tooltip-description\", key: content, format: \"ucfirst\" }), /* @__PURE__ */ FSComponent.buildComponent(\"svg\", { class: \"pointer-svg\" }, /* @__PURE__ */ FSComponent.buildComponent(\"path\", { d: \"M 0 9 l10 -8 l10 8\", fill: \"rgb(15, 20, 27)\", stroke: \"rgb(63, 67, 73)\", \"stroke-width\": \"2\" }))));\r\n  }\r\n}\r\nclass NotificationManager {\r\n  constructor(bus) {\r\n    this.bus = bus;\r\n    this.allowNotification = true;\r\n    this.isNotificationAppOpen = false;\r\n    this.pendingNotifications = [];\r\n    this._shownNotifications = ArraySubject.create([]);\r\n    this.shownNotifications = this._shownNotifications;\r\n    this._storedNotifications = ArraySubject.create([]);\r\n    this.storedNotifications = this._storedNotifications;\r\n    this._unseenNotificationsCount = Subject.create(0);\r\n    this.unseenNotificationsCount = this._unseenNotificationsCount;\r\n    this.maxShownItems = Subject.create(1);\r\n    this.timeBetweenNotifsMs = 500;\r\n    this.subs = [];\r\n    this.subs.push(\r\n      this._shownNotifications.sub(this.onShownNotifsUpdate.bind(this)),\r\n      this._storedNotifications.sub(this.onStoredNotifsUpdate.bind(this))\r\n    );\r\n  }\r\n  static getManager(bus) {\r\n    var _a;\r\n    return (_a = NotificationManager.INSTANCE) != null ? _a : NotificationManager.INSTANCE = new NotificationManager(bus);\r\n  }\r\n  /**\r\n   * internaly called by efb os\r\n   * @internal\r\n   */\r\n  update() {\r\n    if (!this.allowNotification) {\r\n      return;\r\n    }\r\n    if (this._shownNotifications.length >= this.maxShownItems.get() || this.pendingNotifications.length === 0) {\r\n      return;\r\n    }\r\n    const notifToShow = this.pendingNotifications.shift();\r\n    if (!notifToShow) {\r\n      return;\r\n    }\r\n    this._shownNotifications.insert(notifToShow);\r\n  }\r\n  onShownNotifsUpdate(_index, eventType, notif) {\r\n    if (eventType !== SubscribableArrayEventType.Added || notif === void 0) {\r\n      return;\r\n    }\r\n    const notifs = Array.isArray(notif) ? notif : [notif];\r\n    notifs.forEach((notifToDelete) => {\r\n      const notifDelay = notifToDelete.delayMs;\r\n      setTimeout(() => {\r\n        notifToDelete.hide.set(true);\r\n      }, notifDelay);\r\n      setTimeout(() => {\r\n        this._shownNotifications.removeItem(notifToDelete);\r\n      }, notifToDelete.delayMs + this.timeBetweenNotifsMs);\r\n    });\r\n  }\r\n  onStoredNotifsUpdate(_i, _t, _n, arr) {\r\n    var _a;\r\n    this._unseenNotificationsCount.set(\r\n      (_a = arr == null ? void 0 : arr.reduce((accumulator, notif) => accumulator + (notif.viewed.get() ? 0 : 1), 0)) != null ? _a : 0\r\n    );\r\n  }\r\n  /**\r\n   * Adds a notification to the stack\r\n   * @param notif the notification to add, could be a TemporaryNotification or a PermanentNotification\r\n   */\r\n  addNotification(notif) {\r\n    notif.createdAt = /* @__PURE__ */ new Date();\r\n    if (isNotificationPermanent(notif)) {\r\n      this._storedNotifications.insert(notif);\r\n      if (this.isNotificationAppOpen) {\r\n        return;\r\n      }\r\n    }\r\n    this.pendingNotifications.push(notif);\r\n  }\r\n  /**\r\n   * Removes a permanent notification from the notification menu\r\n   * @param notif the notification to remove\r\n   */\r\n  deletePermanentNotification(notif) {\r\n    this._storedNotifications.removeItem(notif);\r\n  }\r\n  /* Removes all permanent notifications from the notification menu */\r\n  clearNotifications() {\r\n    this._storedNotifications.clear();\r\n  }\r\n  onNotificationAppOpen() {\r\n    this.isNotificationAppOpen = true;\r\n    this.pendingNotifications = this.pendingNotifications.filter(\r\n      (notif) => !isNotificationPermanent(notif)\r\n    );\r\n    this._shownNotifications.getArray().forEach((notif) => {\r\n      if (isNotificationPermanent(notif)) {\r\n        this._shownNotifications.removeItem(notif);\r\n      }\r\n    });\r\n  }\r\n  onNotificationAppClosed() {\r\n    this.isNotificationAppOpen = false;\r\n    for (let i = 0; i < this._storedNotifications.length; i++) {\r\n      this._storedNotifications.get(i).viewed.set(true);\r\n    }\r\n    this._unseenNotificationsCount.set(0);\r\n  }\r\n}\r\nconst _OnboardingManager = class _OnboardingManager {\r\n  constructor() {\r\n    this.isStarted = false;\r\n    this.stepIndex = 0;\r\n    this.steps = [];\r\n  }\r\n  static getManager() {\r\n    var _a;\r\n    return (_a = _OnboardingManager.INSTANCE) != null ? _a : _OnboardingManager.INSTANCE = new _OnboardingManager();\r\n  }\r\n  bindContainer(containerRef) {\r\n    _OnboardingManager.getManager().containerRef = containerRef;\r\n  }\r\n  start(onboarding) {\r\n    const onboardingManager = _OnboardingManager.getManager();\r\n    onboardingManager.steps = onboarding.steps.map((step) => {\r\n      return __spreadProps(__spreadValues({}, step), { actions: [...step.actions] });\r\n    });\r\n    if (!onboardingManager.containerRef) {\r\n      console.warn(\"Onboarding container not bound\");\r\n      return;\r\n    }\r\n    if (!onboardingManager.steps.length) {\r\n      console.warn(\"No onboarding steps provided\");\r\n      return;\r\n    }\r\n    if (onboardingManager.isStarted) {\r\n      console.warn(\"Onboarding already started\");\r\n      return;\r\n    }\r\n    onboardingManager.stepIndex = 0;\r\n    onboardingManager.isStarted = true;\r\n    onboardingManager.onFinish = onboarding.onFinish;\r\n    onboardingManager.steps[onboardingManager.stepIndex].actions.unshift(\r\n      {\r\n        key: \"@fs-base-efb,TT:EFB.COMMON.QUICK_TOUR_AROUND\",\r\n        callback: () => {\r\n          onboardingManager.next();\r\n        }\r\n      },\r\n      {\r\n        key: \"@fs-base-efb,TT:EFB.COMMON.SKIP\",\r\n        callback: () => {\r\n          onboardingManager.stop();\r\n        }\r\n      }\r\n    );\r\n    onboardingManager.containerRef.instance.show();\r\n    onboardingManager.containerRef.instance.setStep(onboardingManager.steps[onboardingManager.stepIndex]);\r\n    onboardingManager.stepIndex++;\r\n    return;\r\n  }\r\n  next() {\r\n    var _a;\r\n    const onboardingManager = _OnboardingManager.getManager();\r\n    if (!onboardingManager.isStarted) {\r\n      console.warn(\"Onboarding not started. You should call start method first\");\r\n      return;\r\n    }\r\n    if (onboardingManager.stepIndex >= onboardingManager.steps.length) {\r\n      onboardingManager.stop();\r\n      return;\r\n    }\r\n    onboardingManager.steps[onboardingManager.stepIndex].actions.unshift({\r\n      key: \"@fs-base-efb,TT:EFB.COMMON.NEXT\",\r\n      callback: () => {\r\n        onboardingManager.next();\r\n      }\r\n    });\r\n    (_a = onboardingManager.containerRef) == null ? void 0 : _a.instance.setStep(onboardingManager.steps[onboardingManager.stepIndex]);\r\n    onboardingManager.stepIndex++;\r\n    return;\r\n  }\r\n  stop() {\r\n    var _a, _b;\r\n    const onboardingManager = _OnboardingManager.getManager();\r\n    onboardingManager.isStarted = false;\r\n    onboardingManager.steps = [];\r\n    (_a = onboardingManager.containerRef) == null ? void 0 : _a.instance.hide();\r\n    (_b = onboardingManager.onFinish) == null ? void 0 : _b.call(onboardingManager);\r\n  }\r\n};\r\n_OnboardingManager.INSTANCE = void 0;\r\nlet OnboardingManager = _OnboardingManager;\r\nconst _EfbCommonSettingsManager = class _EfbCommonSettingsManager extends DefaultUserSettingManager {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.debounceTimer = new DebounceTimer();\r\n    this.ignoredForceSaveSettingKeys = [];\r\n  }\r\n  /** @inheritdoc */\r\n  onSettingValueChanged(entry, value2) {\r\n    super.onSettingValueChanged(entry, value2);\r\n    if (!this.ignoredForceSaveSettingKeys.includes(entry.setting.definition.name)) {\r\n      this.debounceTimer.schedule(() => {\r\n        Coherent.trigger(\"EFB_PERSISTENT_SETTINGS_SAVE\");\r\n      }, _EfbCommonSettingsManager.debounceTimeout);\r\n    }\r\n  }\r\n};\r\n_EfbCommonSettingsManager.debounceTimeout = 5e3;\r\nlet EfbCommonSettingsManager = _EfbCommonSettingsManager;\r\nvar UnitsNavAngleSettingMode = /* @__PURE__ */ ((UnitsNavAngleSettingMode2) => {\r\n  UnitsNavAngleSettingMode2[\"Magnetic\"] = \"magnetic\";\r\n  UnitsNavAngleSettingMode2[\"True\"] = \"true\";\r\n  return UnitsNavAngleSettingMode2;\r\n})(UnitsNavAngleSettingMode || {});\r\nvar UnitsSpeedSettingMode = /* @__PURE__ */ ((UnitsSpeedSettingMode2) => {\r\n  UnitsSpeedSettingMode2[\"Nautical\"] = \"KTS\";\r\n  UnitsSpeedSettingMode2[\"Metric\"] = \"KPH\";\r\n  return UnitsSpeedSettingMode2;\r\n})(UnitsSpeedSettingMode || {});\r\nvar UnitsDistanceSettingMode = /* @__PURE__ */ ((UnitsDistanceSettingMode2) => {\r\n  UnitsDistanceSettingMode2[\"Nautical\"] = \"NM\";\r\n  UnitsDistanceSettingMode2[\"Metric\"] = \"KM\";\r\n  return UnitsDistanceSettingMode2;\r\n})(UnitsDistanceSettingMode || {});\r\nvar UnitsSmallDistanceSettingMode = /* @__PURE__ */ ((UnitsSmallDistanceSettingMode2) => {\r\n  UnitsSmallDistanceSettingMode2[\"Feet\"] = \"FT\";\r\n  UnitsSmallDistanceSettingMode2[\"Meters\"] = \"M\";\r\n  return UnitsSmallDistanceSettingMode2;\r\n})(UnitsSmallDistanceSettingMode || {});\r\nvar UnitsAltitudeSettingMode = /* @__PURE__ */ ((UnitsAltitudeSettingMode2) => {\r\n  UnitsAltitudeSettingMode2[\"Feet\"] = \"FT\";\r\n  UnitsAltitudeSettingMode2[\"Meters\"] = \"M\";\r\n  return UnitsAltitudeSettingMode2;\r\n})(UnitsAltitudeSettingMode || {});\r\nvar UnitsWeightSettingMode = /* @__PURE__ */ ((UnitsWeightSettingMode2) => {\r\n  UnitsWeightSettingMode2[\"Pounds\"] = \"LBS\";\r\n  UnitsWeightSettingMode2[\"Kilograms\"] = \"KG\";\r\n  return UnitsWeightSettingMode2;\r\n})(UnitsWeightSettingMode || {});\r\nvar UnitsVolumeSettingMode = /* @__PURE__ */ ((UnitsVolumeSettingMode2) => {\r\n  UnitsVolumeSettingMode2[\"Gallons\"] = \"GAL US\";\r\n  UnitsVolumeSettingMode2[\"Liters\"] = \"L\";\r\n  return UnitsVolumeSettingMode2;\r\n})(UnitsVolumeSettingMode || {});\r\nvar UnitsTemperatureSettingMode = /* @__PURE__ */ ((UnitsTemperatureSettingMode2) => {\r\n  UnitsTemperatureSettingMode2[\"Fahrenheit\"] = \"\u00B0F\";\r\n  UnitsTemperatureSettingMode2[\"Celsius\"] = \"\u00B0C\";\r\n  return UnitsTemperatureSettingMode2;\r\n})(UnitsTemperatureSettingMode || {});\r\nvar UnitsTimeSettingMode = /* @__PURE__ */ ((UnitsTimeSettingMode2) => {\r\n  UnitsTimeSettingMode2[\"Local12\"] = \"local-12\";\r\n  UnitsTimeSettingMode2[\"Local24\"] = \"local-24\";\r\n  return UnitsTimeSettingMode2;\r\n})(UnitsTimeSettingMode || {});\r\nconst _UnitsSettingsManager = class _UnitsSettingsManager extends EfbCommonSettingsManager {\r\n  constructor(bus, settingsDefs) {\r\n    super(bus, settingsDefs, true);\r\n    this.navAngleUnitsSub = Subject.create(_UnitsSettingsManager.MAGNETIC_BEARING);\r\n    this.navAngleUnits = this.navAngleUnitsSub;\r\n    this.timeUnitsSub = Subject.create(\r\n      \"local-12\"\r\n      /* Local12 */\r\n    );\r\n    this._timeUnits = this.timeUnitsSub;\r\n    this.areSubscribablesInit = false;\r\n    this.areSubscribablesInit = true;\r\n    for (const entry of this.settings.values()) {\r\n      this.updateUnitsSubjects(entry.setting.definition.name, entry.setting.value);\r\n    }\r\n  }\r\n  onSettingValueChanged(entry, value2) {\r\n    if (this.areSubscribablesInit) {\r\n      this.updateUnitsSubjects(entry.setting.definition.name, value2);\r\n    }\r\n    super.onSettingValueChanged(entry, value2);\r\n  }\r\n  /**\r\n   * Checks if the values loaded from the datastorage correspond to the settings types.\r\n   */\r\n  checkLoadedValues() {\r\n    checkUserSetting(this.getSetting(\"unitsNavAngle\"), UnitsNavAngleSettingMode);\r\n    checkUserSetting(this.getSetting(\"unitsSpeed\"), UnitsSpeedSettingMode);\r\n    checkUserSetting(this.getSetting(\"unitsDistance\"), UnitsDistanceSettingMode);\r\n    checkUserSetting(this.getSetting(\"unitsAltitude\"), UnitsAltitudeSettingMode);\r\n    checkUserSetting(this.getSetting(\"unitsSmallDistance\"), UnitsSmallDistanceSettingMode);\r\n    checkUserSetting(this.getSetting(\"unitsWeight\"), UnitsWeightSettingMode);\r\n    checkUserSetting(this.getSetting(\"unitsVolume\"), UnitsVolumeSettingMode);\r\n    checkUserSetting(this.getSetting(\"unitsTemperature\"), UnitsTemperatureSettingMode);\r\n    checkUserSetting(this.getSetting(\"unitsTime\"), UnitsTimeSettingMode);\r\n  }\r\n  updateUnitsSubjects(settingName, value2) {\r\n    switch (settingName) {\r\n      case \"unitsNavAngle\":\r\n        this.navAngleUnitsSub.set(\r\n          value2 === \"true\" ? _UnitsSettingsManager.TRUE_BEARING : _UnitsSettingsManager.MAGNETIC_BEARING\r\n        );\r\n        break;\r\n      case \"unitsTime\":\r\n        this.timeUnitsSub.set(value2);\r\n        break;\r\n      case \"unitsDistance\":\r\n        this.getSetting(\"unitsSmallDistance\").set(\r\n          value2 === \"NM\" ? \"FT\" : \"M\"\r\n          /* Meters */\r\n        );\r\n    }\r\n  }\r\n  /**\r\n   * Gets a unit type subscribable from a unit setting name\r\n   * @param settingName the name of the unit setting\r\n   * @returns a Subscribable containing the unit type. If the value in the dataStorage is unvalid, it returns the default unitType\r\n   */\r\n  getSettingUnitType(settingName) {\r\n    const setting = this.getSetting(settingName);\r\n    return setting.map(\r\n      (settingValue) => {\r\n        var _a;\r\n        return (_a = UnitTypesMap[settingValue]) != null ? _a : UnitTypesMap[setting.definition.defaultValue];\r\n      }\r\n    );\r\n  }\r\n};\r\n_UnitsSettingsManager.TRUE_BEARING = BasicNavAngleUnit.create(false);\r\n_UnitsSettingsManager.MAGNETIC_BEARING = BasicNavAngleUnit.create(true);\r\nlet UnitsSettingsManager = _UnitsSettingsManager;\r\nconst UnitTypesMap = {\r\n  /** Mapped speed unit types */\r\n  KTS: UnitType.KNOT,\r\n  KPH: UnitType.KPH,\r\n  /** Mapped distance unit type */\r\n  NM: UnitType.NMILE,\r\n  KM: UnitType.KILOMETER,\r\n  /** Mapped altitude unit type */\r\n  FT: UnitType.FOOT,\r\n  M: UnitType.METER,\r\n  /** Mapped weight unit type */\r\n  LBS: UnitType.POUND,\r\n  KG: UnitType.KILOGRAM,\r\n  /** Mapped volume unit type */\r\n  \"GAL US\": UnitType.GALLON,\r\n  L: UnitType.LITER,\r\n  /** Mapped temperature unit type */\r\n  \"\u00B0C\": UnitType.CELSIUS,\r\n  \"\u00B0F\": UnitType.FAHRENHEIT\r\n};\r\nclass UnitsSettings {\r\n  /**\r\n   * Retrieves a manager for display units settings.\r\n   * @param bus The event bus.\r\n   * @returns a manager for display units settings.\r\n   */\r\n  static getManager(bus) {\r\n    var _a;\r\n    return (_a = UnitsSettings.INSTANCE) != null ? _a : UnitsSettings.INSTANCE = new UnitsSettingsManager(bus, [\r\n      {\r\n        name: \"unitsNavAngle\",\r\n        defaultValue: UnitsNavAngleSettingMode.Magnetic\r\n      },\r\n      {\r\n        name: \"unitsSpeed\",\r\n        defaultValue: UnitsSpeedSettingMode.Nautical\r\n      },\r\n      {\r\n        name: \"unitsDistance\",\r\n        defaultValue: UnitsDistanceSettingMode.Nautical\r\n      },\r\n      {\r\n        name: \"unitsSmallDistance\",\r\n        defaultValue: UnitsSmallDistanceSettingMode.Feet\r\n      },\r\n      {\r\n        name: \"unitsAltitude\",\r\n        defaultValue: UnitsAltitudeSettingMode.Feet\r\n      },\r\n      {\r\n        name: \"unitsWeight\",\r\n        defaultValue: UnitsWeightSettingMode.Pounds\r\n      },\r\n      {\r\n        name: \"unitsVolume\",\r\n        defaultValue: UnitsVolumeSettingMode.Gallons\r\n      },\r\n      {\r\n        name: \"unitsTemperature\",\r\n        defaultValue: UnitsTemperatureSettingMode.Celsius\r\n      },\r\n      {\r\n        name: \"unitsTime\",\r\n        defaultValue: UnitsTimeSettingMode.Local12\r\n      }\r\n    ]);\r\n  }\r\n}\r\nvar EfbMode = /* @__PURE__ */ ((EfbMode2) => {\r\n  EfbMode2[EfbMode2[\"2D\"] = 0] = \"2D\";\r\n  EfbMode2[EfbMode2[\"3D\"] = 1] = \"3D\";\r\n  return EfbMode2;\r\n})(EfbMode || {});\r\nvar EfbSizeSettingMode = /* @__PURE__ */ ((EfbSizeSettingMode2) => {\r\n  EfbSizeSettingMode2[EfbSizeSettingMode2[\"Small\"] = 0] = \"Small\";\r\n  EfbSizeSettingMode2[EfbSizeSettingMode2[\"Medium\"] = 1] = \"Medium\";\r\n  EfbSizeSettingMode2[EfbSizeSettingMode2[\"Large\"] = 2] = \"Large\";\r\n  return EfbSizeSettingMode2;\r\n})(EfbSizeSettingMode || {});\r\nvar OrientationSettingMode = /* @__PURE__ */ ((OrientationSettingMode2) => {\r\n  OrientationSettingMode2[OrientationSettingMode2[\"Vertical\"] = 0] = \"Vertical\";\r\n  OrientationSettingMode2[OrientationSettingMode2[\"Horizontal\"] = 1] = \"Horizontal\";\r\n  return OrientationSettingMode2;\r\n})(OrientationSettingMode || {});\r\nclass EfbSettingsManager extends EfbCommonSettingsManager {\r\n  constructor(bus, settingsDefs) {\r\n    super(bus, settingsDefs);\r\n    this.ignoredForceSaveSettingKeys = [\"mode\", \"autoBrightnessPercentage\"];\r\n    let stringToArray = [];\r\n    try {\r\n      stringToArray = JSON.parse(this.getSetting(\"favoriteApps\").get());\r\n    } catch (error) {\r\n      console.error(\"JSON failed, impossible to parse : \", this.getSetting(\"favoriteApps\").get());\r\n      stringToArray = [\"AtlasApp\", \"AircraftApp\", \"PilotBookApp\", \"SettingsApp\"];\r\n    }\r\n    this.favoriteApps = stringToArray;\r\n  }\r\n  get favoriteAppsArray() {\r\n    return this.favoriteApps;\r\n  }\r\n  /**\r\n   * Checks if the values loaded from the datastorage correspond to the settings types.\r\n   */\r\n  checkLoadedValues() {\r\n    checkUserSetting(this.getSetting(\"efbSize\"), EfbSizeSettingMode);\r\n    checkUserSetting(this.getSetting(\"orientationMode\"), OrientationSettingMode);\r\n  }\r\n  /**\r\n   * Add an app to the favorites\r\n   * @param app The app to add\r\n   * @returns the EFB settings manager\r\n   */\r\n  addAppToFavorites(app) {\r\n    this.favoriteApps.push(app.internalName);\r\n    this.onFavoriteAppsUpdated();\r\n    return this;\r\n  }\r\n  /**\r\n   * Remove an app from the favorites\r\n   * @param app The app to remove\r\n   * @returns the EFB settings manager\r\n   */\r\n  removeAppFromFavorites(app) {\r\n    const index2 = this.favoriteApps.indexOf(app.internalName);\r\n    if (index2 !== -1) {\r\n      this.favoriteApps.splice(index2, 1);\r\n    }\r\n    this.onFavoriteAppsUpdated();\r\n    return this;\r\n  }\r\n  /**\r\n   * Update the favoriteSetting and the apps array in the EFB instance in order to rerender when the favorite apps change\r\n   */\r\n  onFavoriteAppsUpdated() {\r\n    const stringSetting = JSON.stringify(this.favoriteApps);\r\n    this.getSetting(\"favoriteApps\").set(stringSetting);\r\n    Efb.apps().getArray().forEach((app) => {\r\n      app.favoriteIndex = this.favoriteApps.indexOf(app.internalName);\r\n    });\r\n    this.bus.pub(\"favs-update\", \"\");\r\n  }\r\n  updateFavoriteAppsArray(value2) {\r\n    let arraySetting = [];\r\n    try {\r\n      arraySetting = JSON.parse(value2);\r\n    } catch (error) {\r\n      console.error(\"JSON failed, impossible to parse : \", value2);\r\n      arraySetting = [\"AtlasApp\", \"AircraftApp\", \"PilotBookApp\", \"SettingsApp\"];\r\n    }\r\n    this.favoriteApps = arraySetting;\r\n  }\r\n  onSettingValueChanged(entry, value2) {\r\n    super.onSettingValueChanged(entry, value2);\r\n    const settingName = entry.setting.definition.name;\r\n    switch (settingName) {\r\n      case \"efbSize\":\r\n        if (typeof value2 === \"string\") {\r\n          value2 = EfbSizeSettingMode[value2.toString()];\r\n        }\r\n        Coherent.call(\"SET_SIZE\", value2);\r\n        break;\r\n      case \"orientationMode\":\r\n        if (typeof value2 === \"string\") {\r\n          value2 = OrientationSettingMode[value2.toString()];\r\n        }\r\n        Coherent.call(\"SET_ORIENTATION\", value2);\r\n        break;\r\n      case \"isBrightnessAuto\":\r\n        if (typeof value2 !== \"boolean\") {\r\n          break;\r\n        }\r\n        if (value2 === true) {\r\n          this.getSetting(\"manualBrightnessPercentage\").set(\r\n            this.getSetting(\"autoBrightnessPercentage\").get()\r\n          );\r\n        }\r\n        Coherent.call(\"SET_IS_AUTO_BRIGHTNESS\", this.getSetting(\"isBrightnessAuto\").get());\r\n        break;\r\n      case \"manualBrightnessPercentage\":\r\n        if (this.getSetting(\"isBrightnessAuto\").get()) {\r\n          break;\r\n        }\r\n        if (typeof value2 !== \"number\") {\r\n          break;\r\n        }\r\n        Coherent.call(\"SET_MANUAL_BRIGHTNESS\", value2 / 100);\r\n        break;\r\n      case \"favoriteApps\":\r\n        this.updateFavoriteAppsArray(value2.toString());\r\n        break;\r\n    }\r\n  }\r\n}\r\nclass EfbSettings {\r\n  constructor() {\r\n  }\r\n  static getManager(bus) {\r\n    var _a;\r\n    return (_a = EfbSettings.INSTANCE) != null ? _a : EfbSettings.INSTANCE = new EfbSettingsManager(bus, [\r\n      {\r\n        name: \"mode\",\r\n        defaultValue: 0\r\n        /* 2D */\r\n      },\r\n      {\r\n        name: \"efbSize\",\r\n        defaultValue: 0\r\n        /* Small */\r\n      },\r\n      {\r\n        name: \"orientationMode\",\r\n        defaultValue: 0\r\n        /* Vertical */\r\n      },\r\n      {\r\n        name: \"isBrightnessAuto\",\r\n        defaultValue: true\r\n      },\r\n      {\r\n        name: \"autoBrightnessPercentage\",\r\n        defaultValue: 50\r\n      },\r\n      {\r\n        name: \"manualBrightnessPercentage\",\r\n        defaultValue: 50\r\n      },\r\n      {\r\n        name: \"favoriteApps\",\r\n        defaultValue: '[\"AtlasApp\",\"AircraftApp\",\"PilotBookApp\",\"SettingsApp\"]'\r\n      },\r\n      {\r\n        name: \"defaultApp\",\r\n        defaultValue: \"\"\r\n      }\r\n    ]);\r\n  }\r\n}\r\nclass EfbSettingsSaveManager extends UserSettingSaveManager {\r\n  constructor(bus) {\r\n    const settings = [\r\n      ...EfbSettings.getManager(bus).getAllSettings(),\r\n      ...UnitsSettings.getManager(bus).getAllSettings()\r\n    ];\r\n    super(settings, bus);\r\n    this.bus = bus;\r\n    this.prefix = \"efb-core-settings.2025-04-01.\";\r\n    this.oldPrefixes = [\"efb-2024-11-07.\", \"efb-2024-08-28.\"];\r\n    this.settings = [];\r\n    this.settings.push(...settings);\r\n  }\r\n  load(key) {\r\n    super.load(`${this.prefix}${key}`);\r\n    UnitsSettings.getManager(this.bus).checkLoadedValues();\r\n    EfbSettings.getManager(this.bus).checkLoadedValues();\r\n    this.save(key);\r\n  }\r\n  save(key) {\r\n    super.save(`${this.prefix}${key}`);\r\n  }\r\n  startAutoSave(key) {\r\n    super.startAutoSave(`${this.prefix}${key}`);\r\n  }\r\n  stopAutoSave(key) {\r\n    super.stopAutoSave(`${this.prefix}${key}`);\r\n  }\r\n  pruneOldPrefixes() {\r\n    for (const prefix of this.oldPrefixes) {\r\n      const storage = GetDataStorage().searchData(prefix);\r\n      for (const entry of storage) {\r\n        if (entry.key.startsWith(`persistent-setting.${this.prefix}`)) {\r\n          GetDataStorage().deleteData(entry.key);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\nclass ViewStackContainer extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.rootRef = FSComponent.createRef();\r\n  }\r\n  renderView(view) {\r\n    FSComponent.render(view, this.rootRef.instance);\r\n  }\r\n  render() {\r\n    var _a;\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        ref: this.rootRef,\r\n        class: mergeClassProp(\"view-stack\", this.props.class),\r\n        id: (_a = this.props.id) != null ? _a : \"\"\r\n      }\r\n    );\r\n  }\r\n}\r\nclass ViewWrapper extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.rootRef = FSComponent.createRef();\r\n    this.classList = SetSubject.create([\"view\", \"hidden\", this.props.viewName]);\r\n    this.subs = [];\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.subs.push(\r\n      this.props.isActive.sub((isActive) => {\r\n        if (isActive) {\r\n          this.classList.delete(\"hidden\");\r\n        } else {\r\n          this.classList.add(\"hidden\");\r\n        }\r\n      })\r\n    );\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { ref: this.rootRef, class: this.classList }, this.props.children);\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    const root = this.rootRef.getOrDefault();\r\n    if (root !== null) {\r\n      (_a = root.parentNode) == null ? void 0 : _a.removeChild(root);\r\n    }\r\n    this.subs.forEach((x) => x.destroy());\r\n    super.destroy();\r\n  }\r\n}\r\nclass ViewService {\r\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n  constructor(_viewKey, _appViewService) {\r\n    this.registeredViews = MapSubject.create();\r\n    this.viewTabs = [];\r\n    this.visibleViewTabs = [];\r\n    this.viewTabVisibilitySubscriptions = [];\r\n    this.hasInitialized = false;\r\n    this.activeViewEntry = Subject.create(null);\r\n    this.internalInputStackManager = new InternalInputManager(InternalInputActions);\r\n  }\r\n  openNextVisibleTab(forward = true) {\r\n    if (this.visibleViewTabs.length <= 1) {\r\n      return false;\r\n    }\r\n    const activeTabIndex = this.visibleViewTabs.findIndex((tab) => tab.isActive.get());\r\n    if (activeTabIndex === -1) {\r\n      return false;\r\n    }\r\n    const direction = forward ? 1 : -1;\r\n    const nextTabIndex = (activeTabIndex + this.visibleViewTabs.length + direction) % this.visibleViewTabs.length;\r\n    this.openPage(this.visibleViewTabs[nextTabIndex].key);\r\n    return true;\r\n  }\r\n  getRegisteredViews() {\r\n    return this.registeredViews;\r\n  }\r\n  getViewEntry(key) {\r\n    const viewEntry = this.registeredViews.get(key);\r\n    if (viewEntry === void 0) {\r\n      throw new Error(`View \"${key}\" doesn't exists`);\r\n    }\r\n    return viewEntry;\r\n  }\r\n  registerView(key, vNodeFactory) {\r\n    if (this.registeredViews.has(key)) {\r\n      throw new Error(`View \"${key}\" is already used`);\r\n    }\r\n    const isActive = Subject.create(false);\r\n    const isDisabled = Subject.create(false);\r\n    const isTabVisible = Subject.create(true);\r\n    const isInit = false;\r\n    const viewEntry = {\r\n      key,\r\n      render: vNodeFactory,\r\n      vNode: null,\r\n      containerRef: FSComponent.createRef(),\r\n      ref: null,\r\n      isActive,\r\n      isDisabled,\r\n      isTabVisible,\r\n      isInit\r\n    };\r\n    this.initViewEntry(viewEntry);\r\n    this.registeredViews.set(key, viewEntry);\r\n    this.viewTabs.push(viewEntry);\r\n    this.viewTabVisibilitySubscriptions.push(\r\n      isTabVisible.sub(() => {\r\n        this.visibleViewTabs = this.viewTabs.filter(\r\n          (tab) => tab.isTabVisible.get() === true\r\n        );\r\n      })\r\n    );\r\n    return viewEntry;\r\n  }\r\n  onContainerRendered(viewRef) {\r\n    this.viewRef = viewRef;\r\n  }\r\n  initViewEntry(entry) {\r\n    var _a;\r\n    if (entry.isInit) {\r\n      return;\r\n    }\r\n    entry.isInit = true;\r\n    entry.vNode = entry.render();\r\n    entry.ref = entry.vNode.instance;\r\n    (_a = this.viewRef) == null ? void 0 : _a.renderView(\r\n      /* @__PURE__ */ FSComponent.buildComponent(ViewWrapper, { viewName: entry.key, isActive: entry.isActive, ref: entry.containerRef }, entry.vNode)\r\n    );\r\n    entry.ref.onOpen();\r\n    entry.ref.onResume();\r\n    entry.ref.onPause();\r\n  }\r\n  initialize(key) {\r\n    var _a;\r\n    if (this.hasInitialized) {\r\n      return;\r\n    }\r\n    this.hasInitialized = true;\r\n    if (key) {\r\n      const initViewEntry = this.getViewEntry(key);\r\n      (_a = initViewEntry.ref) == null ? void 0 : _a.onResume();\r\n      initViewEntry.isActive.set(true);\r\n      this.activeViewEntry.set(initViewEntry);\r\n    }\r\n  }\r\n  openPage(key) {\r\n    var _a, _b;\r\n    const activeViewEntry = this.activeViewEntry.get();\r\n    if ((activeViewEntry == null ? void 0 : activeViewEntry.key) === key) {\r\n      return activeViewEntry;\r\n    }\r\n    activeViewEntry == null ? void 0 : activeViewEntry.isActive.set(false);\r\n    (_a = activeViewEntry == null ? void 0 : activeViewEntry.ref) == null ? void 0 : _a.onPause();\r\n    const newViewEntry = this.getViewEntry(key);\r\n    newViewEntry.isActive.set(true);\r\n    (_b = newViewEntry.ref) == null ? void 0 : _b.onResume();\r\n    this.activeViewEntry.set(newViewEntry);\r\n    return newViewEntry;\r\n  }\r\n  onPause() {\r\n    var _a, _b, _c, _d;\r\n    (_b = (_a = this.activeViewEntry.get()) == null ? void 0 : _a.ref) == null ? void 0 : _b.onPause();\r\n    (_c = this.prevTabActionDestructor) == null ? void 0 : _c.call(this);\r\n    (_d = this.nextTabActionDestructor) == null ? void 0 : _d.call(this);\r\n  }\r\n  onResume() {\r\n    var _a, _b;\r\n    (_b = (_a = this.activeViewEntry.get()) == null ? void 0 : _a.ref) == null ? void 0 : _b.onResume();\r\n  }\r\n  onUpdate(time) {\r\n    var _a, _b;\r\n    (_b = (_a = this.activeViewEntry.get()) == null ? void 0 : _a.ref) == null ? void 0 : _b.onUpdate(time);\r\n  }\r\n  destroy() {\r\n    this.viewTabVisibilitySubscriptions.forEach((subscription) => subscription.destroy());\r\n  }\r\n}\r\nclass ViewServiceContainer extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.stackContainerRef = FSComponent.createRef();\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.props.viewService.onContainerRendered(this.stackContainerRef.instance);\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(ViewStackContainer, { ref: this.stackContainerRef, class: this.props.class, id: this.props.id });\r\n  }\r\n}\r\nclass ViewServiceMenu extends GamepadUiComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.tabs = [];\r\n  }\r\n  tabRender(tab) {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      TabSelector,\r\n      {\r\n        ref: tab.tabRef,\r\n        tabName: tab.view.ref.tabName,\r\n        callback: () => {\r\n          this.props.viewService.openPage(tab.view.key);\r\n        },\r\n        active: tab.view.isActive,\r\n        disabled: tab.view.isDisabled,\r\n        hidden: tab.view.isTabVisible.map(SubscribableMapFunctions.not())\r\n      }\r\n    );\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { ref: this.gamepadUiComponentRef, class: mergeClassProp(\"tabs\", this.props.class) });\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.viewsSub = this.props.viewService.getRegisteredViews().sub((key, type, view) => {\r\n      switch (type) {\r\n        case SubscribableMapEventType.Added:\r\n          {\r\n            if (view === void 0 || !(view.ref instanceof UiView) || !view.ref.tabName) {\r\n              return;\r\n            }\r\n            const tab = {\r\n              key,\r\n              tabRef: FSComponent.createRef(),\r\n              view\r\n            };\r\n            FSComponent.render(this.tabRender(tab), this.gamepadUiComponentRef.instance);\r\n            this.tabs.push(tab);\r\n          }\r\n          break;\r\n        case SubscribableMapEventType.Removed:\r\n          {\r\n            const index2 = this.tabs.findIndex((el) => el.key === key);\r\n            if (index2 === -1) {\r\n              return;\r\n            }\r\n            const removed = this.tabs.splice(index2, 1)[0];\r\n            removed.tabRef.instance.destroy();\r\n            const child = this.gamepadUiComponentRef.instance.childNodes.item(index2);\r\n            this.gamepadUiComponentRef.instance.removeChild(child);\r\n          }\r\n          break;\r\n      }\r\n    }, true);\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    (_a = this.viewsSub) == null ? void 0 : _a.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\nexport {\r\n  AbstractAccordion,\r\n  AbstractButton,\r\n  AirportSize,\r\n  App,\r\n  AppBootMode,\r\n  AppContainer,\r\n  AppSuspendMode,\r\n  AppView,\r\n  AppViewService,\r\n  ArrayFilterSubject,\r\n  BearingDisplay,\r\n  Button,\r\n  CircularProgress,\r\n  ClassicButton,\r\n  Container,\r\n  DateDisplay,\r\n  DropdownButton,\r\n  Efb,\r\n  EfbApiVersion,\r\n  EfbMode,\r\n  EfbSettings,\r\n  EfbSettingsManager,\r\n  EfbSettingsSaveManager,\r\n  EfbSizeSettingMode,\r\n  ElementAccordion,\r\n  FlightPhaseManager,\r\n  FlightPhaseState,\r\n  GameMode,\r\n  GameModeManager,\r\n  GamepadEvents,\r\n  GamepadInputManager,\r\n  GamepadUiComponent,\r\n  GamepadUiParser,\r\n  GamepadUiView,\r\n  GhostListItem,\r\n  IconButton,\r\n  IconElement,\r\n  Incremental,\r\n  InputAction,\r\n  InputActions,\r\n  InputManager,\r\n  InputStackListener,\r\n  InputsListener,\r\n  LargeAirportThresholdFt,\r\n  List,\r\n  MapSubject,\r\n  Marquee,\r\n  MediumAirportThresholdFt,\r\n  MultipleButtons,\r\n  NotificationManager,\r\n  NumberUnitDisplay,\r\n  OnboardingManager,\r\n  OrientationSettingMode,\r\n  PagingList,\r\n  ProgressBar,\r\n  ProgressComponent,\r\n  RunwaySelector,\r\n  ScrollBar,\r\n  SearchBar,\r\n  SearchFacility,\r\n  SelectableButton2 as SelectableButton,\r\n  Slider,\r\n  Stopwatch,\r\n  StopwatchState,\r\n  StringAccordion,\r\n  SubscribableMapEventType,\r\n  Switch,\r\n  TT,\r\n  TTButton,\r\n  TabSelector,\r\n  Tag,\r\n  TextArea,\r\n  TextBox,\r\n  Timer,\r\n  Tooltip,\r\n  TypedButton,\r\n  UiView,\r\n  UnitBox,\r\n  UnitFormatter,\r\n  UnitsAltitudeSettingMode,\r\n  UnitsBox,\r\n  UnitsDistanceSettingMode,\r\n  UnitsNavAngleSettingMode,\r\n  UnitsSettings,\r\n  UnitsSettingsManager,\r\n  UnitsSmallDistanceSettingMode,\r\n  UnitsSpeedSettingMode,\r\n  UnitsTemperatureSettingMode,\r\n  UnitsTimeSettingMode,\r\n  UnitsVolumeSettingMode,\r\n  UnitsWeightSettingMode,\r\n  ViewBootMode,\r\n  ViewService,\r\n  ViewServiceContainer,\r\n  ViewServiceMenu,\r\n  ViewSuspendMode,\r\n  ViewWrapper,\r\n  basicFormatter,\r\n  checkUserSetting,\r\n  chunk,\r\n  createCustomFacility,\r\n  createPermanentNotif,\r\n  createPermanentNotification,\r\n  createTemporaryNotif,\r\n  createTemporaryNotification,\r\n  dayKeys,\r\n  elementOffset,\r\n  extractChunks,\r\n  formatDay,\r\n  getAirportSize,\r\n  getCurrentRunwayName,\r\n  getFacilityIconPath,\r\n  getFacilityName,\r\n  getICAOIdent,\r\n  getLatLonStr,\r\n  getRunwayName,\r\n  getStartOfWeek,\r\n  getWeeksInMonth,\r\n  groupBy,\r\n  isAirportFacility,\r\n  isConstructor,\r\n  isFunction,\r\n  isIApp,\r\n  isNotifPermanent,\r\n  isNotificationPermanent,\r\n  isPromise,\r\n  isSelectedAirportFacility,\r\n  isVNode,\r\n  loadFileAsBlob,\r\n  measure,\r\n  mergeClassProp,\r\n  monthKeys,\r\n  monthShortKeys,\r\n  offsetMousePosition,\r\n  random,\r\n  readMetadata,\r\n  textDecode,\r\n  toArray,\r\n  toClassProp,\r\n  toPromise,\r\n  toString,\r\n  unique,\r\n  value,\r\n  where,\r\n  wrap\r\n};\r\n", "/** @jsx FSComponent.buildComponent */\r\n/** @jsxFrag FSComponent.Fragment */\r\nimport {\r\n  App,\r\n  AppBootMode,\r\n  AppInstallProps,\r\n  AppSuspendMode,\r\n  AppView,\r\n  AppViewProps,\r\n  Efb,\r\n  RequiredProps,\r\n  TVNode,\r\n} from \"@efb/efb-api\";\r\nimport { FSComponent, VNode } from \"@microsoft/msfs-sdk\";\r\nimport \"./GsimKneeboard.scss\";\r\n\r\ndeclare const BASE_URL: string;\r\n\r\nconst LOCAL_KNEEBOARD_URL = `http://localhost:815/kneeboard.html`;\r\n\r\nclass GsimKneeboardView extends AppView<RequiredProps<AppViewProps, \"bus\">> {\r\n  private readonly iframeRef = FSComponent.createRef<HTMLIFrameElement>();\r\n  private readonly fallbackRef = FSComponent.createRef<HTMLDivElement>();\r\n  private probeIntervalId?: number;\r\n\r\n  private readonly handleIframeLoad = (): void => {\r\n    this.setConnectionState(true);\r\n  };\r\n\r\n  private readonly handleIframeError = (): void => {\r\n    this.setConnectionState(false);\r\n  };\r\n\r\n  public onAfterRender(node: VNode): void {\r\n    super.onAfterRender(node);\r\n\r\n    // Initial state\r\n    this.setConnectionState(false);\r\n\r\n    // Iframe event listeners\r\n    const iframe = this.iframeRef.instance;\r\n    if (iframe) {\r\n      iframe.addEventListener(\"load\", this.handleIframeLoad);\r\n      iframe.addEventListener(\"error\", this.handleIframeError);\r\n    }\r\n\r\n    // Probe server availability\r\n    this.startProbing();\r\n  }\r\n\r\n  public destroy(): void {\r\n    const iframe = this.iframeRef.instance;\r\n    if (iframe) {\r\n      iframe.removeEventListener(\"load\", this.handleIframeLoad);\r\n      iframe.removeEventListener(\"error\", this.handleIframeError);\r\n    }\r\n\r\n    if (this.probeIntervalId !== undefined) {\r\n      window.clearInterval(this.probeIntervalId);\r\n    }\r\n\r\n    super.destroy();\r\n  }\r\n\r\n  private startProbing(): void {\r\n    // Probe server every 10 seconds\r\n    this.probeIntervalId = window.setInterval(() => {\r\n      fetch(LOCAL_KNEEBOARD_URL, { method: 'HEAD' })\r\n        .then(() => this.setConnectionState(true))\r\n        .catch(() => this.setConnectionState(false));\r\n    }, 10000);\r\n  }\r\n\r\n  private setConnectionState(connected: boolean): void {\r\n    const fallback = this.fallbackRef.instance;\r\n    if (fallback) {\r\n      fallback.style.display = connected ? \"none\" : \"flex\";\r\n    }\r\n\r\n    const iframe = this.iframeRef.instance;\r\n    if (iframe) {\r\n      iframe.style.display = connected ? \"block\" : \"none\";\r\n    }\r\n  }\r\n\r\n  public render(): VNode {\r\n    return (\r\n      <div class=\"gsim-kneeboard\">\r\n        <div\r\n          class=\"kneeboard-connection-fallback\"\r\n          ref={this.fallbackRef}\r\n        >\r\n          <div\r\n            class=\"kneeboard-connection-card\"\r\n          >\r\n            <img\r\n              src={`${BASE_URL}/Assets/Logo.png`}\r\n              alt=\"GSim Logo\"\r\n              class=\"kneeboard-connection-logo\"\r\n            />\r\n            <span\r\n              class=\"kneeboard-connection-Span\"\r\n            >\r\n              Waiting for Kneeboard server&hellip;\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <iframe\r\n          ref={this.iframeRef}\r\n          src={LOCAL_KNEEBOARD_URL}\r\n          title=\"GSim Kneeboard\"\r\n        />\r\n      </div>\r\n    ) as unknown as VNode;\r\n  }\r\n}\r\n\r\nclass GsimKneeboard extends App {\r\n  public get name(): string {\r\n    return \"Kneeboard\";\r\n  }\r\n\r\n  public get icon(): string {\r\n    return `${BASE_URL}/Assets/app-icon.svg`;\r\n  }\r\n\r\n  public BootMode = AppBootMode.COLD;\r\n  public SuspendMode = AppSuspendMode.SLEEP;\r\n\r\n  public async install(_props: AppInstallProps): Promise<void> {\r\n    Efb.loadCss(`${BASE_URL}/GsimKneeboard.css`).catch((err) =>\r\n      console.error(\"Unable to load kneeboard stylesheet:\", err)\r\n    );\r\n    return Promise.resolve();\r\n  }\r\n\r\n  public render(): TVNode<GsimKneeboardView> {\r\n    return (\r\n      <GsimKneeboardView bus={this.bus} />\r\n    ) as unknown as TVNode<GsimKneeboardView>;\r\n  }\r\n}\r\n\r\nEfb.use(GsimKneeboard);\r\n"],
  "mappings": "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",
  "names": ["__defProp", "__hasOwnProp", "_a", "_a", "_a", "_a", "_a", "_a2", "_a", "_a", "__defProp2", "__getOwnPropDesc", "_a", "_a2", "_a", "_a", "_a", "_a2", "_a", "_a", "_a", "_a", "_a", "_a", "import_msfs_sdk"]
}
